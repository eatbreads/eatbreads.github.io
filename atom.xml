<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>æ¬¢è¿æ¥åˆ°å°é¢åŒ…çš„å°ç«™ğŸ¥</title>
  
  
  <link href="https://eatbreads.github.io/atom.xml" rel="self"/>
  
  <link href="https://eatbreads.github.io/"/>
  <updated>2025-03-28T07:18:33.692Z</updated>
  <id>https://eatbreads.github.io/</id>
  
  <author>
    <name>å°é¢åŒ…ğŸ¥</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>å°è£…ä¸€ä¸ªå¥½ç”¨çš„C++20åç¨‹</title>
    <link href="https://eatbreads.github.io/posts/5950a8c.html"/>
    <id>https://eatbreads.github.io/posts/5950a8c.html</id>
    <published>2025-03-27T09:52:50.000Z</published>
    <updated>2025-03-28T07:18:33.692Z</updated>
    
    <content type="html"><![CDATA[<h1>å°è£…C++20åç¨‹</h1><h2 id="åŸºæœ¬æ¦‚å¿µ">åŸºæœ¬æ¦‚å¿µ</h2><p>åœ¨C++20ä¸­,åªè¦å‡½æ•°è¿”å›å€¼æ˜¯Taskç±»å‹,å¹¶ä½¿ç”¨co_returnè¿”å›,è¯¥å‡½æ•°å°±è‡ªåŠ¨æˆä¸ºä¸€ä¸ªåç¨‹å‡½æ•°ã€‚</p><p>Taskä¸ä»…ä»…æ˜¯ä¸€ä¸ª&quot;é…ç½®æ–‡ä»¶&quot;,å®ƒè¿˜æ‰¿æ‹…ç€åç¨‹çš„æ ¸å¿ƒç®¡ç†èŒè´£ã€‚<br><img src="https://cdn-a.markji.com/files/67e5149181bdefd1be1b48a1_hd.png?e=1743071911923&amp;token=xX63b9jqTlDOcGmctt5K9254rV0LG8hS9BmDeFBy:qD4gzPadJ_pcN2NUgOz7CfrLvuA=" alt="å›¾ç‰‡1"></p><h2 id="æ ¸å¿ƒåŸç†">æ ¸å¿ƒåŸç†</h2><h3 id="åç¨‹çš„æ‰§è¡Œæ§åˆ¶">åç¨‹çš„æ‰§è¡Œæ§åˆ¶</h3><p>ä¸€ä¸ªè¿”å›Taskçš„å‡½æ•°æœ¬èº«å°±æ˜¯åç¨‹,å…¶å†…éƒ¨ä»£ç ä¼šåœ¨ä»¥ä¸‹æƒ…å†µä¸‹å¼‚æ­¥æ‰§è¡Œ:</p><ul><li>co_await è¯­å¥æ§åˆ¶</li><li>co_return è¯­å¥æ§åˆ¶</li></ul><h3 id="æ¢å¤åç¨‹çš„ä¸¤ç§æ–¹å¼">æ¢å¤åç¨‹çš„ä¸¤ç§æ–¹å¼</h3><ol><li>å†…éƒ¨æ¢å¤:</li></ol><ul><li>é€šè¿‡handle.resume()</li><li>ç”±å¼‚æ­¥ç­‰å¾…æ“ä½œè§¦å‘(å¦‚Delayçš„await_suspend)</li></ul><ol start="2"><li>å¤–éƒ¨æ¢å¤:</li></ol><ul><li>é€šè¿‡task2.resume()æ˜¾å¼è°ƒç”¨</li><li>ä¸»åŠ¨ä»å¤–éƒ¨æ¢å¤åç¨‹æ‰§è¡Œ</li></ul><p>è¿™ä¸¤ç§æ–¹å¼éƒ½ä¼šç«‹å³æ¢å¤åç¨‹å¹¶ä»æŒ‚èµ·ç‚¹ç»§ç»­æ‰§è¡Œ,æœ€ç»ˆåˆ°è¾¾co_returnã€‚</p><h2 id="å®è·µå‘ç°">å®è·µå‘ç°</h2><p>åœ¨å®é™…ä½¿ç”¨ä¸­å‘ç°ä¸€ä¸ªæœ‰è¶£çš„ç°è±¡:</p><ul><li>æ³¨é‡Šæ‰handle.resume()ä¸å½±å“ç¨‹åºè¿è¡Œ</li><li>ä½†æ³¨é‡Šæ‰mainå‡½æ•°ä¸­çš„resume()ä¼šå¯¼è‡´ç¨‹åºå¡ä½<br><img src="https://cdn-a.markji.com/files/67e50d7bd5e9e782bf746323_hd.png?e=1743071911923&amp;token=xX63b9jqTlDOcGmctt5K9254rV0LG8hS9BmDeFBy:Bqc5H0LAPJjBWn_d_qcFVY0rLxk=" alt="å›¾ç‰‡1"></li></ul><h2 id="ç¼–è¯‘å‘½ä»¤">ç¼–è¯‘å‘½ä»¤</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">g++ -o <span class="built_in">test</span> -std=c++20 test.cpp</span><br></pre></td></tr></table></figure><h2 id="å®Œæ•´å¤´æ–‡é›†">å®Œæ•´å¤´æ–‡é›†</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">pragma</span> once</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;coroutine&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;exception&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;concepts&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;type_traits&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Task</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">promise_type</span> &#123;</span><br><span class="line">        T value_;</span><br><span class="line">        std::exception_ptr exception_;</span><br><span class="line"></span><br><span class="line">        <span class="function">Task <span class="title">get_return_object</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">Task</span>(std::coroutine_handle&lt;promise_type&gt;::<span class="built_in">from_promise</span>(*<span class="keyword">this</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="function">std::suspend_always <span class="title">initial_suspend</span><span class="params">()</span> <span class="keyword">noexcept</span> </span>&#123; <span class="keyword">return</span> &#123;&#125;; &#125;</span><br><span class="line">        <span class="function">std::suspend_always <span class="title">final_suspend</span><span class="params">()</span> <span class="keyword">noexcept</span> </span>&#123; <span class="keyword">return</span> &#123;&#125;; &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">return_value</span><span class="params">(T value)</span> </span>&#123;</span><br><span class="line">            value_ = std::<span class="built_in">move</span>(value);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">unhandled_exception</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            exception_ = std::<span class="built_in">current_exception</span>();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Awaiter æ”¯æŒ</span></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">await_ready</span><span class="params">()</span> <span class="type">const</span> <span class="keyword">noexcept</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">await_suspend</span><span class="params">(std::coroutine_handle&lt;&gt; handle)</span> <span class="type">const</span> <span class="keyword">noexcept</span> </span>&#123;</span><br><span class="line">        <span class="comment">// ä¿å­˜å½“å‰ç­‰å¾…çš„åç¨‹å¥æŸ„</span></span><br><span class="line">        waiting_handle_ = handle;</span><br><span class="line">        <span class="comment">// æ¢å¤å½“å‰ä»»åŠ¡çš„æ‰§è¡Œ</span></span><br><span class="line">        handle_.<span class="built_in">resume</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">T <span class="title">await_resume</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (handle_.<span class="built_in">promise</span>().exception_) &#123;</span><br><span class="line">            std::<span class="built_in">rethrow_exception</span>(handle_.<span class="built_in">promise</span>().exception_);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> std::<span class="built_in">move</span>(handle_.<span class="built_in">promise</span>().value_);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">Task</span>(std::coroutine_handle&lt;promise_type&gt; handle) : <span class="built_in">handle_</span>(handle) &#123;&#125;</span><br><span class="line">    ~<span class="built_in">Task</span>() &#123;</span><br><span class="line">        <span class="keyword">if</span> (handle_) handle_.<span class="built_in">destroy</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">Task</span>(<span class="type">const</span> Task&amp;) = <span class="keyword">delete</span>;</span><br><span class="line">    Task&amp; <span class="keyword">operator</span>=(<span class="type">const</span> Task&amp;) = <span class="keyword">delete</span>;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">Task</span>(Task&amp;&amp; other) <span class="keyword">noexcept</span> : <span class="built_in">handle_</span>(other.handle_) &#123;</span><br><span class="line">        other.handle_ = <span class="literal">nullptr</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    Task&amp; <span class="keyword">operator</span>=(Task&amp;&amp; other) <span class="keyword">noexcept</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span> != &amp;other) &#123;</span><br><span class="line">            <span class="keyword">if</span> (handle_) handle_.<span class="built_in">destroy</span>();</span><br><span class="line">            handle_ = other.handle_;</span><br><span class="line">            other.handle_ = <span class="literal">nullptr</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">T <span class="title">get</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (handle_.<span class="built_in">promise</span>().exception_)</span><br><span class="line">            std::<span class="built_in">rethrow_exception</span>(handle_.<span class="built_in">promise</span>().exception_);</span><br><span class="line">        <span class="keyword">return</span> std::<span class="built_in">move</span>(handle_.<span class="built_in">promise</span>().value_);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">resume</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        handle_.<span class="built_in">resume</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">done</span><span class="params">()</span> <span class="type">const</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> handle_.<span class="built_in">done</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    std::coroutine_handle&lt;promise_type&gt; handle_;</span><br><span class="line">    <span class="keyword">mutable</span> std::coroutine_handle&lt;&gt; waiting_handle_ = <span class="literal">nullptr</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç‰¹åŒ– void ç±»å‹çš„ Task</span></span><br><span class="line"><span class="keyword">template</span>&lt;&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Task</span>&lt;<span class="type">void</span>&gt; &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">promise_type</span> &#123;</span><br><span class="line">        std::exception_ptr exception_;</span><br><span class="line"></span><br><span class="line">        <span class="function">Task&lt;<span class="type">void</span>&gt; <span class="title">get_return_object</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">Task</span>&lt;<span class="type">void</span>&gt;(std::coroutine_handle&lt;promise_type&gt;::<span class="built_in">from_promise</span>(*<span class="keyword">this</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="function">std::suspend_always <span class="title">initial_suspend</span><span class="params">()</span> <span class="keyword">noexcept</span> </span>&#123; <span class="keyword">return</span> &#123;&#125;; &#125;</span><br><span class="line">        <span class="function">std::suspend_always <span class="title">final_suspend</span><span class="params">()</span> <span class="keyword">noexcept</span> </span>&#123; <span class="keyword">return</span> &#123;&#125;; &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">return_void</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line">        </span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">unhandled_exception</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            exception_ = std::<span class="built_in">current_exception</span>();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Awaiter æ”¯æŒ</span></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">await_ready</span><span class="params">()</span> <span class="type">const</span> <span class="keyword">noexcept</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">await_suspend</span><span class="params">(std::coroutine_handle&lt;&gt; handle)</span> <span class="type">const</span> <span class="keyword">noexcept</span> </span>&#123;</span><br><span class="line">        waiting_handle_ = handle;</span><br><span class="line">        handle_.<span class="built_in">resume</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">await_resume</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (handle_.<span class="built_in">promise</span>().exception_) &#123;</span><br><span class="line">            std::<span class="built_in">rethrow_exception</span>(handle_.<span class="built_in">promise</span>().exception_);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">Task</span>(std::coroutine_handle&lt;promise_type&gt; handle) : <span class="built_in">handle_</span>(handle) &#123;&#125;</span><br><span class="line">    ~<span class="built_in">Task</span>() &#123;</span><br><span class="line">        <span class="keyword">if</span> (handle_) handle_.<span class="built_in">destroy</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">Task</span>(<span class="type">const</span> Task&amp;) = <span class="keyword">delete</span>;</span><br><span class="line">    Task&amp; <span class="keyword">operator</span>=(<span class="type">const</span> Task&amp;) = <span class="keyword">delete</span>;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">Task</span>(Task&amp;&amp; other) <span class="keyword">noexcept</span> : <span class="built_in">handle_</span>(other.handle_) &#123;</span><br><span class="line">        other.handle_ = <span class="literal">nullptr</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    Task&amp; <span class="keyword">operator</span>=(Task&amp;&amp; other) <span class="keyword">noexcept</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span> != &amp;other) &#123;</span><br><span class="line">            <span class="keyword">if</span> (handle_) handle_.<span class="built_in">destroy</span>();</span><br><span class="line">            handle_ = other.handle_;</span><br><span class="line">            other.handle_ = <span class="literal">nullptr</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">get</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (handle_.<span class="built_in">promise</span>().exception_)</span><br><span class="line">            std::<span class="built_in">rethrow_exception</span>(handle_.<span class="built_in">promise</span>().exception_);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">resume</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        handle_.<span class="built_in">resume</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">done</span><span class="params">()</span> <span class="type">const</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> handle_.<span class="built_in">done</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    std::coroutine_handle&lt;promise_type&gt; handle_;</span><br><span class="line">    <span class="keyword">mutable</span> std::coroutine_handle&lt;&gt; waiting_handle_ = <span class="literal">nullptr</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">```cpp</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;MyCoroutine.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;chrono&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;thread&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¤ºä¾‹: å»¶è¿Ÿæ‰§è¡Œçš„awaiter</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Delay</span> &#123;</span><br><span class="line">    std::chrono::milliseconds duration_;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">explicit</span> <span class="title">Delay</span><span class="params">(std::chrono::milliseconds duration)</span> : duration_(duration) &#123;</span>&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">await_ready</span><span class="params">()</span> <span class="type">const</span> <span class="keyword">noexcept</span> </span>&#123; <span class="keyword">return</span> <span class="literal">false</span>; &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">await_suspend</span><span class="params">(std::coroutine_handle&lt;&gt; handle)</span> </span>&#123;</span><br><span class="line">        std::<span class="built_in">thread</span>([handle, <span class="keyword">this</span>]() &#123;</span><br><span class="line">            std::this_thread::<span class="built_in">sleep_for</span>(duration_);</span><br><span class="line">            <span class="comment">//handle.resume();</span></span><br><span class="line">        &#125;).<span class="built_in">detach</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">await_resume</span><span class="params">()</span> <span class="type">const</span> <span class="keyword">noexcept</span> </span>&#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function">Task&lt;<span class="type">int</span>&gt; <span class="title">simple_task</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;å¼€å§‹æ‰§è¡Œä»»åŠ¡&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    <span class="keyword">co_return</span> <span class="number">42</span>;  <span class="comment">// ç›´æ¥è¿”å›ç»“æœ</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¤ºä¾‹2: å¸¦å»¶è¿Ÿçš„å¼‚æ­¥ä»»åŠ¡</span></span><br><span class="line"><span class="function">Task&lt;std::string&gt; <span class="title">delayed_task</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;å¼€å§‹å»¶è¿Ÿä»»åŠ¡&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    <span class="function"><span class="keyword">co_await</span> <span class="title">Delay</span><span class="params">(std::chrono::milliseconds(<span class="number">4000</span>))</span></span>;  <span class="comment">// ç­‰å¾…1ç§’</span></span><br><span class="line">    <span class="keyword">co_return</span> <span class="string">&quot;å®Œæˆ&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¤ºä¾‹3: ç»„åˆå¤šä¸ªå¼‚æ­¥ä»»åŠ¡</span></span><br><span class="line"><span class="function">Task&lt;<span class="type">void</span>&gt; <span class="title">combined_tasks</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">auto</span> result1 = <span class="keyword">co_await</span> <span class="built_in">simple_task</span>();</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;ç¬¬ä¸€ä¸ªä»»åŠ¡ç»“æœ: &quot;</span> &lt;&lt; result1 &lt;&lt; std::endl;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">auto</span> result2 = <span class="keyword">co_await</span> <span class="built_in">delayed_task</span>();</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;ç¬¬äºŒä¸ªä»»åŠ¡ç»“æœ: &quot;</span> &lt;&lt; result2 &lt;&lt; std::endl;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">co_return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// æ‰§è¡Œç®€å•ä»»åŠ¡</span></span><br><span class="line">    <span class="keyword">auto</span> task1 = <span class="built_in">simple_task</span>();</span><br><span class="line">    <span class="keyword">while</span> (!task<span class="number">1.</span><span class="built_in">done</span>()) &#123;</span><br><span class="line">        task<span class="number">1.</span><span class="built_in">resume</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;ç®€å•ä»»åŠ¡ç»“æœ: &quot;</span> &lt;&lt; task<span class="number">1.</span><span class="built_in">get</span>() &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ‰§è¡Œå»¶è¿Ÿä»»åŠ¡</span></span><br><span class="line">    <span class="keyword">auto</span> task2 = <span class="built_in">delayed_task</span>();</span><br><span class="line">    <span class="keyword">while</span> (!task<span class="number">2.</span><span class="built_in">done</span>()) &#123;</span><br><span class="line">        task<span class="number">2.</span><span class="built_in">resume</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;å»¶è¿Ÿä»»åŠ¡ç»“æœ: &quot;</span> &lt;&lt; task<span class="number">2.</span><span class="built_in">get</span>() &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ‰§è¡Œç»„åˆä»»åŠ¡</span></span><br><span class="line">    <span class="keyword">auto</span> task3 = <span class="built_in">combined_tasks</span>();</span><br><span class="line">    <span class="keyword">while</span> (!task<span class="number">3.</span><span class="built_in">done</span>()) &#123;</span><br><span class="line">        task<span class="number">3.</span><span class="built_in">resume</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    task<span class="number">3.</span><span class="built_in">get</span>();  <span class="comment">// å¯¹äºvoidç±»å‹çš„Taskï¼Œä»ç„¶éœ€è¦è°ƒç”¨get()æ¥æ£€æŸ¥å¼‚å¸¸</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><pre><code>## æ³¨æ„äº‹é¡¹1. åç¨‹å‡½æ•°å¿…é¡»:   - è¿”å›Taskç±»å‹   - ä½¿ç”¨co_returnè¿”å›å€¼2. æ¢å¤æœºåˆ¶é€‰æ‹©:   - å†…éƒ¨æ¢å¤é€‚åˆè‡ªåŠ¨è§¦å‘çš„åœºæ™¯   - å¤–éƒ¨æ¢å¤é€‚åˆéœ€è¦æ‰‹åŠ¨æ§åˆ¶çš„åœºæ™¯3. æ€§èƒ½è€ƒè™‘:   - åç¨‹åˆ‡æ¢æœ‰ä¸€å®šå¼€é”€   - é€‚åˆIOå¯†é›†å‹ä»»åŠ¡   - ä¸é€‚åˆCPUå¯†é›†å‹è®¡ç®—</code></pre>]]></content>
    
    
    <summary type="html">ä»‹ç»å¦‚ä½•å°è£…å’Œä½¿ç”¨C++20åç¨‹åŠŸèƒ½</summary>
    
    
    
    <category term="C++å¼€å‘" scheme="https://eatbreads.github.io/categories/C-%E5%BC%80%E5%8F%91/"/>
    
    
    <category term="C++" scheme="https://eatbreads.github.io/tags/C/"/>
    
    <category term="åç¨‹" scheme="https://eatbreads.github.io/tags/%E5%8D%8F%E7%A8%8B/"/>
    
    <category term="å¼‚æ­¥ç¼–ç¨‹" scheme="https://eatbreads.github.io/tags/%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/"/>
    
  </entry>
  
  <entry>
    <title>å›è°ƒåœ°ç‹±å’Œè§£å†³æ–¹æ³•</title>
    <link href="https://eatbreads.github.io/posts/f3d7b43c.html"/>
    <id>https://eatbreads.github.io/posts/f3d7b43c.html</id>
    <published>2025-03-27T09:48:16.000Z</published>
    <updated>2025-03-28T07:18:33.689Z</updated>
    
    <content type="html"><![CDATA[<h1>å›è°ƒåœ°ç‹±åŠå…¶è§£å†³æ–¹æ¡ˆ</h1><h2 id="ä»€ä¹ˆæ˜¯å›è°ƒåœ°ç‹±">ä»€ä¹ˆæ˜¯å›è°ƒåœ°ç‹±</h2><p>å›è°ƒåœ°ç‹±(Callback Hell)ä¸€èˆ¬æŒ‡çš„æ˜¯å›è°ƒå‡½æ•°å±‚å±‚åµŒå¥—çš„ç°è±¡,è¿™ç§ä»£ç ç»“æ„ä¼šå¯¼è‡´:</p><ul><li>ä»£ç éš¾ä»¥ç†è§£</li><li>ç»´æŠ¤æˆæœ¬é«˜</li><li>è°ƒè¯•å›°éš¾</li></ul><h2 id="å¸¸è§åœºæ™¯">å¸¸è§åœºæ™¯</h2><p>å›è°ƒåœ°ç‹±å¸¸è§äºå¼‚æ­¥ç¼–ç¨‹ä¸­,ç‰¹åˆ«æ˜¯:</p><ol><li>äº‹ä»¶é©±åŠ¨æ¨¡å‹</li><li>åŸºäºå›è°ƒçš„å¼‚æ­¥æ“ä½œ</li><li>ç½‘ç»œè¯·æ±‚</li><li>æ–‡ä»¶è¯»å–</li><li>å®šæ—¶ä»»åŠ¡</li></ol><h2 id="ä¸»è¦é—®é¢˜">ä¸»è¦é—®é¢˜</h2><h3 id="1-çŠ¶æ€ä¼ é€’å›°éš¾">1. çŠ¶æ€ä¼ é€’å›°éš¾</h3><p>å¤šå±‚åµŒå¥—çš„å›è°ƒéœ€è¦åœ¨ä¸åŒå±‚çº§é—´ä¼ é€’å„ç§çŠ¶æ€,å¯¼è‡´:</p><ul><li>ä»£ç éš¾ä»¥è°ƒè¯•</li><li>é”™è¯¯è¿½è¸ªå›°éš¾</li><li>çŠ¶æ€ç®¡ç†å¤æ‚</li></ul><h3 id="2-äº‹ä»¶ä¾èµ–é“¾">2. äº‹ä»¶ä¾èµ–é“¾</h3><p>å…¸å‹ä¾‹å­æ˜¯å¤„ç†EPOLLINäº‹ä»¶æ—¶éœ€è¦ç­‰å¾…å…¶ä»–å¼‚æ­¥äº‹ä»¶å®Œæˆ,å½¢æˆå¤æ‚çš„äº‹ä»¶ä¾èµ–å…³ç³»ã€‚<br><img src="https://cdn-a.markji.com/files/67e4f7d681bdefd1be164eb2_hd.png?e=1743071664551&amp;token=xX63b9jqTlDOcGmctt5K9254rV0LG8hS9BmDeFBy:S7s8WGObEQ7yLIBHFVNx3hy0zQ0=" alt="å›¾ç‰‡1"></p><h3 id="3-æ¡†æ¶å±€é™">3. æ¡†æ¶å±€é™</h3><p>å³ä½¿æ˜¯ç°ä»£æ¡†æ¶å¦‚Qtçš„ä¿¡å·æ§½æœºåˆ¶,åœ¨å¤„ç†å¤æ‚çš„å¼‚æ­¥æµç¨‹æ—¶ä¹Ÿå¯èƒ½é‡åˆ°ç±»ä¼¼é—®é¢˜ã€‚</p><h2 id="è§£å†³æ–¹æ¡ˆ">è§£å†³æ–¹æ¡ˆ</h2><h3 id="1-æœ‰é™çŠ¶æ€æœº">1. æœ‰é™çŠ¶æ€æœº</h3><p>ä½¿ç”¨çŠ¶æ€æœºå¯ä»¥:</p><ul><li>æ¸…æ™°åœ°å®šä¹‰çŠ¶æ€è½¬æ¢</li><li>ç®€åŒ–äº‹ä»¶å¤„ç†é€»è¾‘</li><li>æé«˜ä»£ç å¯ç»´æŠ¤æ€§<br><img src="https://cdn-a.markji.com/files/67e4f9ae81bdefd1be16b2e6_hd.png?e=1743071674079&amp;token=xX63b9jqTlDOcGmctt5K9254rV0LG8hS9BmDeFBy:4qWtJeXCFx8d5jW3lGtTV0QP2fY=" alt="å›¾ç‰‡1"></li></ul><h3 id="2-åç¨‹">2. åç¨‹</h3><p>åç¨‹æä¾›äº†æ›´ä¼˜é›…çš„è§£å†³æ–¹æ¡ˆ:</p><ul><li>å¯ä»¥æš‚åœæ‰§è¡Œä¸­çš„çº¿ç¨‹</li><li>ç±»ä¼¼äºç»™çº¿ç¨‹æ·»åŠ äº†gotoèƒ½åŠ›</li><li>ä»£ç ç»“æ„æ›´æ¸…æ™°æ˜“è¯»</li><li>æ¥è¿‘åŒæ­¥ä»£ç çš„å†™æ³•</li><li>é¿å…äº†æ˜¾å¼çš„å›è°ƒåµŒå¥—</li></ul><p>åç¨‹ç›¸æ¯”ä¼ ç»Ÿå›è°ƒçš„ä¼˜åŠ¿:</p><ul><li>çº¿æ€§çš„ä»£ç ç»“æ„</li><li>æ›´å¥½çš„é”™è¯¯å¤„ç†</li><li>æ›´å®¹æ˜“çš„çŠ¶æ€ç®¡ç†</li><li>æ›´æ¥è¿‘äººç±»æ€ç»´æ–¹å¼</li></ul><h2 id="æ€»ç»“">æ€»ç»“</h2><p>å›è°ƒåœ°ç‹±æ˜¯å¼‚æ­¥ç¼–ç¨‹ä¸­çš„å¸¸è§é—®é¢˜,é€šè¿‡åˆé€‚çš„è®¾è®¡æ¨¡å¼(å¦‚çŠ¶æ€æœº)æˆ–ç°ä»£è¯­è¨€ç‰¹æ€§(å¦‚åç¨‹)å¯ä»¥æœ‰æ•ˆé¿å…è¿™ä¸ªé—®é¢˜ã€‚é€‰æ‹©å“ªç§è§£å†³æ–¹æ¡ˆéœ€è¦æ ¹æ®å…·ä½“åœºæ™¯å’Œéœ€æ±‚æ¥å†³å®šã€‚</p>]]></content>
    
    
    <summary type="html">å›è°ƒåœ°ç‹±äº§ç”Ÿçš„åŸå› åŠå…¶è§£å†³æ–¹æ¡ˆ</summary>
    
    
    
    <category term="ç¼–ç¨‹æŠ€æœ¯" scheme="https://eatbreads.github.io/categories/%E7%BC%96%E7%A8%8B%E6%8A%80%E6%9C%AF/"/>
    
    
    <category term="å¼‚æ­¥ç¼–ç¨‹" scheme="https://eatbreads.github.io/tags/%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/"/>
    
    <category term="è®¾è®¡æ¨¡å¼" scheme="https://eatbreads.github.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>é«˜æ€§èƒ½æœåŠ¡å™¨å‹åŠ›æµ‹è¯•</title>
    <link href="https://eatbreads.github.io/posts/1c2eabf7.html"/>
    <id>https://eatbreads.github.io/posts/1c2eabf7.html</id>
    <published>2025-03-27T09:38:43.000Z</published>
    <updated>2025-03-27T09:44:48.280Z</updated>
    
    <content type="html"><![CDATA[<h1>æœåŠ¡å™¨æ€§èƒ½æµ‹è¯•</h1><h2 id="æµ‹è¯•ç±»å‹">æµ‹è¯•ç±»å‹</h2><p>æœåŠ¡å™¨æ€§èƒ½æµ‹è¯•ä¸»è¦åˆ†ä¸ºä¸¤ç±»:</p><ul><li>è¿æ¥ååæµ‹è¯•: æµ‹è¯•TCPçš„è¿æ¥å»ºç«‹å’Œæ–­å¼€æ€§èƒ½</li><li>æ•°æ®ååæµ‹è¯•: æµ‹è¯•æ•°æ®æ”¶å‘èƒ½åŠ›<br><img src="https://cdn-a.markji.com/files/67e41be2d5e9e782bf5d5c27_hd.png?e=1743059627923&amp;token=xX63b9jqTlDOcGmctt5K9254rV0LG8hS9BmDeFBy:gXwKTAIzYWZ958RV0rFgeQY-lkA=" alt="å›¾ç‰‡1"></li></ul><h2 id="æµ‹è¯•å·¥å…·å°è¯•">æµ‹è¯•å·¥å…·å°è¯•</h2><h3 id="1-hping3æµ‹è¯•">1. hping3æµ‹è¯•</h3><p>hping3ä¸»è¦ç”¨äºTCP/UDP/ICMPæµ‹è¯•,å¯ä»¥ç”¨äºç®€å•çš„TCPå¹¶å‘è¿æ¥æµ‹è¯•ã€‚</p><p>æµ‹è¯•å‘½ä»¤:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hping3 -S -p 8080 -c 200 --fast 127.0.0.1</span><br></pre></td></tr></table></figure><p>å‚æ•°è¯´æ˜:</p><ul><li>-Sï¼šå‘é€SYNåŒ…(å»ºç«‹TCPè¿æ¥)</li><li>-p 8080ï¼šç›®æ ‡ç«¯å£8080</li><li>-c 200ï¼šå‘é€200ä¸ªè¿æ¥</li><li>â€“fastï¼šå¿«é€Ÿå‘é€è¯·æ±‚</li></ul><h3 id="2-æµ‹è¯•é—®é¢˜">2. æµ‹è¯•é—®é¢˜</h3><p>hping3å­˜åœ¨é—®é¢˜:åªå‘é€SYNåŒ…è€Œä¸å®Œæˆå®Œæ•´çš„ä¸‰æ¬¡æ¡æ‰‹ã€‚</p><p>å°è¯•ä½¿ç”¨nping:</p><ul><li>å¯ä»¥åŒæ—¶å‘é€SYNå’ŒACK</li><li>ä½†æœåŠ¡å™¨ç›´æ¥è¿”å›RSTæ‹’ç»è¿æ¥</li><li>å¯èƒ½æ˜¯å› ä¸ºåŒæ—¶å‘é€å¯¼è‡´çš„é—®é¢˜</li></ul><h3 id="3-wrkæµ‹è¯•">3. wrkæµ‹è¯•</h3><p>æœ€åå°è¯•ä½¿ç”¨httpæµ‹è¯•å·¥å…·wrk:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wrk -t4 -c1000 -d10s http://127.0.0.1:8082/</span><br></pre></td></tr></table></figure><p>å‚æ•°è¯´æ˜:</p><ul><li>4ä¸ªçº¿ç¨‹</li><li>1000å¹¶å‘è¿æ¥</li><li>æŒç»­10ç§’</li></ul><p>æµ‹è¯•ç»“æœ:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Running 10s test @ http://127.0.0.1:8082/</span><br><span class="line">  4 threads and 1000 connections</span><br><span class="line">  Thread Stats   Avg      Stdev     Max   +/- Stdev</span><br><span class="line">    Latency     0.00us    0.00us   0.00us    -nan%</span><br><span class="line">    Req/Sec     0.00      0.00     0.00      -nan%</span><br><span class="line">  0 requests in 10.10s, 0.00B read</span><br><span class="line">  Socket errors: connect 0, read 221412, write 0, timeout 0</span><br><span class="line">Requests/sec:      0.00</span><br><span class="line">Transfer/sec:       0.00B</span><br></pre></td></tr></table></figure><p><img src="https://cdn-a.markji.com/files/67e4230481bdefd1be044f9c_hd.png?e=1743059627923&amp;token=xX63b9jqTlDOcGmctt5K9254rV0LG8hS9BmDeFBy:5xzRSXgWiCCrw0kE2d6C8Niiro4=" alt="å›¾ç‰‡1"><br><img src="https://cdn-a.markji.com/files/67e423d9d5e9e782bf5f4193_hd.png?e=1743059627923&amp;token=xX63b9jqTlDOcGmctt5K9254rV0LG8hS9BmDeFBy:KqAiU6anLcQmrkLlipX43k-OgLs=" alt="å›¾ç‰‡1"></p><h3 id="4-æœ€ç»ˆæ–¹æ¡ˆ">4. æœ€ç»ˆæ–¹æ¡ˆ</h3><p>è™½ç„¶wrkéœ€è¦è§£æHTTPåè®®ä¼šå¸¦æ¥é¢å¤–å¼€é”€,ä½†è€ƒè™‘åˆ°æµ‹è¯•çš„å®Œæ•´æ€§,æœ€ç»ˆè¿˜æ˜¯é€‰æ‹©äº†:</p><ul><li>ä½¿ç”¨ç®€å•çš„HTTPå“åº”</li><li>é€šè¿‡è‡ªå®šä¹‰client.cppè¿›è¡Œå‹åŠ›æµ‹è¯•</li></ul><p><img src="https://cdn-a.markji.com/files/67e4e82681bdefd1be142474_hd.png?e=1743059627923&amp;token=xX63b9jqTlDOcGmctt5K9254rV0LG8hS9BmDeFBy:MsZPuHpePJdsXpwEhq9FlnU0bak=" alt="å›¾ç‰‡1"><br><img src="https://cdn-a.markji.com/files/67e4e8f981bdefd1be1437e8_hd.png?e=1743059627923&amp;token=xX63b9jqTlDOcGmctt5K9254rV0LG8hS9BmDeFBy:Sgon3GxsCZKhCSOoiSfadNtK3qo=" alt="å›¾ç‰‡1"></p>]]></content>
    
    
    <summary type="html">è®°å½•æœåŠ¡å™¨æ€§èƒ½æµ‹è¯•çš„æ–¹æ³•å’Œç»éªŒ</summary>
    
    
    
    <category term="c++å¼€å‘" scheme="https://eatbreads.github.io/categories/c-%E5%BC%80%E5%8F%91/"/>
    
    
    <category term="æœåŠ¡å™¨" scheme="https://eatbreads.github.io/tags/%E6%9C%8D%E5%8A%A1%E5%99%A8/"/>
    
    <category term="æ€§èƒ½æµ‹è¯•" scheme="https://eatbreads.github.io/tags/%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95/"/>
    
    <category term="ç½‘ç»œç¼–ç¨‹" scheme="https://eatbreads.github.io/tags/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/"/>
    
  </entry>
  
  <entry>
    <title>C++20åç¨‹å­¦ä¹ ç¬”è®°</title>
    <link href="https://eatbreads.github.io/posts/c8e6cc4a.html"/>
    <id>https://eatbreads.github.io/posts/c8e6cc4a.html</id>
    <published>2025-03-27T09:36:43.000Z</published>
    <updated>2025-03-27T10:58:22.397Z</updated>
    
    <content type="html"><![CDATA[<h1>C++20åç¨‹å­¦ä¹ ç¬”è®°</h1><h2 id="åç¨‹åŸºæœ¬æ¦‚å¿µ">åç¨‹åŸºæœ¬æ¦‚å¿µ</h2><p>C++20å¼•å…¥äº†åç¨‹æ”¯æŒ,æä¾›äº†ä¸‰ä¸ªå…³é”®å­—:</p><h3 id="co-await">co_await</h3><p>ç”¨äºç­‰å¾…ä¸€ä¸ªå¼‚æ­¥æ“ä½œå®Œæˆã€‚å½“é‡åˆ°co_awaitæ—¶,åç¨‹ä¼šæš‚åœæ‰§è¡Œå¹¶è®©å‡ºæ§åˆ¶æƒ,ç›´åˆ°å¼‚æ­¥æ“ä½œå®Œæˆã€‚</p><h3 id="co-return">co_return</h3><p>åç¨‹çš„è¿”å›è¯­å¥,ç”¨äºè¿”å›ä¸€ä¸ªå€¼å¹¶ç»“æŸåç¨‹çš„æ‰§è¡Œã€‚ä¸æ™®é€šå‡½æ•°çš„returnä¸åŒ,co_returnä¼šè§¦å‘åç¨‹çš„æ¸…ç†æµç¨‹ã€‚</p><h3 id="co-yield">co_yield</h3><p>æš‚åœåç¨‹æ‰§è¡Œå¹¶è¿”å›ä¸€ä¸ªå€¼,ä½†ä¸ä¼šç»“æŸåç¨‹ã€‚å½“åç¨‹é‡æ–°æ¢å¤æ‰§è¡Œæ—¶,ä¼šä»co_yieldçš„ä¸‹ä¸€æ¡è¯­å¥ç»§ç»­æ‰§è¡Œã€‚</p><h2 id="å›¾ç‰‡å±•ç¤º">å›¾ç‰‡å±•ç¤º</h2><p><img src="https://cdn-a.markji.com/files/67e3b3bed5e9e782bf4c5f5e_hd.png?e=1743067034044&amp;token=xX63b9jqTlDOcGmctt5K9254rV0LG8hS9BmDeFBy:dm0hXEqtu0m3aIkrwD090-GKEM0=" alt="åç¨‹åŸç†å›¾1"></p><p><img src="https://cdn-a.markji.com/files/67e3b4c181bdefd1bef23aff_hd.png?e=1743067034044&amp;token=xX63b9jqTlDOcGmctt5K9254rV0LG8hS9BmDeFBy:tiu4RI3FO9Ow1wjPMSnHm-9EJMQ=" alt="åç¨‹ç¤ºä¾‹ä»£ç "></p><p><img src="https://cdn-a.markji.com/files/67e3e413d5e9e782bf530102_hd.png?e=1743067034044&amp;token=xX63b9jqTlDOcGmctt5K9254rV0LG8hS9BmDeFBy:WQQWDUaan3U5TF1Q0MN4TgzVg9E=" alt="åç¨‹æ‰§è¡Œæµç¨‹"></p><p><img src="https://cdn-a.markji.com/files/67e3e614d5e9e782bf533eae_hd.png?e=1743067034044&amp;token=xX63b9jqTlDOcGmctt5K9254rV0LG8hS9BmDeFBy:cBWMwkhuLg6n7m2K_L-bFA9lE3w=" alt="åç¨‹æ‰§è¡Œæµç¨‹"></p>]]></content>
    
    
    <summary type="html">C++20åç¨‹çš„åŸºæœ¬æ¦‚å¿µå’Œä½¿ç”¨æ–¹æ³•æ€»ç»“</summary>
    
    
    
    <category term="C++å¼€å‘" scheme="https://eatbreads.github.io/categories/C-%E5%BC%80%E5%8F%91/"/>
    
    
    <category term="C++" scheme="https://eatbreads.github.io/tags/C/"/>
    
    <category term="åç¨‹" scheme="https://eatbreads.github.io/tags/%E5%8D%8F%E7%A8%8B/"/>
    
    <category term="å¼‚æ­¥ç¼–ç¨‹" scheme="https://eatbreads.github.io/tags/%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/"/>
    
  </entry>
  
  <entry>
    <title>RTSPå®¢æˆ·ç«¯</title>
    <link href="https://eatbreads.github.io/posts/78dc036a.html"/>
    <id>https://eatbreads.github.io/posts/78dc036a.html</id>
    <published>2025-03-25T15:51:53.000Z</published>
    <updated>2025-03-27T09:39:25.147Z</updated>
    
    <content type="html"><![CDATA[<h1>RTSPå®¢æˆ·ç«¯å®ç°</h1><h2 id="å®¢æˆ·ç«¯ç±»å‹">å®¢æˆ·ç«¯ç±»å‹</h2><p>æœ‰ä¸¤ç§å®ç°æ–¹å¼:</p><ul><li>æ‹‰æµå®¢æˆ·ç«¯</li><li>æ¨æµå®¢æˆ·ç«¯</li></ul><p>ä¹‹å‰çš„å®ç°éƒ½æ˜¯ç›´æ¥ä½¿ç”¨ffmpegæ¥æ¨æµåˆ°æœåŠ¡å™¨ã€‚</p><h2 id="æ‹‰æµå‘½ä»¤">æ‹‰æµå‘½ä»¤</h2><h3 id="ä»RTSPæ‹‰æµ">ä»RTSPæ‹‰æµ</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg -rtsp_transport tcp -i rtsp://your_rtsp_url -c copy output.mp4</span><br></pre></td></tr></table></figure><h3 id="ä»RTMPæ‹‰æµ">ä»RTMPæ‹‰æµ</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg -i rtmp://your_rtmp_url -c copy output.mp4</span><br></pre></td></tr></table></figure><h2 id="æ¨æµå‘½ä»¤">æ¨æµå‘½ä»¤</h2><h3 id="RTMPæ¨æµ">RTMPæ¨æµ</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg -re -i input.mp4 -c:v libx264 -b:v 1M -c:a aac -b:a 128k -f flv rtmp://your_rtmp_server/live/stream</span><br></pre></td></tr></table></figure><h3 id="RTSPæ¨æµ">RTSPæ¨æµ</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg -re -i input.mp4 -c:v libx264 -preset ultrafast -tune zerolatency -c:a aac -f rtsp rtsp://your_rtsp_server/live</span><br></pre></td></tr></table></figure><p><img src="https://cdn-a.markji.com/files/67e260cb05df26320832127d_hd.png?e=1742892963667&amp;token=xX63b9jqTlDOcGmctt5K9254rV0LG8hS9BmDeFBy:fHVoxBdXPEl4Ehy3Ogstwn8RE4g=" alt="å›¾ç‰‡1"><br><img src="https://cdn-a.markji.com/files/67e261a805df263208322f45_hd.png?e=1742892963667&amp;token=xX63b9jqTlDOcGmctt5K9254rV0LG8hS9BmDeFBy:TWRdSVs2UbebpQEXk77sb2q_Dz4=" alt="å›¾ç‰‡1"><br><img src="https://cdn-a.markji.com/files/67e2653e81bdefd1bec96919_hd.png?e=1742892963667&amp;token=xX63b9jqTlDOcGmctt5K9254rV0LG8hS9BmDeFBy:TsjvUR8TDJ9YzdWxpiwBxCBZMEQ=" alt="å›¾ç‰‡1"></p>]]></content>
    
    
    <summary type="html">RTSPå®¢æˆ·ç«¯çš„æ¨æµå’Œæ‹‰æµå®ç°</summary>
    
    
    
    <category term="éŸ³è§†é¢‘å¼€å‘" scheme="https://eatbreads.github.io/categories/%E9%9F%B3%E8%A7%86%E9%A2%91%E5%BC%80%E5%8F%91/"/>
    
    
    <category term="æµåª’ä½“" scheme="https://eatbreads.github.io/tags/%E6%B5%81%E5%AA%92%E4%BD%93/"/>
    
    <category term="éŸ³è§†é¢‘" scheme="https://eatbreads.github.io/tags/%E9%9F%B3%E8%A7%86%E9%A2%91/"/>
    
  </entry>
  
  <entry>
    <title>åœ¨Qtä¸­è°ƒç”¨æ‘„åƒå¤´</title>
    <link href="https://eatbreads.github.io/posts/41c91819.html"/>
    <id>https://eatbreads.github.io/posts/41c91819.html</id>
    <published>2025-03-25T14:02:46.000Z</published>
    <updated>2025-03-25T14:36:13.321Z</updated>
    
    <content type="html"><![CDATA[<h1>Qtæ‘„åƒå¤´è°ƒç”¨</h1><p><img src="https://cdn-a.markji.com/files/67e26e0f81bdefd1becac53f_hd.png?e=1742896807580&amp;token=xX63b9jqTlDOcGmctt5K9254rV0LG8hS9BmDeFBy:KKLRNxPYIsoAeyZ33CtujgoMhWE=" alt="å›¾ç‰‡1"></p><h2 id="è§†é¢‘å¸§å¤„ç†">è§†é¢‘å¸§å¤„ç†</h2><p>Qt 6 é‡‡é›†çš„è§†é¢‘å¸§æ˜¯ QVideoFrame æ ¼å¼,éœ€è¦è½¬æ¢ä¸º QImage æ‰èƒ½è¿›è¡Œè¿›ä¸€æ­¥å¤„ç†,æ¯”å¦‚ç¼–ç æˆ H.264 å¹¶ä¿å­˜ä¸º MP4 æ–‡ä»¶ã€‚</p><h2 id="ç¼–ç æ”¯æŒ">ç¼–ç æ”¯æŒ</h2><p>Qt æœ¬èº«ä¸åŒ…å« H.264 æˆ– AAC ç¼–ç åŠŸèƒ½ï¼Œå› æ­¤éœ€è¦ä½¿ç”¨ FFmpeg æ¥è¿›è¡Œç¼–ç å’Œå­˜å‚¨ã€‚<br><img src="https://cdn-a.markji.com/files/67e2727d81bdefd1becb7101_hd.png?e=1742896807580&amp;token=xX63b9jqTlDOcGmctt5K9254rV0LG8hS9BmDeFBy:2o3jMUjyoQgaZdwiXwvZkYSel-o=" alt="å›¾ç‰‡1"><br><img src="https://cdn-a.markji.com/files/67e273c005df263208355b7b_hd.png?e=1742896807580&amp;token=xX63b9jqTlDOcGmctt5K9254rV0LG8hS9BmDeFBy:XGfhJX89CRDkfaNyUkLwZ8uoVjM=" alt="å›¾ç‰‡1"></p><h2 id="externå…³é”®å­—è¯´æ˜">externå…³é”®å­—è¯´æ˜</h2><ul><li>externä¸»è¦ç”¨æ¥å‘ŠçŸ¥ç¼–è¯‘å™¨å»å¤–éƒ¨æŸ¥æ‰¾å®šä¹‰,è¡¨ç¤ºè¿™é‡Œåªæ˜¯å£°æ˜è€Œæ²¡æœ‰å®šä¹‰,å¸¸ç”¨äºå¤´æ–‡ä»¶ä¸­å£°æ˜å…¨å±€å˜é‡</li><li>extern &quot;C&quot;ç”¨äºå‘Šè¯‰ç¼–è¯‘å™¨è¿™äº›å¼•å…¥çš„å†…å®¹æ˜¯Cè¯­è¨€ä»£ç ,ä¸éœ€è¦æŒ‰ç…§C++çš„å‘½åè§„åˆ™æ¥è§£æç¬¦å·,é¿å…è§£æé”™è¯¯</li></ul>]]></content>
    
    
    <summary type="html">Qtæ‘„åƒå¤´è°ƒç”¨åŠè§†é¢‘å¤„ç†ç›¸å…³çŸ¥è¯†</summary>
    
    
    
    <category term="Qtå¼€å‘" scheme="https://eatbreads.github.io/categories/Qt%E5%BC%80%E5%8F%91/"/>
    
    
    <category term="éŸ³è§†é¢‘" scheme="https://eatbreads.github.io/tags/%E9%9F%B3%E8%A7%86%E9%A2%91/"/>
    
    <category term="Qt" scheme="https://eatbreads.github.io/tags/Qt/"/>
    
    <category term="C++" scheme="https://eatbreads.github.io/tags/C/"/>
    
  </entry>
  
  <entry>
    <title>AACéŸ³é¢‘è§£ç </title>
    <link href="https://eatbreads.github.io/posts/4aa94b70.html"/>
    <id>https://eatbreads.github.io/posts/4aa94b70.html</id>
    <published>2025-03-24T15:51:53.000Z</published>
    <updated>2025-03-25T14:11:43.168Z</updated>
    
    <content type="html"><![CDATA[<h1>AACéŸ³é¢‘è§£ç </h1><p><img src="https://cdn-a.markji.com/files/67e113fc4e1cf4bdf4de9b84_hd.png?e=1742833810864&amp;token=xX63b9jqTlDOcGmctt5K9254rV0LG8hS9BmDeFBy:jrtlGiHKozQdoQswVZm1Z4IsCJ0=" alt="å›¾ç‰‡1"><br><img src="https://cdn-a.markji.com/files/67e115d84e1cf4bdf4dedd66_hd.png?e=1742833810864&amp;token=xX63b9jqTlDOcGmctt5K9254rV0LG8hS9BmDeFBy:XozHbjRj5GhfN44zC1HRMKtnk74=" alt="å›¾ç‰‡1"><br><img src="https://cdn-a.markji.com/files/67e118ab8d016adbb48d03ce_hd.png?e=1742833810864&amp;token=xX63b9jqTlDOcGmctt5K9254rV0LG8hS9BmDeFBy:xHd469LPFP1CY2K6iv9cMipU45k=" alt="å›¾ç‰‡1"><br>æœ¬è´¨å’Œh264å°è£…è¿›RTPæ•°æ®åŒ…å·®ä¸å¤š,è¿™é‡Œæ˜¯æŠŠAACå°è£…è¿›RTPæ•°æ®åŒ…ä¸­è¿›è¡Œä¼ è¾“ã€‚</p><h2 id="åº”ç”¨åœºæ™¯">åº”ç”¨åœºæ™¯</h2><p>æ­¤æ—¶å°±å¯ä»¥å®ç°ä»å®¢æˆ·ç«¯ä¸Šä¼ åˆ°æœåŠ¡å™¨,ç„¶åæœåŠ¡å™¨æ‰§è¡Œæ’­æ”¾åŠŸèƒ½ã€‚<br><img src="https://cdn-a.markji.com/files/67e11ab44e1cf4bdf4dfbcf0_hd.png?e=1742833810864&amp;token=xX63b9jqTlDOcGmctt5K9254rV0LG8hS9BmDeFBy:bfm5HqgqC3YcfPDerCySHvwLGow=" alt="å›¾ç‰‡1"></p><h2 id="æ’­æ”¾å‘½ä»¤">æ’­æ”¾å‘½ä»¤</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ffplay -i rtsp://127.0.0.1:8554</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">AACéŸ³é¢‘ç¼–ç åŠå…¶RTPå°è£…ä¼ è¾“</summary>
    
    
    
    <category term="éŸ³è§†é¢‘å¼€å‘" scheme="https://eatbreads.github.io/categories/%E9%9F%B3%E8%A7%86%E9%A2%91%E5%BC%80%E5%8F%91/"/>
    
    
    <category term="ç½‘ç»œåè®®" scheme="https://eatbreads.github.io/tags/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE/"/>
    
    <category term="éŸ³è§†é¢‘" scheme="https://eatbreads.github.io/tags/%E9%9F%B3%E8%A7%86%E9%A2%91/"/>
    
  </entry>
  
  <entry>
    <title>éŸ³è§†é¢‘ä¸­åŒæ—¶ä¼ è¾“h264å’Œaac</title>
    <link href="https://eatbreads.github.io/posts/f5f059ad.html"/>
    <id>https://eatbreads.github.io/posts/f5f059ad.html</id>
    <published>2025-03-24T15:51:53.000Z</published>
    <updated>2025-03-25T14:11:43.168Z</updated>
    
    <content type="html"><![CDATA[<h1>éŸ³è§†é¢‘åŒæ­¥ä¼ è¾“</h1><h2 id="å®ç°åŸç†">å®ç°åŸç†</h2><p><img src="https://cdn-a.markji.com/files/67e123a54e1cf4bdf4e16b2c_hd.png?e=1742833810864&amp;token=xX63b9jqTlDOcGmctt5K9254rV0LG8hS9BmDeFBy:hljxLZt4MgMKbfZllhhTpnKHXX4=" alt="å›¾ç‰‡1"><br><img src="https://cdn-a.markji.com/files/67e1255a8d016adbb48f30ae_hd.png?e=1742833810864&amp;token=xX63b9jqTlDOcGmctt5K9254rV0LG8hS9BmDeFBy:cflNaN-tUpP_17v5oxghxc8X8Wk=" alt="å›¾ç‰‡1"><br>æœ¬è´¨ä¸Šæ˜¯åˆ›å»ºäº†ä¸¤ä¸ªçº¿ç¨‹,ç„¶ååˆ†åˆ«å¤„ç†è§†é¢‘å’ŒéŸ³é¢‘çš„ä¼ è¾“:</p><ul><li>ä¸€ä¸ªçº¿ç¨‹è´Ÿè´£h264è§†é¢‘æ•°æ®çš„ä¼ è¾“</li><li>å¦ä¸€ä¸ªçº¿ç¨‹è´Ÿè´£aacéŸ³é¢‘æ•°æ®çš„ä¼ è¾“</li></ul><p>é€šè¿‡å¤šçº¿ç¨‹å®ç°éŸ³è§†é¢‘çš„å¹¶è¡Œä¼ è¾“ã€‚</p>]]></content>
    
    
    <summary type="html">å®ç°éŸ³è§†é¢‘çš„åŒæ­¥ä¼ è¾“</summary>
    
    
    
    <category term="éŸ³è§†é¢‘å¼€å‘" scheme="https://eatbreads.github.io/categories/%E9%9F%B3%E8%A7%86%E9%A2%91%E5%BC%80%E5%8F%91/"/>
    
    
    <category term="éŸ³è§†é¢‘" scheme="https://eatbreads.github.io/tags/%E9%9F%B3%E8%A7%86%E9%A2%91/"/>
    
    <category term="å¤šçº¿ç¨‹" scheme="https://eatbreads.github.io/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B/"/>
    
  </entry>
  
  <entry>
    <title>h264å°è£…åˆ°RTPæ•°æ®åŒ…è¿›è¡Œä¼ è¾“</title>
    <link href="https://eatbreads.github.io/posts/5b7142ef.html"/>
    <id>https://eatbreads.github.io/posts/5b7142ef.html</id>
    <published>2025-03-23T15:54:39.000Z</published>
    <updated>2025-03-28T07:23:22.178Z</updated>
    
    <content type="html"><![CDATA[<h1>h264å°è£…åˆ°RTPæ•°æ®åŒ…è¿›è¡Œä¼ è¾“</h1><h2 id="RTPæ•°æ®åŒ…ç»“æ„">RTPæ•°æ®åŒ…ç»“æ„</h2><p>æŠ¥æ–‡ä¸‹é¢çš„æ•°æ®ç§°ä¸ºæœ‰æ•ˆè½½è·(payload)</p><h2 id="h264ç¼–ç åŸç†">h264ç¼–ç åŸç†</h2><p>h264æ˜¯ä¸€ç§è§†é¢‘å‹ç¼©æŠ€æœ¯,ä¸»è¦åŒ…å«ä¸‰ç§å¸§:</p><ul><li>iå¸§(å…³é”®å¸§): ä¸å€ŸåŠ©å…¶ä»–å¸§çš„ç‹¬ç«‹å®Œæ•´å¸§</li><li>på¸§: éœ€è¦å‚è€ƒå‰é¢å¸§çš„é¢„æµ‹å¸§</li><li>bå¸§: éœ€è¦å‚è€ƒå‰åå¸§çš„åŒå‘é¢„æµ‹å¸§</li></ul><p>ä½¿ç”¨GOP(Group Of Pictures)ç»„æ¥é˜²æ­¢ä¸¢åŒ…ã€‚å› ä¸ºpå¸§è¿™ç§å…¨éƒ¨å‚è€ƒå‰é¢å¸§çš„,ä¸€æ—¦ä¸¢åŒ…åé¢å°±éƒ½ä¼šä¹±æ‰ã€‚</p><h2 id="h264ç»“æ„">h264ç»“æ„</h2><p>h264åˆ†ä¸ºä¸¤å±‚:</p><ul><li>ç½‘ç»œæå–å±‚(NAL)</li><li>è§†è®¯ç¼–ç å±‚(VCL)</li></ul><p>ç¼–ç åçš„æ•°æ®æµåœ¨ç½‘ç»œæå–å±‚ä¸­ä¼ è¾“ã€‚ä¾‹å¦‚ä¸€ä¸ªç”±100å¼ å›¾ç‰‡ç»„æˆçš„è§†é¢‘,æ¯å¼ å›¾ç‰‡å‹ç¼©åéƒ½ä¼šå¾—åˆ°ä¸€ä¸ªç‹¬ç«‹çš„NALå•å…ƒ(æ€»å…±100ä¸ªNAL)ã€‚</p><p>NALçš„ç¬¬ä¸€ä¸ªå­—èŠ‚ç”¨äºæ ‡è¯†å½“å‰å¸§ç±»å‹(i/p/bå¸§)ã€‚</p><h2 id="IDRå¸§">IDRå¸§</h2><p>IDRå¸§æ˜¯ä¸€ç§ç‰¹æ®Šçš„Iå¸§:</p><ul><li>Iå¸§æ˜¯å…³é”®å¸§,å¯ä»¥ç‹¬ç«‹è§£ç </li><li>å½“IDRå¸§å‡ºç°æ—¶ä¼šæ¸…ç©ºä¹‹å‰çš„å‚è€ƒå¸§(å³æ—¶åˆ·æ–°Refresh)</li></ul><h2 id="MP4ä¸h264">MP4ä¸h264</h2><p>ä½¿ç”¨ffmpegå¯ä»¥å°†MP4è§£ææˆh264æ–‡ä»¶:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg -i test.mp4 -codec copy -bsf:h264 mp4toannexb -f h264 test.h264</span><br></pre></td></tr></table></figure><p>PS: MP4æœ¬è´¨ä¸Šæ˜¯åœ¨h264åŸºç¡€ä¸Šæ·»åŠ äº†å¤´å°¾ä¿¡æ¯çš„å°è£…æ ¼å¼,æ‰€ä»¥è§£å°è£…è¿‡ç¨‹ä¸»è¦æ˜¯æ•°æ®æ‹·è´ã€‚</p>]]></content>
    
    
    <summary type="html">ä»‹ç»h264è§†é¢‘ç¼–ç åŠå…¶RTPå°è£…ä¼ è¾“ç›¸å…³çŸ¥è¯†</summary>
    
    
    
    <category term="éŸ³è§†é¢‘å¼€å‘" scheme="https://eatbreads.github.io/categories/%E9%9F%B3%E8%A7%86%E9%A2%91%E5%BC%80%E5%8F%91/"/>
    
    
    <category term="ç½‘ç»œåè®®" scheme="https://eatbreads.github.io/tags/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE/"/>
    
    <category term="éŸ³è§†é¢‘" scheme="https://eatbreads.github.io/tags/%E9%9F%B3%E8%A7%86%E9%A2%91/"/>
    
  </entry>
  
  <entry>
    <title>RTSPåè®®</title>
    <link href="https://eatbreads.github.io/posts/9577f504.html"/>
    <id>https://eatbreads.github.io/posts/9577f504.html</id>
    <published>2025-03-23T15:48:20.000Z</published>
    <updated>2025-03-23T15:56:41.078Z</updated>
    
    <content type="html"><![CDATA[<h1>RTSPåè®®</h1><h2 id="åè®®ç»„æˆ">åè®®ç»„æˆ</h2><p>åŒ…æ‹¬RTSPã€RTPã€RTCPä¸‰ä¸ªåè®®ï¼š</p><ul><li>RTSP: è´Ÿè´£å»ºç«‹è¿æ¥é€šé“</li><li>RTP(Real Time Transport Protocol å®æ—¶ä¼ è¾“åè®®): è´Ÿè´£ä¼ è¾“æ•°æ®</li><li>RTCP: è´Ÿè´£ä¼ è¾“è´¨é‡æ§åˆ¶</li></ul><h2 id="ä¼ è¾“åè®®è¦æ±‚">ä¼ è¾“åè®®è¦æ±‚</h2><ul><li>RTSPéœ€è¦ä½¿ç”¨TCPåè®®</li><li>RTPå’ŒRTCPæ—¢å¯ä»¥ä½¿ç”¨TCPä¹Ÿå¯ä»¥ä½¿ç”¨UDP<br><img src="https://cdn-a.markji.com/files/67dfde4b63fe6caddd0ed86a_hd.png?e=1742731753507&amp;token=xX63b9jqTlDOcGmctt5K9254rV0LG8hS9BmDeFBy:nANoNala-Z_7NOgpyiexGRAhdq8=" alt="å›¾ç‰‡1"></li></ul><h2 id="SDPæè¿°">SDPæè¿°</h2><p>SDPåŒ…å«ä¸¤ä¸ªå±‚æ¬¡çš„æè¿°:</p><ul><li>ä¼šè¯çº§æè¿°</li><li>åª’ä½“çº§æè¿°(æ¯”å¦‚åŒæ—¶å­˜åœ¨è§†é¢‘å’ŒéŸ³é¢‘å°±ä¼šæœ‰ä¸¤ä¸ªåª’ä½“çº§åˆ«)<br><img src="https://cdn-a.markji.com/files/67dfe27f5e2541566caed143_hd.png?e=1742731753507&amp;token=xX63b9jqTlDOcGmctt5K9254rV0LG8hS9BmDeFBy:wwCw9QuKdbiHiMfo2S64WUdijew=" alt="å›¾ç‰‡1"><br><img src="https://cdn-a.markji.com/files/67dfe43263fe6caddd0f8543_hd.png?e=1742731753507&amp;token=xX63b9jqTlDOcGmctt5K9254rV0LG8hS9BmDeFBy:8nsOtckGYkk8m6-wYgBJTcupiLU=" alt="å›¾ç‰‡1"></li></ul><h2 id="ç«¯å£åˆ†é…">ç«¯å£åˆ†é…</h2><ul><li>RTPä½¿ç”¨ä½ç«¯å£å·</li><li>RTCPä½¿ç”¨é«˜ç«¯å£å·</li></ul><h2 id="å®ç°è¯´æ˜">å®ç°è¯´æ˜</h2><p>åœ¨å®é™…ä»£ç å®ç°ä¸­å¹¶æ²¡æœ‰çœŸæ­£å»ºç«‹ä¸¤ä¸ªé€šé“,å› ä¸ºä½¿ç”¨TCPæ—¶å¯ä»¥ç›´æ¥åˆå¹¶RTPå’ŒRTCPã€‚<br><img src="https://cdn-a.markji.com/files/67dfe5715e2541566caf4522_hd.png?e=1742731753507&amp;token=xX63b9jqTlDOcGmctt5K9254rV0LG8hS9BmDeFBy:q9x1WpsovlA-kT3z1bqaXDniV_g=" alt="å›¾ç‰‡1"></p>]]></content>
    
    
    <summary type="html">RTSPåè®®åŠç›¸å…³åè®®ä»‹ç»</summary>
    
    
    
    <category term="ç½‘ç»œç¼–ç¨‹" scheme="https://eatbreads.github.io/categories/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/"/>
    
    
    <category term="ç½‘ç»œåè®®" scheme="https://eatbreads.github.io/tags/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE/"/>
    
    <category term="æµåª’ä½“" scheme="https://eatbreads.github.io/tags/%E6%B5%81%E5%AA%92%E4%BD%93/"/>
    
  </entry>
  
  <entry>
    <title>åç¨‹å…«è‚¡</title>
    <link href="https://eatbreads.github.io/posts/706f5e8.html"/>
    <id>https://eatbreads.github.io/posts/706f5e8.html</id>
    <published>2025-03-19T16:00:00.000Z</published>
    <updated>2025-03-21T16:02:18.722Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å®ç°">å®ç°</h2><p>è¿™æ˜¯ä¸€ä¸ªåŸºäº <code>ucontext</code> çš„è½»é‡çº§åç¨‹åº“ï¼Œå®ç°äº† <strong>ç”¨æˆ·æ€ä¸Šä¸‹æ–‡åˆ‡æ¢</strong>ï¼Œæ”¯æŒ <strong>éæŠ¢å å¼åç¨‹è°ƒåº¦</strong>ã€‚æ ¸å¿ƒåŒ…æ‹¬ <strong>åç¨‹ç®¡ç†ï¼ˆRoutineï¼‰</strong> å’Œ <strong>è°ƒåº¦å™¨ï¼ˆScheduleï¼‰</strong>ï¼Œé‡‡ç”¨ <strong>FIFO è°ƒåº¦ç­–ç•¥</strong>ï¼Œåç¨‹é€šè¿‡ <code>resume()</code> åˆ‡æ¢åˆ°è¿è¡Œæ€ï¼Œ<code>yield()</code> æŒ‚èµ·å¹¶äº¤å›è°ƒåº¦å™¨ã€‚</p><ul><li>åˆ©ç”¨ <code>swapcontext()</code> è¿›è¡Œ <strong>å¯„å­˜å™¨å’Œæ ˆçš„ä¸Šä¸‹æ–‡åˆ‡æ¢</strong>ï¼Œé¿å…çº¿ç¨‹åˆ‡æ¢çš„å†…æ ¸æ€å¼€é”€ã€‚</li><li>æ”¯æŒ <strong>åŠ¨æ€æ ˆç®¡ç†</strong>ï¼Œé€šè¿‡ <strong>æ ˆå¿«ç…§ï¼ˆ<code>memcpy</code> ä¿å­˜æ ˆæ•°æ®ï¼‰</strong> å®ç°æŒ‚èµ·ä¸æ¢å¤ã€‚</li><li>é€‚ç”¨äº <strong>é«˜å¹¶å‘ IO åœºæ™¯</strong>ï¼Œå¯æ‰©å±•ä¸º <strong><code>epoll</code> äº‹ä»¶é©±åŠ¨</strong> ç»“åˆ <strong>å¼‚æ­¥ IO</strong>ã€‚</li></ul><h3 id="åç»­ä¼˜åŒ–æ–¹å‘ï¼š">åç»­ä¼˜åŒ–æ–¹å‘ï¼š</h3><ul><li><strong>å¤šçº¿ç¨‹æ”¯æŒï¼ˆwork-stealingï¼‰</strong></li><li><strong>ä½¿ç”¨ <code>boost::context </code> æå‡å¯ç§»æ¤æ€§</strong></li><li><strong>ä¼˜åŒ–è°ƒåº¦ç®—æ³•</strong></li></ul><hr><h2 id="äº®ç‚¹">äº®ç‚¹</h2><ul><li><strong>çº¯ç”¨æˆ·æ€è°ƒåº¦ï¼Œä½å¼€é”€ï¼Œé«˜æ•ˆæ‰§è¡Œ</strong><ul><li><code>swapcontext()</code> ä»…æ¶‰åŠ <strong>å¯„å­˜å™¨å’Œæ ˆåˆ‡æ¢</strong>ï¼Œæ¯” <code>std::thread</code> çš„è°ƒåº¦æ›´è½»é‡ã€‚</li></ul></li><li><strong>ä½¿ç”¨éæŠ¢å å¼è°ƒåº¦ï¼Œç¡®ä¿ä»»åŠ¡å¯æ§</strong></li><li><strong>é‡‡ç”¨æ ˆå¿«ç…§ï¼ˆ<code>memcpy</code> å¤‡ä»½æ•°æ®ï¼‰</strong><ul><li>åœ¨ <code>yield()</code> æ—¶å­˜å‚¨å½“å‰æ‰§è¡ŒçŠ¶æ€ï¼Œ<code>resume()</code> æ—¶æ¢å¤ã€‚</li><li>é¿å… <code>setjmp/longjmp</code> ä¼ ç»Ÿæ–¹æ³•çš„å±€é™æ€§ï¼Œæé«˜çµæ´»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</li></ul></li><li><strong>æ¯”çº¿ç¨‹æ± æ›´è½»é‡</strong><ul><li>é¿å…å¤§é‡çº¿ç¨‹å¸¦æ¥çš„ä¸Šä¸‹æ–‡åˆ‡æ¢å’ŒåŒæ­¥å¼€é”€ã€‚</li></ul></li></ul><hr><h2 id="éš¾ç‚¹ä¸è§£å†³æ–¹æ¡ˆ">éš¾ç‚¹ä¸è§£å†³æ–¹æ¡ˆ</h2><h3 id="1-yield-éœ€è¦ä¿å­˜åç¨‹çš„æ‰§è¡ŒçŠ¶æ€ï¼Œå¦åˆ™æ¢å¤æ—¶ä¼šä¸¢å¤±ç°åœº">1. <code>yield()</code> éœ€è¦ä¿å­˜åç¨‹çš„æ‰§è¡ŒçŠ¶æ€ï¼Œå¦åˆ™æ¢å¤æ—¶ä¼šä¸¢å¤±ç°åœº</h3><blockquote><p><strong>æŒ‘æˆ˜</strong>ï¼šæ ˆæ˜¯åŠ¨æ€å¢é•¿çš„ï¼Œå¦‚ä½•æ­£ç¡®åœ°ä¿å­˜ &amp; æ¢å¤æ‰§è¡Œç¯å¢ƒï¼Ÿ</p></blockquote><p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p><ul><li><strong>ä½¿ç”¨ <code>memcpy</code> å¤‡ä»½åç¨‹æ ˆ</strong><ul><li>åœ¨ <code>yield()</code> æ—¶ï¼Œè®¡ç®—æ ˆä½¿ç”¨ç©ºé—´ï¼Œå¹¶å°†æ•°æ®æ‹·è´åˆ°å †ä¸­ï¼Œé˜²æ­¢è¢«è¦†ç›–ã€‚</li></ul></li><li><strong>åŠ¨æ€åˆ†é…å­˜å‚¨ç©ºé—´</strong><ul><li>å¦‚æœ <code>yield()</code> æ—¶çš„æ ˆå¤§å°å˜å¤§ï¼Œé‡æ–°åˆ†é…å­˜å‚¨ï¼Œç¡®ä¿æ•°æ®å®Œæ•´æ€§ã€‚</li></ul></li><li><strong>åœ¨ <code>resume()</code> æ—¶æ¢å¤æ ˆæ•°æ®</strong><ul><li>ç„¶åè°ƒç”¨ <code>swapcontext()</code> åˆ‡å›åç¨‹ã€‚</li></ul></li></ul><h3 id="2-ucontext-API-å…¼å®¹æ€§é—®é¢˜">2. <code>ucontext</code> API å…¼å®¹æ€§é—®é¢˜</h3><blockquote><p><strong>é—®é¢˜</strong>ï¼šæœªæ¥çš„ Linux å¯èƒ½ç§»é™¤ <code>ucontext</code>ï¼Œå¦‚ä½•ä¿æŒä»£ç çš„å¯ç§»æ¤æ€§ï¼Ÿ</p></blockquote><p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p><ul><li><strong>åˆ‡æ¢åˆ° <code>Boost.Context</code></strong></li><li><strong>ä½¿ç”¨ Linux <code>swapcontext()</code> æ›¿ä»£æ–¹æ¡ˆ</strong>ï¼Œå¦‚ <code>fibers</code> æˆ– <code>libco</code>ã€‚</li></ul><h3 id="3-åç¨‹è°ƒåº¦ä¼˜åŒ–">3. åç¨‹è°ƒåº¦ä¼˜åŒ–</h3><blockquote><p><strong>é—®é¢˜</strong>ï¼šç›®å‰æ˜¯å•çº¿ç¨‹ FIFO è°ƒåº¦ï¼Œå¦‚æœåç¨‹æ•°é‡è¿‡å¤šï¼Œå¯èƒ½å‡ºç°æŸäº›åç¨‹é•¿æœŸå¾—ä¸åˆ°æ‰§è¡Œçš„é—®é¢˜ã€‚</p></blockquote><p><strong>ä¼˜åŒ–æ–¹æ¡ˆï¼š</strong></p><ul><li><strong>ä½¿ç”¨æ—¶é—´ç‰‡è°ƒåº¦</strong><ul><li>è®© <code>yield()</code> ä¹Ÿèƒ½ç”±è°ƒåº¦å™¨ä¸»åŠ¨è°ƒç”¨ï¼Œé˜²æ­¢æŸäº›ä»»åŠ¡é•¿æœŸå ç”¨ CPUã€‚</li></ul></li><li><strong>åŸºäºä¼˜å…ˆçº§çš„è°ƒåº¦</strong><ul><li>ä¾‹å¦‚é«˜ä¼˜å…ˆçº§çš„åç¨‹å¯ä»¥ä¼˜å…ˆæ‰§è¡Œï¼ˆå¯ç»“åˆä»»åŠ¡æƒé‡æœºåˆ¶ï¼‰ã€‚</li></ul></li><li><strong>å¤šçº¿ç¨‹ Work-Stealing</strong><ul><li>ä¸åŒçº¿ç¨‹ç®¡ç†è‡ªå·±çš„åç¨‹æ± ï¼Œå½“æŸä¸ªçº¿ç¨‹ç©ºé—²æ—¶ï¼Œå¯ä»¥ä»åˆ«çš„çº¿ç¨‹çªƒå–ä»»åŠ¡ï¼Œæå‡ CPU èµ„æºåˆ©ç”¨ç‡ã€‚</li></ul></li></ul><h3 id="4-å¦‚ä½•è®©å¤šä¸ªçº¿ç¨‹å®‰å…¨åœ°è°ƒåº¦åç¨‹ï¼Ÿ">4. å¦‚ä½•è®©å¤šä¸ªçº¿ç¨‹å®‰å…¨åœ°è°ƒåº¦åç¨‹ï¼Ÿ</h3><blockquote><p><strong>é—®é¢˜</strong>ï¼šç›®å‰æ˜¯å•çº¿ç¨‹ï¼Œä½†å¾ˆå¤šé«˜å¹¶å‘åœºæ™¯éœ€è¦å¤šä¸ªçº¿ç¨‹å¹¶è¡Œæ‰§è¡Œåç¨‹ã€‚</p></blockquote><p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p><ul><li><strong>å¤šçº¿ç¨‹è°ƒåº¦å™¨ï¼ˆWork-Stealingï¼‰</strong><ul><li>æ¯ä¸ªçº¿ç¨‹æœ‰è‡ªå·±çš„ <code>Schedule</code>ï¼Œä½†å¯ä»¥ä»åˆ«çš„çº¿ç¨‹å·å–ä»»åŠ¡ã€‚</li></ul></li><li><strong>ä½¿ç”¨ <code>std::mutex</code> + <code>std::queue</code> å…±äº«ä»»åŠ¡é˜Ÿåˆ—</strong><ul><li>å½“æŸä¸ªçº¿ç¨‹ç©ºé—²æ—¶ï¼Œå¯ä»¥ä»å…¬å…±é˜Ÿåˆ—å–ä»»åŠ¡ã€‚</li></ul></li><li><strong>æ— é”é˜Ÿåˆ—ä¼˜åŒ–ï¼ˆå¦‚ MPSC Queueï¼‰</strong><ul><li>å‡å°‘é”çš„å¼€é”€ï¼Œæé«˜å¹¶å‘åº¦ã€‚</li></ul></li></ul><hr><h2 id="æ€»ç»“">æ€»ç»“</h2><p>æœ¬åç¨‹åº“åŸºäº <code>ucontext</code>ï¼Œé‡‡ç”¨ <strong>éæŠ¢å å¼è°ƒåº¦</strong>ï¼Œæ”¯æŒ <strong>æ ˆå¿«ç…§</strong>ï¼Œé€‚ç”¨äºé«˜å¹¶å‘ IO åœºæ™¯ã€‚æœªæ¥å¯ä»¥æ‰©å±•å¤šçº¿ç¨‹ <code>work-stealing</code> ä»¥åŠæ›´ä¼˜çš„è°ƒåº¦ç­–ç•¥ï¼Œæé«˜æ•´ä½“æ€§èƒ½ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;å®ç°&quot;&gt;å®ç°&lt;/h2&gt;
&lt;p&gt;è¿™æ˜¯ä¸€ä¸ªåŸºäº &lt;code&gt;ucontext&lt;/code&gt; çš„è½»é‡çº§åç¨‹åº“ï¼Œå®ç°äº† &lt;strong&gt;ç”¨æˆ·æ€ä¸Šä¸‹æ–‡åˆ‡æ¢&lt;/strong&gt;ï¼Œæ”¯æŒ &lt;strong&gt;éæŠ¢å å¼åç¨‹è°ƒåº¦&lt;/strong&gt;ã€‚æ ¸å¿ƒåŒ…æ‹¬ &lt;strong&gt;åç¨‹ç®¡ç†ï¼ˆRou</summary>
      
    
    
    
    <category term="ç¼–ç¨‹" scheme="https://eatbreads.github.io/categories/%E7%BC%96%E7%A8%8B/"/>
    
    <category term="C++" scheme="https://eatbreads.github.io/categories/%E7%BC%96%E7%A8%8B/C/"/>
    
    
    <category term="åç¨‹" scheme="https://eatbreads.github.io/tags/%E5%8D%8F%E7%A8%8B/"/>
    
    <category term="ucontext" scheme="https://eatbreads.github.io/tags/ucontext/"/>
    
    <category term="å¼‚æ­¥IO" scheme="https://eatbreads.github.io/tags/%E5%BC%82%E6%AD%A5IO/"/>
    
  </entry>
  
  <entry>
    <title>ä½¿ç”¨ vcpkg è¿è¡Œ redis++ é‡åˆ°çš„é—®é¢˜</title>
    <link href="https://eatbreads.github.io/posts/be1ef227.html"/>
    <id>https://eatbreads.github.io/posts/be1ef227.html</id>
    <published>2025-03-18T16:00:00.000Z</published>
    <updated>2025-03-21T16:02:18.696Z</updated>
    
    <content type="html"><![CDATA[<h2 id="é—®é¢˜æè¿°">é—®é¢˜æè¿°</h2><p>ä½¿ç”¨ vcpkg å®‰è£… redis++ åº“åï¼Œå‘ç°è¯¥åº“å¹¶æ²¡æœ‰ <code>.cmake</code> æ–‡ä»¶ï¼Œå¯¼è‡´ <code>find_package</code> æ— æ³•æ‰¾åˆ°å®ƒã€‚</p><h2 id="ç°è±¡åˆ†æ">ç°è±¡åˆ†æ</h2><p>é€šè¿‡ <code>ls</code> å‘½ä»¤æŸ¥çœ‹ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ls</span> /root/vcpkg/installed/x64-linux/lib</span><br></pre></td></tr></table></figure><p>å¯ä»¥ç¡®è®¤ redis++ ç¡®å®å·²ç»å®‰è£…ï¼Œå¹¶ä¸”åœ¨ä»£ç ä¸­å¯ä»¥è·³è½¬åˆ°å¯¹åº”çš„å®šä¹‰æ–‡ä»¶ã€‚ä½†ç”±äºç¼ºå°‘ CMake é…ç½®æ–‡ä»¶ï¼Œåªèƒ½æ‰‹åŠ¨æŒ‡å®šè·¯å¾„è¿›è¡Œè¿æ¥ã€‚<br><img src="https://cdn-a.markji.com/files/67d9717eb49cc95a6c0f4ea3_hd.png?e=1742368508911&amp;token=xX63b9jqTlDOcGmctt5K9254rV0LG8hS9BmDeFBy:44busKLsAaG2t2U6WGRFo4uQL4s=" alt="å›¾ç‰‡1"></p><h2 id="è§£å†³å°è¯•">è§£å†³å°è¯•</h2><p>å°è¯•æ‰‹åŠ¨æŒ‡å®šåº“è·¯å¾„ï¼Œä½†åœ¨é“¾æ¥æ—¶é‡åˆ°é”™è¯¯ï¼Œæç¤ºæ‰¾ä¸åˆ°æŸäº›å‡½æ•°å®šä¹‰ï¼Œæ€€ç–‘æ˜¯åŠ¨æ€åº“å’Œé™æ€åº“æ··ç”¨çš„é—®é¢˜ã€‚ç„¶è€Œæœ€ç»ˆä»ç„¶æ²¡æœ‰æ‰¾åˆ°å…·ä½“åŸå› ã€‚</p><h2 id="ç»“æœæ€»ç»“">ç»“æœæ€»ç»“</h2><ol><li><strong>å¥½æ¶ˆæ¯</strong>ï¼šredis++ é€šè¿‡æ‰‹åŠ¨æŒ‡å®šè·¯å¾„æ‰¾åˆ°äº†ã€‚</li><li><strong>åæ¶ˆæ¯</strong>ï¼šä»ç„¶æ— æ³•æ­£ç¡®é“¾æ¥ï¼Œå¯èƒ½ä¸åº“çš„é™æ€/åŠ¨æ€æ–¹å¼æ··ç”¨æœ‰å…³ã€‚</li></ol><p>æœ€åè¿˜æ˜¯æ²¡èƒ½è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå…ˆæ‘†çƒ‚äº† ğŸ˜­ã€‚</p><hr>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;é—®é¢˜æè¿°&quot;&gt;é—®é¢˜æè¿°&lt;/h2&gt;
&lt;p&gt;ä½¿ç”¨ vcpkg å®‰è£… redis++ åº“åï¼Œå‘ç°è¯¥åº“å¹¶æ²¡æœ‰ &lt;code&gt;.cmake&lt;/code&gt; æ–‡ä»¶ï¼Œå¯¼è‡´ &lt;code&gt;find_package&lt;/code&gt; æ— æ³•æ‰¾åˆ°å®ƒã€‚&lt;/p&gt;
&lt;h2 id=&quot;ç°è±¡åˆ†æ&quot;&gt;ç°è±¡åˆ†æ&lt;</summary>
      
    
    
    
    <category term="C++" scheme="https://eatbreads.github.io/categories/C/"/>
    
    <category term="vcpkg" scheme="https://eatbreads.github.io/categories/C/vcpkg/"/>
    
    <category term="Redis" scheme="https://eatbreads.github.io/categories/C/vcpkg/Redis/"/>
    
    
    <category term="redis++" scheme="https://eatbreads.github.io/tags/redis/"/>
    
    <category term="vcpkg" scheme="https://eatbreads.github.io/tags/vcpkg/"/>
    
    <category term="CMake" scheme="https://eatbreads.github.io/tags/CMake/"/>
    
  </entry>
  
  <entry>
    <title>ä½¿ç”¨ C++ è¿è¡Œ Kafka å’Œ Elasticsearch</title>
    <link href="https://eatbreads.github.io/posts/b71a46cc.html"/>
    <id>https://eatbreads.github.io/posts/b71a46cc.html</id>
    <published>2025-03-18T16:00:00.000Z</published>
    <updated>2025-03-21T16:02:18.715Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Elasticsearch-å¤„ç†æ–¹å¼">Elasticsearch å¤„ç†æ–¹å¼</h2><p>Elasticsearch é€šå¸¸ç›´æ¥ä½¿ç”¨ HTTP æŠ¥æ–‡é€šä¿¡ï¼Œå› æ­¤ä¸éœ€è¦é¢å¤–ä¸‹è½½ C++ åº“ï¼Œç›´æ¥é€šè¿‡ HTTP è¯·æ±‚å³å¯è¿›è¡Œæ“ä½œã€‚</p><h2 id="Kafka-å¤„ç†æ–¹å¼">Kafka å¤„ç†æ–¹å¼</h2><p>Kafka æˆ‘ä½¿ç”¨çš„æ˜¯ vcpkg æä¾›çš„åŒ…ï¼Œä½†å’Œä¹‹å‰é‡åˆ°çš„é—®é¢˜ä¸€æ ·ï¼Œ<code>find_package</code> æ— æ³•ç›´æ¥æ‰¾åˆ°ï¼Œæ‰€ä»¥è¿˜æ˜¯æ‰‹åŠ¨åŠ å…¥äº†åº“çš„è·¯å¾„ã€‚<br><img src="https://cdn-a.markji.com/files/67da545476d0a5611b7c05e6_hd.png?e=1742390400486&amp;token=xX63b9jqTlDOcGmctt5K9254rV0LG8hS9BmDeFBy:OVEEkK8mOAmVOjHyA1CWapEMpvM=" alt="å›¾ç‰‡1"></p><h2 id="é‡åˆ°çš„é—®é¢˜">é‡åˆ°çš„é—®é¢˜</h2><ol><li><p><strong>AI å¸®çš„å€’å¿™</strong><br>åœ¨è°ƒç”¨æŸä¸ªæ¥å£æ—¶ï¼ŒAI ç”Ÿæˆçš„ä»£ç å°‘äº†ä¸¤ä¸ªå‚æ•°ï¼Œå¯¼è‡´æ— æ³•æ­£å¸¸æ‰§è¡Œã€‚æœ€åè¿˜æ˜¯æˆ‘è‡ªå·±æ‰‹åŠ¨è·³è½¬åˆ°å®šä¹‰é‡ŒæŸ¥çœ‹å¹¶ä¿®æ­£äº†ã€‚</p></li><li><p><strong>Docker Compose å¯åŠ¨å¤šä¸ªå®¹å™¨</strong><br>æˆ‘ä½¿ç”¨ <code>docker-compose</code> ä¸€é”®å¯åŠ¨äº†å¤šä¸ªæœåŠ¡ï¼ŒåŒ…æ‹¬ Redisã€Kafka ç­‰ï¼Œä½†åœ¨å°è¯•è¿è¡Œæ—¶ï¼ŒKafka æ— æ³•æ­£ç¡®æ”¶åˆ°æ¶ˆæ¯ï¼Œå¯¼è‡´ç¨‹åºæ— æ³•æ­£å¸¸å·¥ä½œã€‚<br><img src="https://cdn-a.markji.com/files/67da6357b49cc95a6c2923c7_hd.png?e=1742390400486&amp;token=xX63b9jqTlDOcGmctt5K9254rV0LG8hS9BmDeFBy:O71hPvwIkVaNim_dDLTqxlJhPos=" alt="å›¾ç‰‡1"><br><img src="https://cdn-a.markji.com/files/67da644fb49cc95a6c293c85_hd.png?e=1742390400486&amp;token=xX63b9jqTlDOcGmctt5K9254rV0LG8hS9BmDeFBy:j5hKpx7807ueI8nBNuZ3yhQu3SA=" alt="å›¾ç‰‡1"></p></li><li><p><strong>æœ€ç»ˆè§£å†³æ–¹æ¡ˆ</strong><br>å» CSDN æ‰¾äº†ä»£ç ï¼Œç»ˆäºèƒ½æ­£å¸¸æ‰§è¡Œäº†ï¼ŒAI è¿™æ¬¡è¿˜æ˜¯ä¸è¡Œ ğŸ˜“ã€‚</p></li></ol><h2 id="æ€»ç»“">æ€»ç»“</h2><ul><li>Elasticsearch ç›´æ¥ç”¨ HTTP é€šä¿¡ï¼Œæ— éœ€é¢å¤–çš„ C++ åº“ã€‚</li><li>Kafka éœ€è¦æ‰‹åŠ¨æŒ‡å®šè·¯å¾„æ‰èƒ½ä½¿ç”¨ã€‚</li><li><code>docker-compose</code> æ–¹ä¾¿ç®¡ç†å¤šä¸ªå®¹å™¨ï¼Œä½† Kafka è¿è¡Œè¿‡ç¨‹ä¸­å¯èƒ½é‡åˆ°æ— æ³•æ¥æ”¶æ¶ˆæ¯çš„é—®é¢˜ã€‚</li><li>ä»£ç æœ‰é—®é¢˜æ—¶ï¼ŒAI å¯èƒ½ä¼šçŠ¯ç—…ï¼Œè¿˜æ˜¯è¦å¤šæ£€æŸ¥æ–‡æ¡£å’Œæºç ã€‚</li></ul><hr>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;Elasticsearch-å¤„ç†æ–¹å¼&quot;&gt;Elasticsearch å¤„ç†æ–¹å¼&lt;/h2&gt;
&lt;p&gt;Elasticsearch é€šå¸¸ç›´æ¥ä½¿ç”¨ HTTP æŠ¥æ–‡é€šä¿¡ï¼Œå› æ­¤ä¸éœ€è¦é¢å¤–ä¸‹è½½ C++ åº“ï¼Œç›´æ¥é€šè¿‡ HTTP è¯·æ±‚å³å¯è¿›è¡Œæ“ä½œã€‚&lt;/p&gt;
&lt;h2 id=&quot;Kafka-</summary>
      
    
    
    
    <category term="C++" scheme="https://eatbreads.github.io/categories/C/"/>
    
    <category term="Kafka" scheme="https://eatbreads.github.io/categories/C/Kafka/"/>
    
    <category term="Elasticsearch" scheme="https://eatbreads.github.io/categories/C/Kafka/Elasticsearch/"/>
    
    
    <category term="vcpkg" scheme="https://eatbreads.github.io/tags/vcpkg/"/>
    
    <category term="Docker" scheme="https://eatbreads.github.io/tags/Docker/"/>
    
    <category term="åˆ†å¸ƒå¼" scheme="https://eatbreads.github.io/tags/%E5%88%86%E5%B8%83%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>æ¶ˆæ¯é˜Ÿåˆ—çš„åŸºç¡€ç¼–å†™</title>
    <link href="https://eatbreads.github.io/posts/be5c987b.html"/>
    <id>https://eatbreads.github.io/posts/be5c987b.html</id>
    <published>2025-03-18T16:00:00.000Z</published>
    <updated>2025-03-21T16:02:18.728Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1-ä»»åŠ¡å°è£…">1. ä»»åŠ¡å°è£…</h2><p>é¦–å…ˆå®ç°äº† <code>Task</code> ç±»ï¼Œè¿™æ˜¯ä¸€ä¸ªç®€å•çš„åŒ…è£¹ç±»ï¼Œä»…åŒ…å«ä»»åŠ¡çš„ <strong>åç§°</strong> å’Œ <strong>å‚æ•°åˆ—è¡¨</strong>ï¼Œç”¨äºå°è£…ä»»åŠ¡ä¿¡æ¯ã€‚</p><h2 id="2-ä»»åŠ¡å¤„ç†å™¨è®¾è®¡">2. ä»»åŠ¡å¤„ç†å™¨è®¾è®¡</h2><p>ä¸ºäº†è®©ä»»åŠ¡å¤„ç†æ›´åŠ æ¨¡å—åŒ–ï¼Œæˆ‘è®¾è®¡äº† <strong>ä»»åŠ¡å¤„ç†å™¨æŠ½è±¡åŸºç±»</strong>ï¼Œæ‰€æœ‰å…·ä½“ä»»åŠ¡å¤„ç†æ–¹æ³•éƒ½éœ€è¦ç»§æ‰¿è¯¥åŸºç±»ï¼Œå¹¶é‡å†™ <code>process</code> å‡½æ•°ï¼Œä»¥å®ç°å…·ä½“ä»»åŠ¡çš„å¤„ç†é€»è¾‘ã€‚</p><h2 id="3-å¤„ç†å™¨æ³¨å†Œæœºåˆ¶">3. å¤„ç†å™¨æ³¨å†Œæœºåˆ¶</h2><p>ç„¶åå®ç°äº† <strong>å¤„ç†å™¨æ³¨å†Œç±»</strong>ï¼Œç”¨äºç®¡ç†ä¸åŒä»»åŠ¡å¤„ç†å™¨çš„æ˜ å°„å…³ç³»ï¼š</p><ul><li><strong>Key</strong>ï¼šä»»åŠ¡åç§°</li><li><strong>Value</strong>ï¼šå¯¹åº”çš„ä»»åŠ¡å¤„ç†å™¨ç±»</li></ul><p>å½“éœ€è¦å¤„ç† <code>Task</code> æ—¶ï¼Œä¼šä»æ³¨å†Œç±»ä¸­è·å–ä¸ <code>Task</code> åç§°å¯¹åº”çš„å¤„ç†å™¨ï¼Œå¹¶ä¼ å…¥ <code>Task</code> è¿›è¡Œæ‰§è¡Œã€‚</p><p><strong>ç¤ºä¾‹æµç¨‹ï¼š</strong><br>å¦‚æœ <code>Task</code> æ˜¯ <strong>A ç±»å‹</strong>ï¼Œæ³¨å†Œç±»ä¼šæ‰¾åˆ° <strong>A å¤„ç†å™¨</strong>ï¼Œç„¶åå°† <code>Task</code> ä¼ å…¥å¤„ç†å™¨ä»¥è·å–å‚æ•°åˆ—è¡¨å¹¶æ‰§è¡Œã€‚</p><h2 id="4-å•å…ƒæµ‹è¯•">4. å•å…ƒæµ‹è¯•</h2><p>ä»£ç ç¼–å†™å®Œæˆåï¼Œå­¦ä¹ å¹¶ä½¿ç”¨ <strong>Google Testï¼ˆGTestï¼‰</strong> è¿›è¡Œå•å…ƒæµ‹è¯•ï¼Œä»¥éªŒè¯ä»»åŠ¡é˜Ÿåˆ—çš„æ­£ç¡®æ€§ã€‚</p><hr><h2 id="æ€»ç»“">æ€»ç»“</h2><ul><li><code>Task</code> ä½œä¸ºåŸºç¡€å°è£…ç±»ï¼Œä»…å­˜å‚¨åç§°å’Œå‚æ•°åˆ—è¡¨ã€‚</li><li>ä»»åŠ¡å¤„ç†å™¨é€šè¿‡ç»§æ‰¿åŸºç±»å®ç° <code>process</code> æ–¹æ³•ã€‚</li><li>å¤„ç†å™¨æ³¨å†Œç±»ç»´æŠ¤ä»»åŠ¡åç§°åˆ°å¤„ç†å™¨çš„æ˜ å°„ï¼Œå®ç°åŠ¨æ€è°ƒç”¨ã€‚</li><li>ä½¿ç”¨ Google Test è¿›è¡Œå•å…ƒæµ‹è¯•ï¼Œæé«˜ä»£ç çš„å¯é æ€§</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;1-ä»»åŠ¡å°è£…&quot;&gt;1. ä»»åŠ¡å°è£…&lt;/h2&gt;
&lt;p&gt;é¦–å…ˆå®ç°äº† &lt;code&gt;Task&lt;/code&gt; ç±»ï¼Œè¿™æ˜¯ä¸€ä¸ªç®€å•çš„åŒ…è£¹ç±»ï¼Œä»…åŒ…å«ä»»åŠ¡çš„ &lt;strong&gt;åç§°&lt;/strong&gt; å’Œ &lt;strong&gt;å‚æ•°åˆ—è¡¨&lt;/strong&gt;ï¼Œç”¨äºå°è£…ä»»åŠ¡ä¿¡æ¯ã€‚&lt;/p&gt;
&lt;h2 id</summary>
      
    
    
    
    <category term="C++" scheme="https://eatbreads.github.io/categories/C/"/>
    
    <category term="æ¶ˆæ¯é˜Ÿåˆ—" scheme="https://eatbreads.github.io/categories/C/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/"/>
    
    
    <category term="è®¾è®¡æ¨¡å¼" scheme="https://eatbreads.github.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
    <category term="ä»»åŠ¡é˜Ÿåˆ—" scheme="https://eatbreads.github.io/tags/%E4%BB%BB%E5%8A%A1%E9%98%9F%E5%88%97/"/>
    
    <category term="Google Test" scheme="https://eatbreads.github.io/tags/Google-Test/"/>
    
  </entry>
  
  <entry>
    <title>Kafka åŸºç¡€çŸ¥è¯†æ€»ç»“</title>
    <link href="https://eatbreads.github.io/posts/d00def19.html"/>
    <id>https://eatbreads.github.io/posts/d00def19.html</id>
    <published>2025-03-18T16:00:00.000Z</published>
    <updated>2025-03-21T16:02:18.734Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1-Kafka-åº”ç”¨åœºæ™¯">1. Kafka åº”ç”¨åœºæ™¯</h2><p>Kafka ä½œä¸ºä¸€æ¬¾é«˜ååçš„åˆ†å¸ƒå¼æ¶ˆæ¯ç³»ç»Ÿï¼Œé€‚ç”¨äºå¤šç§åº”ç”¨åœºæ™¯ï¼š</p><ul><li><strong>æ¶ˆæ¯é˜Ÿåˆ—</strong>ï¼šç”¨äºè§£è€¦ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…ï¼Œæé«˜ç³»ç»Ÿçš„ä¼¸ç¼©æ€§ã€‚</li><li><strong>æ—¥å¿—æ”¶é›†</strong>ï¼šé›†ä¸­å­˜å‚¨å’Œå¤„ç†ç³»ç»Ÿæ—¥å¿—ï¼Œæ–¹ä¾¿åˆ†æå’Œç›‘æ§ã€‚</li><li><strong>æµè®¡ç®—</strong>ï¼šå¤„ç†å®æ—¶æ•°æ®æµï¼Œå°†æ•°æ®ä¼ è¾“ç»™å®æ—¶è®¡ç®—ç³»ç»Ÿè¿›è¡Œè®¡ç®—ã€‚</li><li><strong>äº‹ä»¶æº¯æº</strong>ï¼šè®°å½•äº‹ä»¶å‘ç”Ÿçš„å†å²ï¼Œä»¥ä¾¿åç»­å›æº¯å’Œåˆ†æã€‚</li><li><strong>Metrics é‡‡é›†</strong>ï¼šæ”¶é›†å’Œå­˜å‚¨ç³»ç»Ÿçš„ç›‘æ§æŒ‡æ ‡æ•°æ®ã€‚</li></ul><hr><h2 id="2-Kafka-ç»„ä»¶ä»‹ç»">2. Kafka ç»„ä»¶ä»‹ç»</h2><p>Kafka ç”±å¤šä¸ªæ ¸å¿ƒç»„ä»¶ç»„æˆï¼š</p><ul><li><p><strong>ç”Ÿäº§è€…ï¼ˆProducerï¼‰</strong>ï¼šè´Ÿè´£å°†æ¶ˆæ¯å‘é€åˆ° Kafkaã€‚</p></li><li><p><strong>æ¶ˆè´¹è€…ï¼ˆConsumerï¼‰</strong>ï¼šä» Kafka è¯»å–æ¶ˆæ¯è¿›è¡Œå¤„ç†ã€‚</p></li><li><p><strong>æ¶ˆæ¯ä»£ç†ï¼ˆBrokerï¼‰</strong>ï¼šå­˜å‚¨å’Œç®¡ç†æ¶ˆæ¯ï¼Œè´Ÿè´£æ¥æ”¶ã€å­˜å‚¨å’Œè½¬å‘æ•°æ®ã€‚</p></li><li><p><strong>åè°ƒå™¨ï¼ˆZookeeperï¼‰</strong>ï¼šæä¾›åˆ†å¸ƒå¼åè°ƒå’Œç®¡ç†ä»»åŠ¡ã€‚</p></li><li><p><strong>ä¸»é¢˜ï¼ˆTopicï¼‰</strong>ï¼šç±»ä¼¼å¹¿æ’­é¢‘é“ï¼Œç”Ÿäº§è€…å°†æ¶ˆæ¯å‘é€åˆ°æŒ‡å®šçš„ <code>Topic</code>ï¼Œæ¶ˆè´¹è€…ä» <code>Topic</code> è¯»å–æ¶ˆæ¯ã€‚</p><p>åˆ›å»º Topic å‘½ä»¤ç¤ºä¾‹ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kafka-topics.sh --create --bootstrap-server localhost:9092 --replication-factor 1 --partitions 3 --topic my-topic</span><br></pre></td></tr></table></figure></li><li><p><strong>åˆ†åŒºï¼ˆPartitionï¼‰</strong>ï¼šä¸€ä¸ª <code>Topic</code> è¿›ä¸€æ­¥åˆ†ä¸ºå¤šä¸ª <code>Partition</code>ï¼Œå¯ä»¥æé«˜æ•°æ®å±€éƒ¨æ€§ã€æ”¯æŒå¹¶è¡Œå¤„ç†ï¼Œå®ç°è´Ÿè½½å‡è¡¡ã€‚</p></li></ul><hr><h2 id="3-Kafka-æ¶ˆæ¯æœ‰åºæ€§">3. Kafka æ¶ˆæ¯æœ‰åºæ€§</h2><p>Kafka çš„æ¶ˆæ¯å¤„ç†æ–¹å¼ï¼š</p><ul><li><strong>ä¸åŒåˆ†åŒºçš„æ¶ˆæ¯æ˜¯å¹¶è¡Œå¤„ç†çš„</strong>ï¼Œå› æ­¤ Kafka <strong>å…¨å±€ä¸Šä¸ä¿è¯æ¶ˆæ¯çš„æœ‰åºæ€§</strong>ã€‚</li><li><strong>åŒä¸€åˆ†åŒºå†…çš„æ¶ˆæ¯æ˜¯ä¸¥æ ¼æœ‰åºçš„</strong>ï¼Œæ¶ˆè´¹è€…ä¼šæŒ‰ç…§ <code>offset</code> ä¾æ¬¡æ¶ˆè´¹ã€‚</li></ul><hr><h2 id="4-Offsetï¼ˆåç§»é‡ï¼‰">4. Offsetï¼ˆåç§»é‡ï¼‰</h2><ul><li>Kafka ä¸­çš„æ¯æ¡æ¶ˆæ¯éƒ½æœ‰å”¯ä¸€çš„ <strong>Offset</strong>ï¼ˆåç§»é‡ï¼‰ï¼Œä» <code>0</code> å¼€å§‹é€’å¢ã€‚</li><li>Offset ç”¨äºè¿½è¸ªæ¶ˆæ¯æ¶ˆè´¹è¿›åº¦ï¼Œæ¯ä¸ªæ¶ˆè´¹è€…ç»„éƒ½ä¼šç»´æŠ¤è‡ªå·±çš„ Offsetã€‚</li></ul><hr><h2 id="5-Consumer-Groupï¼ˆæ¶ˆè´¹è€…ç»„ï¼‰">5. Consumer Groupï¼ˆæ¶ˆè´¹è€…ç»„ï¼‰</h2><ul><li><p><strong>ä¸€ä¸ªåˆ†åŒºï¼ˆPartitionï¼‰åªèƒ½ç”±ä¸€ä¸ªç»„å‘˜æ¶ˆè´¹</strong>ï¼Œä¿è¯åˆ†åŒºæ•°æ®ä¸ä¼šè¢«ç»„å†…å¤šä¸ªæ¶ˆè´¹è€…é‡å¤æ¶ˆè´¹ã€‚</p></li><li><p><strong>å¤šä¸ª Consumer Group å¯ä»¥åŒæ—¶æ¶ˆè´¹åŒä¸€ä¸ª Topic</strong>ï¼Œä¸åŒç»„ä¹‹é—´ä¸ä¼šç›¸äº’å½±å“ã€‚ä¾‹å¦‚ï¼š</p><ul><li><code>Group A</code> è¯»å– <code>Topic X</code> çš„æ¶ˆæ¯ä¸€æ¬¡ã€‚</li><li><code>Group B</code> ä¹Ÿå¯ä»¥ç‹¬ç«‹è¯»å– <code>Topic X</code> çš„æ¶ˆæ¯ä¸€æ¬¡ã€‚</li></ul></li></ul><p>è¿™æ ·ï¼Œæ¯ä¸ªç»„éƒ½å¯ä»¥ç‹¬ç«‹å¤„ç†ç›¸åŒçš„æ¶ˆæ¯ï¼Œå®ç°å¤šç”¨é€”æ¶ˆè´¹ã€‚</p><hr><h2 id="6-æ€»ç»“">6. æ€»ç»“</h2><ul><li>Kafka é€‚ç”¨äºæ¶ˆæ¯é˜Ÿåˆ—ã€æ—¥å¿—æ”¶é›†ã€æµè®¡ç®—ã€äº‹ä»¶æº¯æºç­‰åœºæ™¯ã€‚</li><li>æ ¸å¿ƒç»„ä»¶åŒ…æ‹¬ Producerã€Consumerã€Brokerã€Zookeeperã€Topicã€Partition ç­‰ã€‚</li><li>æ¶ˆæ¯çš„å…¨å±€æœ‰åºæ€§æ— æ³•ä¿è¯ï¼Œä½† <strong>åŒä¸€åˆ†åŒºå†…æ˜¯æœ‰åºçš„</strong>ã€‚</li><li>Offset è®°å½•æ¶ˆæ¯çš„æ¶ˆè´¹è¿›åº¦ï¼Œæ¯ä¸ª Consumer Group ç»´æŠ¤è‡ªå·±çš„ Offsetã€‚</li><li>é€šè¿‡ Consumer Group æœºåˆ¶ï¼Œå¯ä»¥æ§åˆ¶æ¶ˆæ¯çš„åˆ†å‘å’Œé‡å¤æ¶ˆè´¹ã€‚</li></ul><hr>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;1-Kafka-åº”ç”¨åœºæ™¯&quot;&gt;1. Kafka åº”ç”¨åœºæ™¯&lt;/h2&gt;
&lt;p&gt;Kafka ä½œä¸ºä¸€æ¬¾é«˜ååçš„åˆ†å¸ƒå¼æ¶ˆæ¯ç³»ç»Ÿï¼Œé€‚ç”¨äºå¤šç§åº”ç”¨åœºæ™¯ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ¶ˆæ¯é˜Ÿåˆ—&lt;/strong&gt;ï¼šç”¨äºè§£è€¦ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…ï¼Œæé«˜ç³»ç»Ÿçš„ä¼¸ç¼©æ€§ã€‚&lt;/li&gt;
&lt;</summary>
      
    
    
    
    <category term="åˆ†å¸ƒå¼ç³»ç»Ÿ" scheme="https://eatbreads.github.io/categories/%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F/"/>
    
    <category term="Kafka" scheme="https://eatbreads.github.io/categories/%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F/Kafka/"/>
    
    
    <category term="æ¶ˆæ¯é˜Ÿåˆ—" scheme="https://eatbreads.github.io/tags/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/"/>
    
    <category term="å®æ—¶æµå¤„ç†" scheme="https://eatbreads.github.io/tags/%E5%AE%9E%E6%97%B6%E6%B5%81%E5%A4%84%E7%90%86/"/>
    
    <category term="å¤§æ•°æ®" scheme="https://eatbreads.github.io/tags/%E5%A4%A7%E6%95%B0%E6%8D%AE/"/>
    
  </entry>
  
  <entry>
    <title>dockerä¸€ç‚¹å°è®°å½•</title>
    <link href="https://eatbreads.github.io/posts/bc68fe1f.html"/>
    <id>https://eatbreads.github.io/posts/bc68fe1f.html</id>
    <published>2025-03-13T14:21:56.000Z</published>
    <updated>2025-03-21T16:02:18.702Z</updated>
    
    <content type="html"><![CDATA[<h1>Docker åŸºç¡€ä½¿ç”¨</h1><h2 id="1-Docker-ç»„ä»¶">1. Docker ç»„ä»¶</h2><p>Docker ä¸»è¦ç”±ä»¥ä¸‹ä¸‰ä¸ªæ ¸å¿ƒç»„ä»¶ç»„æˆï¼š</p><ul><li><strong>é•œåƒï¼ˆImageï¼‰</strong>ï¼šç±»ä¼¼äºè½¯ä»¶çš„ <strong>è“å›¾</strong>ï¼Œå®šä¹‰äº†å®¹å™¨è¿è¡Œæ‰€éœ€çš„ç¯å¢ƒã€‚</li><li><strong>å®¹å™¨ï¼ˆContainerï¼‰</strong>ï¼šåŸºäºé•œåƒåˆ›å»ºçš„ <strong>å®ä¾‹</strong>ï¼Œå¯ä»¥è¿è¡Œåº”ç”¨ã€‚</li><li><strong>å¼•æ“ï¼ˆEngineï¼‰</strong>ï¼šDocker çš„ <strong>æ ¸å¿ƒç®¡ç†ç»„ä»¶</strong>ï¼Œè´Ÿè´£å®¹å™¨çš„åˆ›å»ºã€è¿è¡Œã€ç®¡ç†ç­‰ã€‚</li></ul><hr><h2 id="2-å¦‚ä½•æ„å»ºé•œåƒï¼ˆBlueprintï¼‰">2. å¦‚ä½•æ„å»ºé•œåƒï¼ˆBlueprintï¼‰</h2><ol><li><strong>ç¼–å†™ <code>Dockerfile</code></strong> å®šä¹‰é•œåƒæ„å»ºè¿‡ç¨‹ã€‚</li><li><strong>æ„å»ºé•œåƒ</strong>ï¼š<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker build -t my_image .</span><br></pre></td></tr></table></figure></li><li><strong>å‘å¸ƒé•œåƒ</strong>ï¼š<ul><li>ç™»å½• Docker Hubï¼š<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker login</span><br></pre></td></tr></table></figure></li><li>æ¨é€é•œåƒï¼š<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker push my_image</span><br></pre></td></tr></table></figure></li></ul></li><li><strong>ä½¿ç”¨é•œåƒ</strong>ï¼š<ul><li>è¿è¡Œå®¹å™¨ï¼š<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d --name my_container my_image</span><br></pre></td></tr></table></figure></li></ul></li></ol><hr><h2 id="ä½¿ç”¨-Docker-æ‰§è¡Œ-CI-CD">ä½¿ç”¨ Docker æ‰§è¡Œ CI/CD</h2><p>Docker å¯ä¸ <strong>Jenkins</strong>ã€<strong>GitHub Actions</strong> ç»“åˆä½¿ç”¨ï¼Œå®ç° CI/CDï¼š</p><ul><li><strong>Jenkins</strong> + Dockerï¼šç”¨äºä¼ä¸šçº§ CI/CD è‡ªåŠ¨åŒ–éƒ¨ç½²ã€‚</li><li><strong>GitHub Actions</strong>ï¼ˆé€‚ç”¨äºä¸ªäººå°é¡¹ç›®/å…è´¹æ–¹æ¡ˆï¼‰ã€‚</li></ul><hr><h2 id="3-æŸ¥çœ‹å®¹å™¨æ—¥å¿—">3. æŸ¥çœ‹å®¹å™¨æ—¥å¿—</h2><p>ä½¿ç”¨ <code>docker logs</code> å‘½ä»¤æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker logs my_container</span><br></pre></td></tr></table></figure><p>æ”¯æŒå¤šç§æ—¥å¿—æ¨¡å¼ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker logs -f my_container  <span class="comment"># æŒç»­æŸ¥çœ‹æ—¥å¿—ï¼ˆå®æ—¶åˆ·æ–°ï¼‰</span></span><br><span class="line">docker logs --<span class="built_in">tail</span> 100 my_container  <span class="comment"># æŸ¥çœ‹æœ€å100è¡Œæ—¥å¿—</span></span><br><span class="line">docker logs --since 10m my_container  <span class="comment"># æŸ¥çœ‹æœ€è¿‘10åˆ†é’Ÿçš„æ—¥å¿—</span></span><br></pre></td></tr></table></figure><hr><h2 id="4-Docker-æ•°æ®å·ï¼ˆVolumeï¼‰">4. Docker æ•°æ®å·ï¼ˆVolumeï¼‰</h2><p>Docker <strong>æ•°æ®å·</strong> ä¸»è¦ç”¨äºæŒä¹…åŒ–å­˜å‚¨æ•°æ®ï¼Œå®¹å™¨é”€æ¯æ—¶æ•°æ®ä¸ä¼šä¸¢å¤±ã€‚</p><h3 id="1-åˆ›å»ºæ•°æ®å·">1. åˆ›å»ºæ•°æ®å·</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker volume create my_data</span><br></pre></td></tr></table></figure><h3 id="2-è¿è¡Œå®¹å™¨å¹¶æŒ‚è½½æ•°æ®å·">2. è¿è¡Œå®¹å™¨å¹¶æŒ‚è½½æ•°æ®å·</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d --name my_container -v my_data:/app/data nginx</span><br></pre></td></tr></table></figure><h3 id="3-å¤šä¸ªå®¹å™¨å…±äº«æ•°æ®å·">3. å¤šä¸ªå®¹å™¨å…±äº«æ•°æ®å·</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker run -d --name container1 -v my_data:/app/data nginx</span><br><span class="line">docker run -d --name container2 -v my_data:/app/data alpine</span><br></pre></td></tr></table></figure><h3 id="4-æŸ¥çœ‹æ•°æ®å·ä¿¡æ¯">4. æŸ¥çœ‹æ•°æ®å·ä¿¡æ¯</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker volume inspect my_data</span><br></pre></td></tr></table></figure><hr><h2 id="5-Docker-ç½‘ç»œ">5. Docker ç½‘ç»œ</h2><p>Docker æä¾›å¤šç§ <strong>ç½‘ç»œæ¨¡å¼</strong>ï¼Œç”¨äºç®¡ç†å®¹å™¨é—´çš„é€šä¿¡ï¼š</p><h3 id="1-Bridgeï¼ˆæ¡¥æ¥æ¨¡å¼ï¼‰">1. <strong>Bridgeï¼ˆæ¡¥æ¥æ¨¡å¼ï¼‰</strong></h3><ul><li><strong>é»˜è®¤æ¨¡å¼</strong>ï¼Œé€‚ç”¨äºå¤šä¸ªå®¹å™¨ä¹‹é—´çš„é€šä¿¡ã€‚</li><li>åœ¨ç›¸åŒæ¡¥æ¥ç½‘ç»œçš„å®¹å™¨å¯ä»¥é€šè¿‡<strong>å®¹å™¨å</strong>äº’ç›¸è®¿é—®ã€‚</li><li>åˆ›å»ºæ¡¥æ¥ç½‘ç»œå¹¶å°†å®¹å™¨è¿æ¥åˆ°è¯¥ç½‘ç»œï¼š<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker network create my_bridge</span><br><span class="line">docker run -d --name container1 --network my_bridge_network nginx</span><br><span class="line">docker run -d --name container2 --network my_bridge</span><br></pre></td></tr></table></figure></li><li>ä½¿ç”¨ <strong>Docker Compose</strong> å¯ä»¥è‡ªåŠ¨åˆ›å»ºå…±äº«ç½‘ç»œï¼Œæä¾›<strong>åŸºç¡€çš„æœåŠ¡å‘ç°åŠŸèƒ½</strong>ã€‚</li></ul><h3 id="2-Hostï¼ˆä¸»æœºæ¨¡å¼ï¼‰">2. <strong>Hostï¼ˆä¸»æœºæ¨¡å¼ï¼‰</strong></h3><ul><li>å®¹å™¨ç›´æ¥ä½¿ç”¨ <strong>å®¿ä¸»æœºçš„ç½‘ç»œ</strong>ï¼Œä¸åšéš”ç¦»ï¼Œå…·æœ‰æ›´é«˜çš„ç½‘ç»œæ€§èƒ½ã€‚</li></ul><h3 id="3-Noneï¼ˆæ— ç½‘ç»œï¼‰">3. <strong>Noneï¼ˆæ— ç½‘ç»œï¼‰</strong></h3><ul><li>å®¹å™¨æ²¡æœ‰ä»»ä½•ç½‘ç»œè¿æ¥ï¼Œé€‚ç”¨äºéœ€è¦å®Œå…¨éš”ç¦»çš„ç¯å¢ƒã€‚</li></ul><h3 id="4-Overlay-ç½‘ç»œ">4. <strong>Overlay ç½‘ç»œ</strong></h3><ul><li>ç”¨äº <strong>Docker Swarm</strong> é›†ç¾¤ï¼Œä½¿å¤šä¸ªä¸»æœºä¸Šçš„å®¹å™¨å¯ç›¸äº’é€šä¿¡ã€‚</li></ul><h3 id="5-Macvlan-æ¨¡å¼">5. <strong>Macvlan æ¨¡å¼</strong></h3><ul><li>å…è®¸å®¹å™¨ç›´æ¥ä¸å®¿ä¸»æœºçš„ç½‘ç»œé€šä¿¡ï¼Œé€‚ç”¨äºéœ€è¦ç‹¬ç«‹ <strong>IP åœ°å€</strong> çš„åœºæ™¯ã€‚</li></ul><hr><h2 id="6-å¦‚ä½•ä¼˜åŒ–-Docker-å¯åŠ¨æ—¶é—´">6. å¦‚ä½•ä¼˜åŒ– Docker å¯åŠ¨æ—¶é—´</h2><ol><li><strong>ä½¿ç”¨è¾ƒå°çš„åŸºç¡€é•œåƒ</strong>ï¼ˆå¦‚ <code>alpine</code> ä»£æ›¿ <code>ubuntu</code>ï¼‰ã€‚</li><li><strong>åˆ©ç”¨æ„å»ºç¼“å­˜</strong>ï¼šé¿å…æ¯æ¬¡ <code>docker build</code> éƒ½ä»å¤´å¼€å§‹æ„å»ºã€‚</li><li><strong>å‡å°‘å®¹å™¨å±‚æ•°</strong>ï¼šä½¿ç”¨å¤šé˜¶æ®µæ„å»ºæ¥å‡å°‘é•œåƒå¤§å°ã€‚</li><li><strong>æœ¬åœ°ç¼“å­˜é•œåƒ</strong>ï¼š<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull my_image</span><br></pre></td></tr></table></figure></li><li><strong>ä¼˜åŒ–åº”ç”¨å¯åŠ¨æ–¹å¼</strong>ï¼šå¦‚ <strong>å¤šé˜¶æ®µæ„å»º</strong>ï¼Œå‡å°‘ä¸å¿…è¦çš„è¿è¡Œæ—¶ä¾èµ–ã€‚</li></ol><hr><h2 id="6-ä½¿ç”¨-docker-compose">6. ä½¿ç”¨ <code>docker-compose</code></h2><p><code>docker-compose</code> å…è®¸ç”¨ <strong>YAML é…ç½®æ–‡ä»¶</strong> å®šä¹‰å¤šä¸ªå®¹å™¨ï¼Œå¹¶é€šè¿‡ä¸€ä¸ªå‘½ä»¤å¯åŠ¨æ‰€æœ‰å®¹å™¨ï¼š</p><ol><li><strong>ç¼–å†™ <code>docker-compose.yml</code> æ–‡ä»¶</strong>ï¼š<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&#x27;3&#x27;</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">web:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">nginx</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;80:80&quot;</span></span><br><span class="line">  <span class="attr">db:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">mysql</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">MYSQL_ROOT_PASSWORD:</span> <span class="string">root</span></span><br></pre></td></tr></table></figure></li><li><strong>ä½¿ç”¨ <code>docker-compose</code> å¯åŠ¨å®¹å™¨</strong>ï¼š<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose up -d</span><br></pre></td></tr></table></figure></li></ol><hr><h2 id="6-ä½¿ç”¨å¤šé˜¶æ®µæ„å»ºä¼˜åŒ–é•œåƒä½“ç§¯">6. ä½¿ç”¨å¤šé˜¶æ®µæ„å»ºä¼˜åŒ–é•œåƒä½“ç§¯</h2><p>å¤šé˜¶æ®µæ„å»ºå¯å‡å°‘æœ€ç»ˆé•œåƒçš„å¤§å°ï¼š</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç¬¬ä¸€é˜¶æ®µï¼šæ„å»ºåº”ç”¨</span></span><br><span class="line"><span class="keyword">FROM</span> golang:<span class="number">1.18</span> AS builder</span><br><span class="line"><span class="keyword">WORKDIR</span><span class="language-bash"> /app</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> . .</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> go build -o myapp</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¬¬äºŒé˜¶æ®µï¼šåˆ›å»ºæ›´å°çš„æœ€ç»ˆé•œåƒ</span></span><br><span class="line"><span class="keyword">FROM</span> alpine</span><br><span class="line"><span class="keyword">WORKDIR</span><span class="language-bash"> /app</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> --from=0 /app/mybinary .</span></span><br><span class="line"><span class="keyword">CMD</span><span class="language-bash"> [<span class="string">&quot;./mybinary&quot;</span>]</span></span><br></pre></td></tr></table></figure><ul><li><strong>ç¬¬ä¸€é˜¶æ®µ</strong>ï¼šä½¿ç”¨å®Œæ•´çš„ Golang ç¯å¢ƒæ„å»ºäºŒè¿›åˆ¶æ–‡ä»¶ã€‚</li><li><strong>ç¬¬äºŒé˜¶æ®µ</strong>ï¼šä½¿ç”¨ <code>alpine</code> ä½œä¸ºåŸºç¡€é•œåƒï¼Œä»…å¤åˆ¶æœ€ç»ˆç”Ÿæˆçš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå‡å°‘ä½“ç§¯ã€‚</li></ul><hr><h2 id="6-Docker-Swarmï¼ˆé›†ç¾¤ï¼‰">6. Docker Swarmï¼ˆé›†ç¾¤ï¼‰</h2><p>Docker Swarm æ˜¯ Docker å®˜æ–¹æä¾›çš„ <strong>è½»é‡çº§å®¹å™¨ç¼–æ’å·¥å…·</strong>ï¼š</p><ul><li>å…è®¸å°†å¤šä¸ª Docker ä¸»æœºé›†åˆæˆä¸€ä¸ª<strong>è™šæ‹Ÿ</strong> Docker ä¸»æœºã€‚</li><li>é€‚ç”¨äº <strong>è½»é‡çº§çš„é›†ç¾¤ç®¡ç†</strong>ï¼Œç›¸æ¯” Kubernetes æ›´åŠ ç®€å•æ˜“ç”¨ã€‚</li></ul><hr><h2 id="7-æ€»ç»“">7. æ€»ç»“</h2><ul><li>Docker æä¾›äº†<strong>é•œåƒã€å®¹å™¨ã€ç½‘ç»œ</strong>ç­‰ç»„ä»¶ï¼Œç®€åŒ–åº”ç”¨çš„<strong>æ‰“åŒ…ã€åˆ†å‘ã€éƒ¨ç½²</strong>ã€‚</li><li>é€šè¿‡ <strong>Dockerfile</strong> æ„å»ºè‡ªå®šä¹‰é•œåƒï¼Œå¹¶ä½¿ç”¨ <strong>Docker Hub</strong> åˆ†å‘ã€‚</li><li>åˆ©ç”¨ <strong>Docker + CI/CD å·¥å…·</strong>ï¼ˆå¦‚ <strong>Jenkins</strong>ã€<strong>GitHub Actions</strong>ï¼‰ï¼Œå¯å®ç°è‡ªåŠ¨åŒ–éƒ¨ç½²ã€‚</li><li>é€šè¿‡ <strong>Docker Compose</strong> å¿«é€Ÿå¯åŠ¨å¤šå®¹å™¨åº”ç”¨ï¼Œç®€åŒ–ç®¡ç†ã€‚</li><li>ä½¿ç”¨ <strong>å¤šé˜¶æ®µæ„å»º</strong> å¯ <strong>ä¼˜åŒ–é•œåƒä½“ç§¯</strong>ï¼Œæé«˜æ‹‰å–ä¸å¯åŠ¨é€Ÿåº¦ã€‚</li><li><strong>ä¼˜åŒ–å¯åŠ¨æ—¶é—´</strong> å¯ä»¥é€šè¿‡ï¼š<ul><li>é€‰æ‹©è¾ƒå°çš„åŸºç¡€é•œåƒã€‚</li><li>å‡å°‘ä¸å¿…è¦çš„å±‚æ•°ã€‚</li><li>ä½¿ç”¨æœ¬åœ°ç¼“å­˜æé«˜æ„å»ºæ•ˆç‡ã€‚</li></ul></li></ul><hr>]]></content>
    
    
      
      
    <summary type="html">&lt;h1&gt;Docker åŸºç¡€ä½¿ç”¨&lt;/h1&gt;
&lt;h2 id=&quot;1-Docker-ç»„ä»¶&quot;&gt;1. Docker ç»„ä»¶&lt;/h2&gt;
&lt;p&gt;Docker ä¸»è¦ç”±ä»¥ä¸‹ä¸‰ä¸ªæ ¸å¿ƒç»„ä»¶ç»„æˆï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é•œåƒï¼ˆImageï¼‰&lt;/strong&gt;ï¼šç±»ä¼¼äºè½¯ä»¶çš„ &lt;strong&gt;</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>rediså…«è‚¡æ–‡</title>
    <link href="https://eatbreads.github.io/posts/c74dfdcd.html"/>
    <id>https://eatbreads.github.io/posts/c74dfdcd.html</id>
    <published>2025-03-13T14:11:08.000Z</published>
    <updated>2025-03-21T16:02:18.713Z</updated>
    
    <content type="html"><![CDATA[<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># Redis åŸºç¡€ä½¿ç”¨</span></span><br><span class="line"></span><br><span class="line"><span class="section">## è¿›å…¥ Redis ç»ˆç«¯</span></span><br><span class="line">ä½¿ç”¨ <span class="code">`redis-cli`</span> è¿›å…¥ Redis äº¤äº’ç»ˆç«¯ã€‚</span><br><span class="line"></span><br><span class="line"><span class="section">## Redis æ”¯æŒçš„æ•°æ®ç±»å‹</span></span><br><span class="line">Redis æ”¯æŒäº”ç§æ•°æ®ç±»å‹ï¼š</span><br><span class="line"><span class="bullet">-</span> <span class="strong">**String**</span></span><br><span class="line"><span class="bullet">-</span> <span class="strong">**Hash**</span></span><br><span class="line"><span class="bullet">-</span> <span class="strong">**List**</span></span><br><span class="line"><span class="bullet">-</span> <span class="strong">**Set**</span></span><br><span class="line"><span class="bullet">-</span> <span class="strong">**Sorted Setï¼ˆæœ‰åºé›†åˆï¼‰**</span></span><br><span class="line"></span><br><span class="line"><span class="section">### 1. String</span></span><br><span class="line"><span class="code">```sh</span></span><br><span class="line"><span class="code">set name mike</span></span><br><span class="line"><span class="code">get name</span></span><br><span class="line"><span class="code">del name</span></span><br></pre></td></tr></table></figure><h3 id="2-Hash">2. Hash</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">hset user name Alice</span><br><span class="line">hget user name</span><br><span class="line">hgetall user</span><br><span class="line">hdel user name</span><br></pre></td></tr></table></figure><blockquote><p><strong>PS:</strong> <code>user</code> åœ¨è¿™é‡Œæ˜¯è¡¨åï¼Œ<code>name</code> æ˜¯ keyã€‚</p></blockquote><h3 id="3-List">3. List</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">lpush queue task</span><br><span class="line">rpush queue task</span><br><span class="line">lpop queue</span><br><span class="line">rpop queue</span><br><span class="line">lrange queue 0 -1</span><br></pre></td></tr></table></figure><blockquote><p><strong>PS:</strong> <code>-1</code> è¡¨ç¤ºå€’æ•°ç¬¬ä¸€ä¸ªï¼Œ<code>lrange queue 0 -1</code> è¡¨ç¤ºéå†ä» <code>0</code> åˆ°æœ€åä¸€ä¸ªå…ƒç´ ã€‚</p></blockquote><h3 id="4-Set">4. Set</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sadd myset a</span><br><span class="line">sadd myset b</span><br><span class="line">sadd myset c</span><br><span class="line">smembers myset</span><br><span class="line">srem myset a</span><br></pre></td></tr></table></figure><h3 id="5-Sorted-Set">5. Sorted Set</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">zadd scores 100 Alice</span><br><span class="line">zadd scores 200 Bob</span><br><span class="line">zrange scores 0 -1 withscores</span><br><span class="line">zrevrange scores 0 -1 withscores</span><br><span class="line">zrem scores Alice</span><br></pre></td></tr></table></figure><blockquote><p><strong>PS:</strong> æœ‰åºé›†åˆæ’å…¥æ—¶éœ€è¦æä¾›æƒé‡å€¼ï¼Œ<code>withscores</code> è¡¨ç¤ºæŒ‰ç…§æƒé‡éå†ã€‚</p></blockquote><hr><h2 id="é…ç½®æ–‡ä»¶ä½ç½®">é…ç½®æ–‡ä»¶ä½ç½®</h2><ul><li>é…ç½®æ–‡ä»¶è·¯å¾„ï¼š<code>/etc/redis/redis.conf</code></li><li>ä¿®æ”¹é…ç½®åéœ€è¦é‡å¯ Redisï¼š<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> systemctl restart redis</span><br></pre></td></tr></table></figure></li><li>è¯¥é…ç½®æ–‡ä»¶å¯ç”¨äºç¼–è¾‘ <strong>æŒä¹…åŒ–</strong> è®¾ç½®ã€‚</li></ul><hr><h2 id="Redis-æŒä¹…åŒ–">Redis æŒä¹…åŒ–</h2><h3 id="1-RDB-å¿«ç…§æŒä¹…åŒ–ï¼ˆä¿å­˜æ•°æ®åˆ°ç£ç›˜ï¼‰">1. RDB å¿«ç…§æŒä¹…åŒ–ï¼ˆä¿å­˜æ•°æ®åˆ°ç£ç›˜ï¼‰</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">save 900 1   <span class="comment"># 900 ç§’ï¼ˆ15 åˆ†é’Ÿï¼‰è‡³å°‘æœ‰ 1 æ¬¡å†™å…¥æ“ä½œï¼Œå°±ä¿å­˜ RDB</span></span><br><span class="line">save 300 10  <span class="comment"># 300 ç§’ï¼ˆ5 åˆ†é’Ÿï¼‰è‡³å°‘æœ‰ 10 æ¬¡å†™å…¥æ“ä½œï¼Œå°±ä¿å­˜ RDB</span></span><br><span class="line">save 60 10000 <span class="comment"># 60 ç§’å†…æœ‰ 10000 æ¬¡å†™å…¥æ“ä½œï¼Œå°±ä¿å­˜ RDB</span></span><br></pre></td></tr></table></figure><h3 id="2-AOF-æ—¥å¿—æŒä¹…åŒ–">2. AOF æ—¥å¿—æŒä¹…åŒ–</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">appendonly <span class="built_in">yes</span>   <span class="comment"># å¯ç”¨ AOF</span></span><br><span class="line">appendfilename <span class="string">&quot;appendonly.aof&quot;</span>  <span class="comment"># AOF æ–‡ä»¶å</span></span><br></pre></td></tr></table></figure><hr><h2 id="Redis-ä½¿ç”¨åœºæ™¯">Redis ä½¿ç”¨åœºæ™¯</h2><ol><li><p><strong>ç¼“å­˜</strong></p><ul><li>å­˜å‚¨å¸¸ç”¨æ•°æ®ï¼Œå¦‚é¡µé¢æ¸²æŸ“ç­‰ã€‚</li></ul></li><li><p><strong>å®æ—¶ç³»ç»Ÿ</strong></p><ul><li>ç»Ÿè®¡ç½‘ç«™ç‚¹å‡»ç‡ã€å®æ—¶æ’è¡Œæ¦œã€ç‚¹èµåŠŸèƒ½ç­‰ã€‚</li></ul></li><li><p><strong>æ¶ˆæ¯é˜Ÿåˆ—</strong></p><ul><li>ä½¿ç”¨ <code>List</code> å’Œ <code>Pub/Sub</code> å¯å®ç°è½»é‡çº§æ¶ˆæ¯é˜Ÿåˆ—ã€‚</li></ul></li><li><p><strong>åˆ†å¸ƒå¼é”</strong></p><ul><li>æœ¬è´¨ä¸Šä¸æ¶ˆæ¯é˜Ÿåˆ—åŠŸèƒ½ç±»ä¼¼ï¼Œå¯ç”¨äºåˆ†å¸ƒå¼ç¯å¢ƒä¸‹çš„é”ç®¡ç†ã€‚</li></ul></li><li><p><strong>è®¡æ•°å™¨</strong></p><ul><li>Redis å…·æœ‰åŸå­æ“ä½œèƒ½åŠ›ï¼Œé€‚åˆä½œä¸ºè®¡æ•°å™¨ï¼Œä¾‹å¦‚åœ¨çº¿äººæ•°ç»Ÿè®¡ç­‰ã€‚</li></ul></li></ol><hr><h2 id="Redis-ä¸ºä»€ä¹ˆè¿™ä¹ˆå¿«ï¼Ÿ">Redis ä¸ºä»€ä¹ˆè¿™ä¹ˆå¿«ï¼Ÿ</h2><ol><li><strong>æ•°æ®å­˜å‚¨åœ¨å†…å­˜</strong>ï¼ˆè€Œéç£ç›˜ï¼‰ã€‚</li><li><strong>ä½¿ç”¨é«˜æ•ˆçš„æ•°æ®ç»“æ„</strong> è¿›è¡Œæ•°æ®å­˜å‚¨å’ŒæŸ¥æ‰¾ã€‚</li><li><strong>å•çº¿ç¨‹ + I/O å¤šè·¯å¤ç”¨</strong>ï¼Œé¿å…äº†å¤šçº¿ç¨‹çš„ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œæé«˜æ€§èƒ½ã€‚</li></ol><hr><h2 id="ä¸ºä»€ä¹ˆ-Redis-é‡‡ç”¨å•çº¿ç¨‹ï¼Ÿ">ä¸ºä»€ä¹ˆ Redis é‡‡ç”¨å•çº¿ç¨‹ï¼Ÿ</h2><ul><li>Redis çš„ç“¶é¢ˆä¸åœ¨ <strong>CPU</strong>ï¼Œè€Œåœ¨ <strong>ç½‘ç»œ I/O å’Œé”®å€¼å¯¹æ“ä½œ</strong>ï¼Œå› æ­¤ä½¿ç”¨å•çº¿ç¨‹å¤„ç†è¯·æ±‚ã€‚</li><li>æŒä¹…åŒ–ç­‰æ“ä½œç”±åå°çº¿ç¨‹å®Œæˆï¼Œå¹¶ä¸ä¼šå½±å“ä¸»çº¿ç¨‹çš„å¤„ç†æ€§èƒ½ã€‚</li></ul><hr><h2 id="Redis-è·³è¡¨å®ç°">Redis è·³è¡¨å®ç°</h2><p>ï¼ˆç•¥ï¼‰</p><hr><h2 id="Redis-å’Œ-Memcached-çš„åŒºåˆ«">Redis å’Œ Memcached çš„åŒºåˆ«</h2><table><thead><tr><th>ç‰¹æ€§</th><th>Redis</th><th>Memcached</th></tr></thead><tbody><tr><td>æ•°æ®ç±»å‹</td><td>ä¸°å¯Œï¼ˆStringã€Hashã€Listã€Setã€Sorted Setï¼‰</td><td>ä»…æ”¯æŒé”®å€¼å¯¹ï¼ˆK-Vï¼‰</td></tr><tr><td>æŒä¹…åŒ–</td><td>æ”¯æŒï¼ˆRDBã€AOFï¼‰</td><td>ä¸æ”¯æŒ</td></tr><tr><td>äº‹åŠ¡</td><td>æ”¯æŒï¼ˆä½†ä¸æ”¯æŒå›æ»šï¼‰</td><td>ä¸æ”¯æŒ</td></tr><tr><td>å†…å­˜å ç”¨</td><td>è¾ƒé«˜</td><td>è¾ƒä½</td></tr><tr><td>é€Ÿåº¦</td><td>å¿«</td><td>æ›´å¿«</td></tr><tr><td>ä½¿ç”¨åœºæ™¯</td><td>å¤šç§ï¼ˆç¼“å­˜ã€é˜Ÿåˆ—ã€åˆ†å¸ƒå¼é”ç­‰ï¼‰</td><td>ä¸»è¦ç”¨äºç¼“å­˜</td></tr></tbody></table><hr><h2 id="Redis-äº‹åŠ¡-vs-MySQL-äº‹åŠ¡">Redis äº‹åŠ¡ vs MySQL äº‹åŠ¡</h2><ul><li>Redis äº‹åŠ¡æœ¬è´¨ä¸Šæ˜¯ <strong>å¤šä¸ªå‘½ä»¤çš„åŸå­æ€§æ‰§è¡Œ</strong>ï¼Œæ‰§è¡ŒæœŸé—´ä¸ä¼šè¢«æ‰“æ–­ã€‚</li><li>ä½† Redis <strong>ä¸æ”¯æŒäº‹åŠ¡å›æ»š</strong>ï¼Œä¸€æ—¦æ‰§è¡Œï¼Œæ— æ³•æ’¤é”€ã€‚</li></ul><hr><blockquote><p><strong>PS:</strong> <code>-1</code> è¡¨ç¤ºå€’æ•°ç¬¬ä¸€ä¸ªï¼ŒèŒƒå›´éå† <code>0</code> åˆ°æœ€åä¸€ä¸ªå…ƒç´ ã€‚<br><strong>PS:</strong> <code>user</code> åœ¨è¿™é‡Œæ˜¯è¡¨åï¼Œ<code>name</code> æ˜¯ keyã€‚</p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;figure class=&quot;highlight markdown&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span cl</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>linuxä¸€äº›å¥½ç”¨çš„æ“ä½œ</title>
    <link href="https://eatbreads.github.io/posts/83cfdf8d.html"/>
    <id>https://eatbreads.github.io/posts/83cfdf8d.html</id>
    <published>2025-03-09T15:43:14.000Z</published>
    <updated>2025-03-23T16:00:52.015Z</updated>
    
    <content type="html"><![CDATA[<h1>Linux çŸ¥è¯†æ•´ç†</h1><h2 id="è½¯ç¡¬é“¾æ¥çš„åŒºåˆ«">è½¯ç¡¬é“¾æ¥çš„åŒºåˆ«</h2><h3 id="ç¡¬é“¾æ¥">ç¡¬é“¾æ¥</h3><p>ç¡¬é“¾æ¥æ›´åƒæ˜¯åˆ›å»ºå‡ºäº† <code>shared_ptr</code> æ™ºèƒ½æŒ‡é’ˆï¼ŒåŸé“¾æ¥å’Œç¡¬é“¾æ¥éƒ½å˜æˆæ™ºèƒ½æŒ‡é’ˆï¼Œåˆ é™¤å…¶ä¸­ä¸€ä¸ªä¸ä¼šä½¿å¾—æ–‡ä»¶å¤±æ•ˆã€‚ä½†æ˜¯ï¼š</p><ul><li><strong>ä¸èƒ½è·¨æ–‡ä»¶ç³»ç»Ÿ</strong></li><li><strong>ä¸èƒ½é“¾æ¥ç›®å½•</strong></li></ul><p><strong>åˆ›å»ºç¡¬é“¾æ¥ï¼š</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ln</span> file.txt file_link.txt</span><br></pre></td></tr></table></figure><h3 id="è½¯é“¾æ¥">è½¯é“¾æ¥</h3><p>è½¯é“¾æ¥å°±åƒæ˜¯åŸæ¥æ–‡ä»¶çš„å¼•ç”¨ï¼Œåˆ é™¤åŸæ–‡ä»¶å°±ä¼šå¯¼è‡´å˜æˆç©ºæ‚¬é“¾æ¥ï¼ˆDangling Linkï¼‰ã€‚</p><p><strong>åˆ›å»ºè½¯é“¾æ¥ï¼š</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ln</span> -s file.txt file_link.txt</span><br></pre></td></tr></table></figure><hr><h2 id="ä½¿ç”¨-crontab">ä½¿ç”¨ <code>crontab</code></h2><p><code>crontab</code> å¯ç”¨äºå®šæ—¶æ‰§è¡Œä»»åŠ¡ï¼Œå¸¸è§æ“ä½œå¦‚ä¸‹ï¼š</p><hr><h2 id="æŸ¥çœ‹æŸä¸ªè¿›ç¨‹çš„ä½¿ç”¨æƒ…å†µ">æŸ¥çœ‹æŸä¸ªè¿›ç¨‹çš„ä½¿ç”¨æƒ…å†µ</h2><h3 id="ä½¿ç”¨-ps-å‘½ä»¤"><strong>ä½¿ç”¨ <code>ps</code> å‘½ä»¤</strong></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps -p 1234 -o %mem,%cpu,vsz,rss</span><br></pre></td></tr></table></figure><ul><li><code>%mem</code>ï¼šæŸ¥çœ‹è¿›ç¨‹ä½¿ç”¨çš„å†…å­˜å æ¯”</li><li><code>%cpu</code>ï¼šæŸ¥çœ‹è¿›ç¨‹å ç”¨çš„ CPU</li><li><code>vsz</code>ï¼šæŸ¥çœ‹è™šæ‹Ÿå†…å­˜å¤§å°</li><li><code>rss</code>ï¼šæŸ¥çœ‹å¸¸é©»å†…å­˜å¤§å°</li></ul><h3 id="ä½¿ç”¨-top-å‘½ä»¤"><strong>ä½¿ç”¨ <code>top</code> å‘½ä»¤</strong></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">top -p 1234</span><br></pre></td></tr></table></figure><ul><li><code>PR</code>ï¼šè¿›ç¨‹ä¼˜å…ˆçº§</li><li><code>NI</code>ï¼šè¿›ç¨‹ Nice å€¼</li><li><code>VIRT</code>ï¼šè™šæ‹Ÿå†…å­˜æ€»é‡</li><li><code>RES</code>ï¼šç‰©ç†å†…å­˜</li><li><code>SHR</code>ï¼šå…±äº«å†…å­˜</li><li><code>S</code>ï¼šè¿›ç¨‹çŠ¶æ€</li><li><code>COMMAND</code>ï¼šæ‰§è¡Œçš„å…·ä½“å‘½ä»¤</li></ul><hr><h2 id="æ”¹å˜ç”¨æˆ·æƒé™">æ”¹å˜ç”¨æˆ·æƒé™</h2><p>ä½¿ç”¨ <code>chmod</code> å‘½ä»¤ä¿®æ”¹æ–‡ä»¶æƒé™ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chmod</span> 755 /project/hello.sh</span><br></pre></td></tr></table></figure><ul><li><strong>ç¬¬ä¸€ä¸ªæ•°å­—ï¼ˆ7ï¼‰</strong>ï¼šæ–‡ä»¶æ‰€æœ‰è€…ï¼ˆå¯è¯»ã€å¯å†™ã€å¯æ‰§è¡Œï¼‰</li><li><strong>ç¬¬äºŒä¸ªæ•°å­—ï¼ˆ5ï¼‰</strong>ï¼šåŒç»„ç”¨æˆ·ï¼ˆå¯è¯»ã€å¯æ‰§è¡Œï¼‰</li><li><strong>ç¬¬ä¸‰ä¸ªæ•°å­—ï¼ˆ5ï¼‰</strong>ï¼šå…¶ä»–ç”¨æˆ·ï¼ˆå¯è¯»ã€å¯æ‰§è¡Œï¼‰</li></ul><hr><h2 id="æŸ¥æ‰¾æŸä¸ªç›®å½•ä¸‹åŒ…å«ç‰¹å®šå­—ç¬¦ä¸²çš„æ–‡ä»¶">æŸ¥æ‰¾æŸä¸ªç›®å½•ä¸‹åŒ…å«ç‰¹å®šå­—ç¬¦ä¸²çš„æ–‡ä»¶</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep -rl <span class="string">&quot;ç‰¹å®šå­—ç¬¦ä¸²&quot;</span> /path/to/directory</span><br></pre></td></tr></table></figure><ul><li><code>-r</code>ï¼šé€’å½’æŸ¥æ‰¾</li><li><code>-l</code>ï¼šä»…æ˜¾ç¤ºåŒ…å«è¯¥å­—ç¬¦ä¸²çš„æ–‡ä»¶å</li></ul><hr><h2 id="Linux-å’Œ-Windows-çš„è™šæ‹Ÿå†…å­˜æœºåˆ¶">Linux å’Œ Windows çš„è™šæ‹Ÿå†…å­˜æœºåˆ¶</h2><ul><li><strong>Windows</strong>ï¼šä¸»è¦ä½¿ç”¨ <strong>åˆ†é¡µ + åˆ†æ®µ</strong> æœºåˆ¶</li><li><strong>Linux</strong>ï¼šåŸºæœ¬åªä½¿ç”¨ <strong>åˆ†é¡µ</strong> æœºåˆ¶</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h1&gt;Linux çŸ¥è¯†æ•´ç†&lt;/h1&gt;
&lt;h2 id=&quot;è½¯ç¡¬é“¾æ¥çš„åŒºåˆ«&quot;&gt;è½¯ç¡¬é“¾æ¥çš„åŒºåˆ«&lt;/h2&gt;
&lt;h3 id=&quot;ç¡¬é“¾æ¥&quot;&gt;ç¡¬é“¾æ¥&lt;/h3&gt;
&lt;p&gt;ç¡¬é“¾æ¥æ›´åƒæ˜¯åˆ›å»ºå‡ºäº† &lt;code&gt;shared_ptr&lt;/code&gt; æ™ºèƒ½æŒ‡é’ˆï¼ŒåŸé“¾æ¥å’Œç¡¬é“¾æ¥éƒ½å˜æˆæ™ºèƒ½æŒ‡é’ˆï¼Œåˆ é™¤å…¶ä¸­ä¸€ä¸ªä¸ä¼šä½¿å¾—</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>MySQL è¿›é˜¶ä¸æ¶æ„ä¼˜åŒ–</title>
    <link href="https://eatbreads.github.io/posts/7d06a385.html"/>
    <id>https://eatbreads.github.io/posts/7d06a385.html</id>
    <published>2025-03-07T16:00:00.000Z</published>
    <updated>2025-03-21T16:02:18.693Z</updated>
    
    <content type="html"><![CDATA[<h2 id="MySQL-äº‹åŠ¡ä¸é”">MySQL äº‹åŠ¡ä¸é”</h2><h3 id="é”çš„ç±»å‹">é”çš„ç±»å‹</h3><ul><li><strong>è¡Œçº§é”</strong>ï¼šé”ä½ä¸€è¡Œæ•°æ®ï¼Œæé«˜å¹¶å‘èƒ½åŠ›ã€‚</li><li><strong>è¡¨çº§é”</strong>ï¼šé”ä½æ•´ä¸ªè¡¨ï¼Œé€‚ç”¨äºå¤§æ‰¹é‡æ“ä½œã€‚</li><li><strong>æ„å‘é”</strong>ï¼šè¡¨çº§åˆ«çš„æ ‡è®°ï¼Œç”¨äºåŠ é€Ÿè¡Œé”æ£€æµ‹ã€‚</li><li><strong>ä¹è§‚é”</strong>ï¼šä¸åŠ é”ï¼Œä¾èµ–ç‰ˆæœ¬å·æ§åˆ¶å¹¶å‘æ›´æ–°ã€‚</li><li><strong>æ‚²è§‚é”</strong>ï¼šå…ˆé”åæ“ä½œï¼Œé€‚ç”¨äºé«˜å¹¶å‘ç«äº‰åœºæ™¯ã€‚</li></ul><h3 id="æ­»é”çš„å¤„ç†">æ­»é”çš„å¤„ç†</h3><ol><li><strong>MySQL æ­»é”æ£€æµ‹</strong>ï¼šè‡ªåŠ¨å›æ»šä»£ä»·æœ€å°çš„äº‹åŠ¡ã€‚</li><li><strong>æ‰‹åŠ¨ <code>KILL</code> äº‹åŠ¡</strong>ï¼šæ‰‹åŠ¨ç»ˆæ­¢é•¿æ—¶é—´é˜»å¡äº‹åŠ¡ã€‚</li><li><strong>ä¼˜åŒ–ç´¢å¼•ä¸ SQL è¯­å¥</strong>ï¼šå‡å°‘é”å†²çªï¼Œé™ä½æ­»é”æ¦‚ç‡ã€‚</li></ol><h2 id="MySQL-è¯»å†™åˆ†ç¦»ä¸ä¸»ä»åŒæ­¥">MySQL è¯»å†™åˆ†ç¦»ä¸ä¸»ä»åŒæ­¥</h2><ul><li><strong>ä¸»ä»æ¶æ„</strong>ï¼šä¸»åº“å¤„ç†å†™æ“ä½œï¼Œä»åº“å¤„ç†è¯»æ“ä½œã€‚</li><li><strong>Binlog å®ç°ä¸»ä»åŒæ­¥</strong>ï¼š<ol><li>ä¸»åº“è®°å½• Binlogã€‚</li><li>ä»åº“è¯»å– Binlog å¹¶é‡æ”¾ã€‚</li></ol></li><li><strong>é¿å…ä¸»ä»åŒæ­¥å»¶è¿Ÿ</strong>ï¼š<ul><li>å…³é”®ä¸šåŠ¡æŸ¥è¯¢ä¸»åº“ã€‚</li><li>äºŒæ¬¡æŸ¥è¯¢ç­–ç•¥ï¼ˆä»åº“æŸ¥ä¸åˆ°å†æŸ¥ä¸»åº“ï¼‰ã€‚</li></ul></li></ul><h2 id="åˆ†åº“åˆ†è¡¨ç­–ç•¥">åˆ†åº“åˆ†è¡¨ç­–ç•¥</h2><h3 id="æ°´å¹³æ‹†åˆ†"><strong>æ°´å¹³æ‹†åˆ†</strong></h3><ul><li><strong>æ°´å¹³åˆ†è¡¨</strong>ï¼šå°†ä¸€å¼ å¤§è¡¨æ‹†æˆå¤šå¼ å°è¡¨ï¼ˆå¦‚ <code>users_0</code>, <code>users_1</code>ï¼‰ã€‚</li><li><strong>æ°´å¹³åˆ†åº“</strong>ï¼šå¤šä¸ªæ•°æ®åº“å­˜ç›¸åŒç»“æ„çš„è¡¨ï¼Œé™ä½å•åº“å‹åŠ›ã€‚</li></ul><h3 id="å‚ç›´æ‹†åˆ†"><strong>å‚ç›´æ‹†åˆ†</strong></h3><ul><li><strong>å‚ç›´åˆ†è¡¨</strong>ï¼šå°†ä¸€å¼ è¡¨çš„ä¸åŒå­—æ®µæ‹†æˆå¤šå¼ è¡¨ï¼ˆå¦‚ <code>user_base</code> å’Œ <code>user_detail</code>ï¼‰ã€‚</li><li><strong>å‚ç›´åˆ†åº“</strong>ï¼šä¸åŒä¸šåŠ¡æ•°æ®å­˜å…¥ä¸åŒæ•°æ®åº“ï¼ˆå¦‚ <code>order_db</code> å’Œ <code>user_db</code>ï¼‰ã€‚</li></ul><h3 id="åˆ†åº“åˆ†è¡¨çš„æŒ‘æˆ˜"><strong>åˆ†åº“åˆ†è¡¨çš„æŒ‘æˆ˜</strong></h3><ul><li><strong>è·¨åº“ JOIN å—é™</strong>ï¼šéœ€æ”¹ä¸ºåº”ç”¨å±‚æŸ¥è¯¢æˆ–ä½¿ç”¨ä¸­é—´ä»¶ï¼ˆå¦‚ ShardingSphereï¼‰ã€‚</li><li><strong>äº‹åŠ¡ä¸€è‡´æ€§é—®é¢˜</strong>ï¼šéœ€è¦åˆ†å¸ƒå¼äº‹åŠ¡æ–¹æ¡ˆï¼ˆå¦‚ TCCã€æœ€ç»ˆä¸€è‡´æ€§ï¼‰ã€‚</li></ul><h2 id="MySQL-é«˜å¯ç”¨æ¶æ„">MySQL é«˜å¯ç”¨æ¶æ„</h2><h3 id="é¿å…å•ç‚¹æ•…éšœ"><strong>é¿å…å•ç‚¹æ•…éšœ</strong></h3><ul><li><strong>ä¸»ä»å¤åˆ¶</strong>ï¼šå•ä¸»å¤šä»æ¶æ„ï¼Œä¿è¯æ•°æ®å¯ç”¨æ€§ã€‚</li><li><strong>MHAï¼ˆMySQL High Availabilityï¼‰</strong>ï¼šè‡ªåŠ¨æ•…éšœåˆ‡æ¢ï¼Œæ”¯æŒä¸»ä»åˆ‡æ¢ã€‚</li><li><strong>PXCï¼ˆPercona XtraDB Clusterï¼‰</strong>ï¼šå¤šä¸»é›†ç¾¤ï¼Œä¿è¯é«˜å¯ç”¨ã€‚</li></ul><h3 id="ä¸åœæœºæ•°æ®è¿ç§»"><strong>ä¸åœæœºæ•°æ®è¿ç§»</strong></h3><ol><li><strong>åŒå†™æ–¹æ¡ˆ</strong><ul><li>ä»£ç å±‚é¢åŒå†™ï¼šæ–°æ—§åº“åŒæ­¥å†™å…¥ã€‚</li><li>ä¸šåŠ¡ä½å³°æœŸåœä¸»ä»åŒæ­¥ï¼Œå¼€å¯åŒå†™ã€‚</li><li>é€æ­¥ç°åº¦åˆ‡æµï¼Œä¿è¯æ•°æ®ä¸€è‡´ã€‚</li></ul></li><li><strong>Flink CDC æ–¹æ¡ˆ</strong><ul><li>ç›‘å¬ Binlog å˜æ›´ï¼Œå®æ—¶åŒæ­¥æ•°æ®ã€‚</li></ul></li></ol><h2 id="MySQL-å­˜å‚¨ä¸æ€§èƒ½ä¼˜åŒ–">MySQL å­˜å‚¨ä¸æ€§èƒ½ä¼˜åŒ–</h2><h3 id="WALï¼ˆWrite-Ahead-Loggingï¼‰"><strong>WALï¼ˆWrite-Ahead Loggingï¼‰</strong></h3><ul><li><strong>å…ˆå†™æ—¥å¿—å†å†™æ•°æ®</strong>ï¼Œç¡®ä¿æ•°æ®æŒä¹…åŒ–ã€‚</li><li><strong>é™ä½ç£ç›˜ IO</strong>ï¼Œæé«˜äº‹åŠ¡ååé‡ã€‚</li></ul><h3 id="Doublewrite-Buffer"><strong>Doublewrite Buffer</strong></h3><ul><li><strong>é˜²æ­¢æ•°æ®å†™å…¥å¤±è´¥</strong>ï¼Œé¿å…æ•°æ®æŸåã€‚</li></ul><h3 id="MySQL-ç¼“å­˜ä¼˜åŒ–"><strong>MySQL ç¼“å­˜ä¼˜åŒ–</strong></h3><ul><li><strong>Buffer Pool</strong>ï¼šç¼“å­˜å¸¸ç”¨æ•°æ®ï¼Œå‡å°‘ç£ç›˜ IOã€‚</li><li><strong>Query Cacheï¼ˆå·²åºŸå¼ƒï¼‰</strong>ï¼šç¼“å­˜æŸ¥è¯¢ç»“æœï¼Œå‡å°‘ SQL è§£ææ—¶é—´ã€‚</li></ul><h2 id="MySQL-å…¶ä»–é«˜çº§ç‰¹æ€§">MySQL å…¶ä»–é«˜çº§ç‰¹æ€§</h2><h3 id="å­˜åœ¨æ€§æŸ¥è¯¢ï¼šEXISTS-vs-IN"><strong>å­˜åœ¨æ€§æŸ¥è¯¢ï¼šEXISTS vs. IN</strong></h3><ul><li><strong>EXISTS</strong>ï¼šé€‚ç”¨äºå¤§æ•°æ®é›†åˆï¼Œåªå…³å¿ƒæ˜¯å¦å­˜åœ¨ã€‚</li><li><strong>IN</strong>ï¼šé€‚ç”¨äºå°æ•°æ®é›†åˆï¼Œç›´æ¥åŒ¹é…ç­›é€‰ã€‚</li></ul><h3 id="å­˜å‚¨è¿‡ç¨‹"><strong>å­˜å‚¨è¿‡ç¨‹</strong></h3><ul><li><strong>ä¼˜ç‚¹</strong>ï¼šå°è£…é€»è¾‘ï¼Œæé«˜æ€§èƒ½ã€‚</li><li><strong>ç¼ºç‚¹</strong>ï¼š<ul><li>å¯ç§»æ¤æ€§å·®ï¼Œä¸åŒæ•°æ®åº“çš„ SQL è¯­æ³•å¯èƒ½ä¸å…¼å®¹ã€‚</li><li>è°ƒè¯•å›°éš¾ï¼Œä¸åˆ©äºä»£ç ç®¡ç†ï¼ˆé˜¿é‡Œå¼€å‘æ‰‹å†Œä¸æ¨èï¼‰ã€‚</li></ul></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;MySQL-äº‹åŠ¡ä¸é”&quot;&gt;MySQL äº‹åŠ¡ä¸é”&lt;/h2&gt;
&lt;h3 id=&quot;é”çš„ç±»å‹&quot;&gt;é”çš„ç±»å‹&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è¡Œçº§é”&lt;/strong&gt;ï¼šé”ä½ä¸€è¡Œæ•°æ®ï¼Œæé«˜å¹¶å‘èƒ½åŠ›ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¡¨çº§é”&lt;/strong&gt;ï¼šé”ä½æ•´ä¸ªè¡¨</summary>
      
    
    
    
    <category term="æ•°æ®åº“" scheme="https://eatbreads.github.io/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
    
    <category term="MySQL" scheme="https://eatbreads.github.io/tags/MySQL/"/>
    
    <category term="æ•°æ®åº“" scheme="https://eatbreads.github.io/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
    <category term="ä¼˜åŒ–" scheme="https://eatbreads.github.io/tags/%E4%BC%98%E5%8C%96/"/>
    
  </entry>
  
  <entry>
    <title>MySQL æ ¸å¿ƒçŸ¥è¯†ç‚¹æ•´ç†</title>
    <link href="https://eatbreads.github.io/posts/cdec3315.html"/>
    <id>https://eatbreads.github.io/posts/cdec3315.html</id>
    <published>2025-03-07T16:00:00.000Z</published>
    <updated>2025-03-21T16:02:18.706Z</updated>
    
    <content type="html"><![CDATA[<h2 id="MySQL-æ•°æ®æ’åº">MySQL æ•°æ®æ’åº</h2><p>MySQL çš„æ•°æ®æ’åºä¸»è¦æœ‰ä¸¤ç§æ–¹å¼ï¼š</p><ul><li><strong>æœ‰ç´¢å¼•</strong>ï¼šç›´æ¥æŒ‰ç…§ç´¢å¼•æ’åºã€‚</li><li><strong>æ— ç´¢å¼•</strong>ï¼šé‡‡ç”¨æ–‡ä»¶æ’åºã€‚<ul><li><strong>æ•°æ®é‡å°‘</strong>ï¼šå†…å­˜æ’åºï¼Œä½¿ç”¨å•è·¯æˆ–åŒè·¯æ’åºï¼ˆç±»ä¼¼äºç”¨ä¸€åªæ‰‹æˆ–ä¸¤åªæ‰‹æŠ“æ•°æ®ï¼‰ã€‚</li><li><strong>æ•°æ®é‡å¤§</strong>ï¼šç£ç›˜æ’åºï¼Œé€šå¸¸é‡‡ç”¨å½’å¹¶æ’åºã€‚</li></ul></li></ul><h2 id="SQL-è¯­å¥çš„æ‰§è¡Œé¡ºåº">SQL è¯­å¥çš„æ‰§è¡Œé¡ºåº</h2><ol><li>è¿æ¥å™¨æ ¡éªŒæƒé™ã€‚</li><li>åˆ†æå™¨è§£æ SQL è¯­æ³•ï¼Œæ„å»ºè§£ææ ‘ã€‚</li><li>ä¼˜åŒ–å™¨é€‰æ‹©åˆé€‚çš„ç´¢å¼•å’Œè¡¨è¿æ¥é¡ºåºï¼Œç”Ÿæˆå¤šä¸ªæ‰§è¡Œè®¡åˆ’ï¼Œé€‰æ‹©æˆæœ¬æœ€ä½çš„æ‰§è¡Œã€‚</li><li>æ‰§è¡Œå™¨è°ƒç”¨å­˜å‚¨å¼•æ“æŸ¥è¯¢æ•°æ®å¹¶è¿”å›ã€‚</li></ol><h2 id="MySQL-çš„å­˜å‚¨å¼•æ“">MySQL çš„å­˜å‚¨å¼•æ“</h2><ul><li><strong>InnoDB</strong>ï¼šæ”¯æŒäº‹åŠ¡ã€è¡Œçº§é”ã€å¤–é”®ï¼Œé»˜è®¤å­˜å‚¨å¼•æ“ã€‚</li><li><strong>MyISAM</strong>ï¼šä¸æ”¯æŒäº‹åŠ¡ï¼Œè¯»å–æ€§èƒ½é«˜ï¼Œé€‚åˆæŸ¥è¯¢å¯†é›†å‹ä¸šåŠ¡ã€‚</li></ul><h2 id="MySQL-ç´¢å¼•ç±»å‹">MySQL ç´¢å¼•ç±»å‹</h2><ul><li><strong>æ™®é€šç´¢å¼•ï¼ˆè¾…åŠ©ç´¢å¼•ï¼‰</strong>ï¼šæå‡æŸ¥è¯¢æ•ˆç‡ï¼Œä½†ä¸ä¿è¯å”¯ä¸€æ€§ã€‚</li><li><strong>ä¸»é”®ç´¢å¼•ï¼ˆèšç°‡ç´¢å¼•ï¼‰</strong>ï¼šæ•°æ®å­˜å‚¨åœ¨ B+ æ ‘å¶å­èŠ‚ç‚¹ï¼ŒæŸ¥è¯¢æ•ˆç‡é«˜ã€‚</li><li><strong>å”¯ä¸€ç´¢å¼•</strong>ï¼šç¡®ä¿å­—æ®µå€¼å”¯ä¸€ï¼ŒæŸ¥è¯¢é€Ÿåº¦å¿«ã€‚</li><li><strong>è”åˆç´¢å¼•</strong>ï¼šå¤šä¸ªå­—æ®µç»„åˆå»ºç«‹ç´¢å¼•ï¼Œéµå¾ªæœ€å·¦å‰ç¼€åŒ¹é…åŸåˆ™ã€‚</li><li><strong>å…¨æ–‡ç´¢å¼•</strong>ï¼šé€‚ç”¨äºé•¿æ–‡æœ¬çš„æ¨¡ç³ŠæŸ¥è¯¢ã€‚</li><li><strong>ç©ºé—´ç´¢å¼•</strong>ï¼šå­˜å‚¨åœ°ç†ä½ç½®ä¿¡æ¯ï¼Œå¦‚ç»çº¬åº¦ã€‚</li></ul><h2 id="MySQL-äº‹åŠ¡">MySQL äº‹åŠ¡</h2><h3 id="äº‹åŠ¡çš„å®ç°">äº‹åŠ¡çš„å®ç°</h3><ol><li><strong>é”</strong>ï¼šç¡®ä¿æ•°æ®ä¸€è‡´æ€§ï¼Œé¿å…å¹¶å‘å†²çªã€‚</li><li><strong>undo log</strong>ï¼šè®°å½•äº‹åŠ¡å‰çš„æ•°æ®ï¼Œå›æ»šæ—¶ä½¿ç”¨ã€‚</li><li><strong>redo log</strong>ï¼šè®°å½•å·²æäº¤äº‹åŠ¡çš„ä¿®æ”¹ï¼Œå´©æºƒåå¯æ¢å¤ã€‚</li><li><strong>MVCCï¼ˆå¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ï¼‰</strong>ï¼šå…è®¸äº‹åŠ¡è¯»å–å¿«ç…§æ•°æ®ï¼Œæé«˜å¹¶å‘æ€§èƒ½ã€‚</li></ol><h3 id="äº‹åŠ¡çš„éš”ç¦»çº§åˆ«">äº‹åŠ¡çš„éš”ç¦»çº§åˆ«</h3><table><thead><tr><th>éš”ç¦»çº§åˆ«</th><th>è¯´æ˜</th><th>å¯èƒ½é—®é¢˜</th></tr></thead><tbody><tr><td>è¯»æœªæäº¤</td><td>å¯ä»¥è¯»åˆ°æœªæäº¤æ•°æ®</td><td>è„è¯»</td></tr><tr><td>è¯»å·²æäº¤</td><td>åªèƒ½è¯»åˆ°å·²æäº¤æ•°æ®</td><td>ä¸å¯é‡å¤è¯»</td></tr><tr><td>å¯é‡å¤è¯»</td><td>äº‹åŠ¡ä¸­å¤šæ¬¡æŸ¥è¯¢æ•°æ®ä¸å˜</td><td>å¹»è¯»</td></tr><tr><td>ä¸²è¡ŒåŒ–</td><td>äº‹åŠ¡ä¸²è¡Œæ‰§è¡Œ</td><td>å½±å“æ€§èƒ½</td></tr></tbody></table><h3 id="äºŒé˜¶æ®µæäº¤ï¼ˆ2PCï¼‰">äºŒé˜¶æ®µæäº¤ï¼ˆ2PCï¼‰</h3><ol><li><strong>å‡†å¤‡é˜¶æ®µ</strong>ï¼šåè°ƒè€…é€šçŸ¥å‚ä¸è€…æ‰§è¡Œäº‹åŠ¡ï¼Œæ‰€æœ‰å‚ä¸è€…å…ˆå†™å…¥æ—¥å¿—ä½†ä¸æäº¤ã€‚</li><li><strong>æäº¤é˜¶æ®µ</strong>ï¼šæ‰€æœ‰å‚ä¸è€…éƒ½å‡†å¤‡å¥½åï¼Œåè°ƒè€…é€šçŸ¥æäº¤ï¼Œå¦åˆ™å›æ»šã€‚</li></ol><h2 id="MySQL-å¸¸è§ä¼˜åŒ–">MySQL å¸¸è§ä¼˜åŒ–</h2><ul><li><strong>ä½¿ç”¨ç´¢å¼•</strong>ï¼šé¿å…æ— ç´¢å¼•å­—æ®µæ’åºï¼Œå°½é‡ä½¿ç”¨è¦†ç›–ç´¢å¼•ã€‚</li><li><strong>é¿å…ä½¿ç”¨ <code>LIKE %XXX%</code></strong>ï¼šä¼šå¯¼è‡´å…¨è¡¨æ‰«æã€‚</li><li><strong>EXPLAIN åˆ†ææ‰§è¡Œè®¡åˆ’</strong>ï¼šæŸ¥çœ‹æ˜¯å¦èµ°ç´¢å¼•ã€æ˜¯å¦å…¨è¡¨æ‰«æã€‚</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;MySQL-æ•°æ®æ’åº&quot;&gt;MySQL æ•°æ®æ’åº&lt;/h2&gt;
&lt;p&gt;MySQL çš„æ•°æ®æ’åºä¸»è¦æœ‰ä¸¤ç§æ–¹å¼ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æœ‰ç´¢å¼•&lt;/strong&gt;ï¼šç›´æ¥æŒ‰ç…§ç´¢å¼•æ’åºã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ— ç´¢å¼•&lt;/strong&gt;ï¼šé‡‡ç”¨æ–‡ä»¶æ’åºã€‚</summary>
      
    
    
    
    <category term="æ•°æ®åº“" scheme="https://eatbreads.github.io/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
    
    <category term="MySQL" scheme="https://eatbreads.github.io/tags/MySQL/"/>
    
    <category term="æ•°æ®åº“" scheme="https://eatbreads.github.io/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
  </entry>
  
</feed>
