<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>æ¬¢è¿æ¥åˆ°å°é¢åŒ…çš„å°ç«™ğŸ¥</title>
  
  
  <link href="https://eatbreads.github.io/atom.xml" rel="self"/>
  
  <link href="https://eatbreads.github.io/"/>
  <updated>2025-04-17T15:28:53.308Z</updated>
  <id>https://eatbreads.github.io/</id>
  
  <author>
    <name>å°é¢åŒ…ğŸ¥</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>WebRTCçš„JavaScriptç®€å•å®ç°</title>
    <link href="https://eatbreads.github.io/posts/e8866bd2.html"/>
    <id>https://eatbreads.github.io/posts/e8866bd2.html</id>
    <published>2025-04-17T12:26:35.000Z</published>
    <updated>2025-04-17T15:28:53.308Z</updated>
    
    <content type="html"><![CDATA[<h1>WebRTCè§†é¢‘èŠå¤©å®ç°</h1><h2 id="æ ¸å¿ƒåŠŸèƒ½å®ç°">æ ¸å¿ƒåŠŸèƒ½å®ç°</h2><h3 id="1-è¯·æ±‚è®¿é—®ç”¨æˆ·è®¾å¤‡">1. è¯·æ±‚è®¿é—®ç”¨æˆ·è®¾å¤‡</h3><p>ä½¿ç”¨<code>navigator.mediaDevices.getUserMedia()</code>è¯·æ±‚è®¿é—®ç”¨æˆ·çš„æ‘„åƒå¤´å’Œéº¦å…‹é£</p><h3 id="2-åˆ›å»ºPeerè¿æ¥">2. åˆ›å»ºPeerè¿æ¥</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> peer = <span class="keyword">new</span> <span class="title class_">Peer</span>();</span><br><span class="line">peer.<span class="title function_">on</span>(<span class="string">&#x27;open&#x27;</span>, <span class="keyword">function</span>(<span class="params">id</span>) &#123;</span><br><span class="line">    <span class="comment">// è¿æ¥æˆåŠŸåè·å–ID</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="3-ç›‘å¬å¤–éƒ¨è¿æ¥">3. ç›‘å¬å¤–éƒ¨è¿æ¥</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">peer.<span class="title function_">on</span>(<span class="string">&#x27;call&#x27;</span>, <span class="keyword">function</span>(<span class="params">call</span>) &#123;</span><br><span class="line">    <span class="comment">// ç›‘å¬æ¥ç”µ</span></span><br><span class="line">    call.<span class="title function_">answer</span>(localStream);  <span class="comment">// å›å¤å¹¶å‘é€æœ¬åœ°è§†é¢‘æµ</span></span><br><span class="line">    call.<span class="title function_">on</span>(<span class="string">&#x27;stream&#x27;</span>, <span class="keyword">function</span>(<span class="params">remoteStream</span>) &#123;</span><br><span class="line">        <span class="comment">// ç›‘å¬å¯¹æ–¹çš„è¿œç¨‹è§†é¢‘æµ</span></span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="4-å‘èµ·é€šä¿¡">4. å‘èµ·é€šä¿¡</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer.<span class="title function_">call</span>(remoteId, localStream);</span><br></pre></td></tr></table></figure><h2 id="å®Œæ•´ä»£ç å®ç°">å®Œæ•´ä»£ç å®ç°</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>è§†é¢‘èŠå¤©<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.bootcdn.net/ajax/libs/peerjs/1.3.1/peerjs.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>æœ¬åœ°è§†é¢‘<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">video</span> <span class="attr">id</span>=<span class="string">&quot;localVideo&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 400px;height: 300px;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">video</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;text-align: left&quot;</span>&gt;</span></span><br><span class="line">    è‡ªå·±ID<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;myPeerid&quot;</span>/&gt;</span>(è‡ªåŠ¨è·å–)</span><br><span class="line">    å¯¹æ–¹ID<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;youPeerid&quot;</span>/&gt;</span>(è¯·æ‰‹åŠ¨è¾“å…¥)</span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;callBtn&quot;</span>&gt;</span>èŠå¤©<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>è¿œç¨‹è§†é¢‘<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">video</span> <span class="attr">id</span>=<span class="string">&quot;remoteVideo&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 400px;height: 300px;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">video</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//è®¿é—®ç”¨æˆ·åª’ä½“è®¾å¤‡çš„å…¼å®¹æ–¹æ³•</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">getUserMedia</span>(<span class="params">constrains,success,error</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">if</span>(navigator.<span class="property">mediaDevices</span>.<span class="property">getUserMedia</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//æœ€æ–°æ ‡å‡†API</span></span></span><br><span class="line"><span class="language-javascript">            navigator.<span class="property">mediaDevices</span>.<span class="title function_">getUserMedia</span>(constrains).<span class="title function_">then</span>(success).<span class="title function_">catch</span>(error);</span></span><br><span class="line"><span class="language-javascript">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (navigator.<span class="property">webkitGetUserMedia</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//webkitå†…æ ¸æµè§ˆå™¨</span></span></span><br><span class="line"><span class="language-javascript">            navigator.<span class="title function_">webkitGetUserMedia</span>(constrains).<span class="title function_">then</span>(success).<span class="title function_">catch</span>(error);</span></span><br><span class="line"><span class="language-javascript">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (navigator.<span class="property">mozGetUserMedia</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//Firefoxæµè§ˆå™¨</span></span></span><br><span class="line"><span class="language-javascript">            navagator.<span class="title function_">mozGetUserMedia</span>(constrains).<span class="title function_">then</span>(success).<span class="title function_">catch</span>(error);</span></span><br><span class="line"><span class="language-javascript">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (navigator.<span class="property">getUserMedia</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//æ—§ç‰ˆAPI</span></span></span><br><span class="line"><span class="language-javascript">            navigator.<span class="title function_">getUserMedia</span>(constrains).<span class="title function_">then</span>(success).<span class="title function_">catch</span>(error);</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> localVideo = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;video#localVideo&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> remoteVideo = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;video#remoteVideo&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> localStream = <span class="literal">null</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    $(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// è·å–æœ¬åœ°åª’ä½“æµ</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">getUserMedia</span>(&#123;<span class="attr">video</span>: <span class="literal">true</span>, <span class="attr">audio</span>: <span class="literal">true</span>&#125;, <span class="keyword">function</span>(<span class="params">stream</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            localStream = stream;</span></span><br><span class="line"><span class="language-javascript">            localVideo.<span class="property">srcObject</span> = stream;</span></span><br><span class="line"><span class="language-javascript">            localVideo.<span class="property">autoplay</span> = <span class="literal">true</span>;</span></span><br><span class="line"><span class="language-javascript">            localVideo.<span class="title function_">play</span>();</span></span><br><span class="line"><span class="language-javascript">        &#125;, <span class="keyword">function</span>(<span class="params">err</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Failed to get local stream&#x27;</span> ,err);</span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript"> </span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// åˆ›å»ºPeerè¿æ¥</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> peer = <span class="keyword">new</span> <span class="title class_">Peer</span>();</span></span><br><span class="line"><span class="language-javascript">        peer.<span class="title function_">on</span>(<span class="string">&#x27;open&#x27;</span>, <span class="keyword">function</span>(<span class="params">id</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            $(<span class="string">&quot;#myPeerid&quot;</span>).<span class="title function_">val</span>(id);</span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// ç›‘å¬å‘¼å«</span></span></span><br><span class="line"><span class="language-javascript">        peer.<span class="title function_">on</span>(<span class="string">&#x27;call&#x27;</span>, <span class="keyword">function</span>(<span class="params">call</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            call.<span class="title function_">answer</span>(localStream);</span></span><br><span class="line"><span class="language-javascript">            call.<span class="title function_">on</span>(<span class="string">&#x27;stream&#x27;</span>, <span class="keyword">function</span>(<span class="params">remoteStream</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">console</span>.<span class="title function_">log</span>(remoteStream);</span></span><br><span class="line"><span class="language-javascript">                remoteVideo.<span class="property">srcObject</span> = remoteStream;</span></span><br><span class="line"><span class="language-javascript">                remoteVideo.<span class="property">autoplay</span> = <span class="literal">true</span>;</span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// å‘èµ·å‘¼å«</span></span></span><br><span class="line"><span class="language-javascript">        $(<span class="string">&#x27;#callBtn&#x27;</span>).<span class="title function_">click</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> remoteId = $(<span class="string">&quot;#youPeerid&quot;</span>).<span class="title function_">val</span>();</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span>(remoteId == <span class="string">&quot;&quot;</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">alert</span>(<span class="string">&quot;è¯·è¾“å…¥å¯¹æ–¹ID&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">return</span>;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript"> </span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> call = peer.<span class="title function_">call</span>(remoteId, localStream);</span></span><br><span class="line"><span class="language-javascript">            call.<span class="title function_">on</span>(<span class="string">&#x27;stream&#x27;</span>, <span class="keyword">function</span>(<span class="params">remoteStream</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">console</span>.<span class="title function_">log</span>(remoteStream);</span></span><br><span class="line"><span class="language-javascript">                remoteVideo.<span class="property">srcObject</span> = remoteStream;</span></span><br><span class="line"><span class="language-javascript">                remoteVideo.<span class="property">autoplay</span> = <span class="literal">true</span>;</span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript">            call.<span class="title function_">on</span>(<span class="string">&#x27;close&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;call close&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">                _this.<span class="property">loading</span>.<span class="title function_">close</span>();</span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript">            call.<span class="title function_">on</span>(<span class="string">&#x27;error&#x27;</span>, <span class="keyword">function</span>(<span class="params">err</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">console</span>.<span class="title function_">log</span>(err);</span></span><br><span class="line"><span class="language-javascript">                _this.<span class="property">loading</span>.<span class="title function_">close</span>();</span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript">    &#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="åŠŸèƒ½è¯´æ˜">åŠŸèƒ½è¯´æ˜</h2><ol><li>é¡µé¢åŠ è½½åè‡ªåŠ¨è¯·æ±‚æ‘„åƒå¤´æƒé™</li><li>è¿æ¥æˆåŠŸåè‡ªåŠ¨è·å–å¹¶æ˜¾ç¤ºæœ¬åœ°ID</li><li>è¾“å…¥å¯¹æ–¹IDåå¯å‘èµ·è§†é¢‘é€šè¯</li><li>æ”¯æŒæ¥æ”¶å¯¹æ–¹è§†é¢‘é€šè¯è¯·æ±‚</li><li>è‡ªåŠ¨æ˜¾ç¤ºæœ¬åœ°å’Œè¿œç¨‹è§†é¢‘æµ</li></ol><h2 id="å…¼å®¹æ€§å¤„ç†">å…¼å®¹æ€§å¤„ç†</h2><p>ä»£ç ä¸­åŒ…å«äº†å¯¹ä¸åŒæµè§ˆå™¨çš„å…¼å®¹å¤„ç†ï¼š</p><ul><li>æœ€æ–°æ ‡å‡†API</li><li>webkitå†…æ ¸æµè§ˆå™¨</li><li>Firefoxæµè§ˆå™¨</li><li>æ—§ç‰ˆAPI</li></ul>]]></content>
    
    
    <summary type="html">ä½¿ç”¨JavaScriptå®ç°åŸºäºWebRTCçš„è§†é¢‘èŠå¤©åŠŸèƒ½ï¼ŒåŒ…æ‹¬è·å–åª’ä½“æµã€å»ºç«‹P2Pè¿æ¥ç­‰æ ¸å¿ƒåŠŸèƒ½</summary>
    
    
    
    <category term="å‰ç«¯å¼€å‘" scheme="https://eatbreads.github.io/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/"/>
    
    
    <category term="éŸ³è§†é¢‘" scheme="https://eatbreads.github.io/tags/%E9%9F%B3%E8%A7%86%E9%A2%91/"/>
    
    <category term="WebRTC" scheme="https://eatbreads.github.io/tags/WebRTC/"/>
    
    <category term="JavaScript" scheme="https://eatbreads.github.io/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>å¸¸è§çš„å°è£…æ ¼å¼mp4,flv,hls</title>
    <link href="https://eatbreads.github.io/posts/109395ab.html"/>
    <id>https://eatbreads.github.io/posts/109395ab.html</id>
    <published>2025-04-16T15:51:09.000Z</published>
    <updated>2025-04-17T06:55:21.315Z</updated>
    
    
    
    
    
  </entry>
  
  <entry>
    <title>ç›´æ’­åè®®æ‘˜è¦ä»‹ç»RTMP-HTTP-FLV-WebRTC-RTSPç­‰</title>
    <link href="https://eatbreads.github.io/posts/c0a1f903.html"/>
    <id>https://eatbreads.github.io/posts/c0a1f903.html</id>
    <published>2025-04-16T15:43:36.000Z</published>
    <updated>2025-04-16T15:50:05.515Z</updated>
    
    <content type="html"><![CDATA[<h1 id="éŸ³è§†é¢‘åè®®è¯¦è§£"><a href="#éŸ³è§†é¢‘åè®®è¯¦è§£" class="headerlink" title="éŸ³è§†é¢‘åè®®è¯¦è§£"></a>éŸ³è§†é¢‘åè®®è¯¦è§£</h1><h2 id="RTMP-HTTP-FLV"><a href="#RTMP-HTTP-FLV" class="headerlink" title="RTMP/HTTP-FLV"></a>RTMP/HTTP-FLV</h2><p>è¿™ä¸¤ç§åè®®éƒ½å»ºç«‹åœ¨FLVå°è£…ä¹‹ä¸Šï¼Œä¸”ä¸€èˆ¬ä¸å†™å…¥ç£ç›˜ï¼Œä»…åœ¨å†…å­˜ä¸­äº¤æ¢ã€‚</p><h3 id="RTMP"><a href="#RTMP" class="headerlink" title="RTMP"></a>RTMP</h3><ul><li>ç”¨äºç›´æ’­æºæ¨æµå’Œç³»ç»Ÿå†…ç›´æ’­æµæ•°æ®ä¼ é€’</li><li>ç«¯å£å·1935ï¼Œå»ºç«‹TCPé•¿è¿æ¥</li><li>å»¶è¿Ÿä¸€èˆ¬ä¸º1~3s</li><li>æ¨æµåœ°å€å’Œæ’­æ”¾åœ°å€ç›¸åŒ</li><li>å­˜åœ¨é«˜å¹¶å‘é—®é¢˜</li><li>å› æµè§ˆå™¨æ‘’å¼ƒflashï¼Œä¸»è¦ç”¨äºç›´æ’­æºæ¨æµå’ŒCDNæ¨æµ</li><li>å¼ºåˆ¶åˆ‡ç‰‡ä»¥ä¿è¯å®æ—¶æ€§å’Œå¼±ç½‘æŠµæŠ—èƒ½åŠ›ï¼Œä½†æœ‰æ€§èƒ½æŸè€—</li></ul><h3 id="HTTP-FLV"><a href="#HTTP-FLV" class="headerlink" title="HTTP-FLV"></a>HTTP-FLV</h3><ul><li>ä¸»è¦ç”¨äºå®¢æˆ·ç«¯è§‚çœ‹</li><li>æ˜¯RTMPçš„HTTPç‰ˆæœ¬</li><li>ç½‘é¡µéœ€è¦å¼•å…¥flv.jsæ‰èƒ½æ’­æ”¾</li></ul><h2 id="WebRTCåè®®"><a href="#WebRTCåè®®" class="headerlink" title="WebRTCåè®®"></a>WebRTCåè®®</h2><h3 id="åŸºæœ¬ç‰¹æ€§"><a href="#åŸºæœ¬ç‰¹æ€§" class="headerlink" title="åŸºæœ¬ç‰¹æ€§"></a>åŸºæœ¬ç‰¹æ€§</h3><ul><li>Web Real-Time Communication</li><li>å…è®¸æµè§ˆå™¨ä¹‹é—´ç›´æ¥è¿æ¥</li><li>å»¶è¿Ÿä½äº1sï¼Œä½¿ç”¨UDPé€šé“</li><li>æ¨æ‹‰æµåœ°å€æ ¼å¼ï¼š<code>webrtc://127.0.0.1:8000/live</code></li></ul><h3 id="è¿æ¥æœºåˆ¶"><a href="#è¿æ¥æœºåˆ¶" class="headerlink" title="è¿æ¥æœºåˆ¶"></a>è¿æ¥æœºåˆ¶</h3><ol><li>ç‚¹å¯¹ç‚¹åè®®(PPP)</li><li>éœ€è¦ä¿¡ä»¤æœåŠ¡å™¨ä½œä¸ºåˆå§‹ä¸­è½¬</li><li>ä¿¡ä»¤å†…å®¹åŒ…æ‹¬ï¼š<ul><li>åª’ä½“æµå…ƒæ•°æ®</li><li>ç½‘ç»œæ•°æ®ä¿¡æ¯</li></ul></li></ol><h3 id="è¿æ¥æ–¹å¼"><a href="#è¿æ¥æ–¹å¼" class="headerlink" title="è¿æ¥æ–¹å¼"></a>è¿æ¥æ–¹å¼</h3><ol><li>æœ¬åœ°å±€åŸŸç½‘ç›´æ¥é€šä¿¡</li><li>é€šè¿‡STUNæœåŠ¡å™¨è·å–å…¬ç½‘IP</li><li>TURNæœåŠ¡å™¨ä½œä¸ºå¤‡é€‰æ–¹æ¡ˆ</li></ol><h3 id="å¤šå¯¹å¤šé€šä¿¡æ¨¡å¼"><a href="#å¤šå¯¹å¤šé€šä¿¡æ¨¡å¼" class="headerlink" title="å¤šå¯¹å¤šé€šä¿¡æ¨¡å¼"></a>å¤šå¯¹å¤šé€šä¿¡æ¨¡å¼</h3><ol><li><p>Meshæ¨¡å¼</p><ul><li>ä¼˜ç‚¹ï¼šå®ç°ç®€å•</li><li>ç¼ºç‚¹ï¼šä»…æ”¯æŒ4-6äºº</li></ul></li><li><p>MCUæ¨¡å¼</p><ul><li>ä¼˜ç‚¹ï¼šæ”¯æŒå¤šäºº</li><li>ç¼ºç‚¹ï¼šæœåŠ¡å™¨å‹åŠ›å¤§</li></ul></li><li><p>SFUæ¨¡å¼</p><ul><li>ä¼˜ç‚¹ï¼šæœåŠ¡å™¨å‹åŠ›é€‚ä¸­</li><li>ç¼ºç‚¹ï¼šå¸¦å®½æ¶ˆè€—å¤§</li><li>é€‚ç”¨äºä¸€å¯¹å¤šé€šä¿¡</li></ul></li></ol><h2 id="RTSPåè®®"><a href="#RTSPåè®®" class="headerlink" title="RTSPåè®®"></a>RTSPåè®®</h2><ul><li>ä¸»è¦ç”¨äºæ‘„åƒå¤´/ç›‘æ§è®¾å¤‡</li><li>æ”¯æŒTCP/UDPåˆ‡æ¢</li><li>æ”¯æŒæ¨æµæ‹‰æµ</li><li>æ”¯æŒç‚¹æ’­ç›´æ’­</li><li>ç°ä»£æµè§ˆå™¨ä¸æ”¯æŒ</li></ul><h2 id="ç›´æ’­ç³»ç»Ÿæ¶æ„"><a href="#ç›´æ’­ç³»ç»Ÿæ¶æ„" class="headerlink" title="ç›´æ’­ç³»ç»Ÿæ¶æ„"></a>ç›´æ’­ç³»ç»Ÿæ¶æ„</h2><h3 id="å·¥ä½œæµç¨‹"><a href="#å·¥ä½œæµç¨‹" class="headerlink" title="å·¥ä½œæµç¨‹"></a>å·¥ä½œæµç¨‹</h3><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ç›´æ’­æº -&gt; æœåŠ¡å™¨<span class="number">1</span> -&gt; è½¬ç å¤„ç† -&gt; æœåŠ¡å™¨<span class="number">2</span> -&gt; å®¢æˆ·ç«¯</span><br></pre></td></tr></table></figure><h3 id="åŠŸèƒ½ç‰¹æ€§"><a href="#åŠŸèƒ½ç‰¹æ€§" class="headerlink" title="åŠŸèƒ½ç‰¹æ€§"></a>åŠŸèƒ½ç‰¹æ€§</h3><ul><li>æ”¯æŒè½¬ç å¤„ç†</li><li>æ”¯æŒæ°´å°æ·»åŠ </li><li>æ”¯æŒæ¸…æ™°åº¦è½¬æ¢</li><li>æ”¯æŒç ç‡é™åˆ¶</li><li>æ”¯æŒç›´æ’­å½•åƒ</li></ul><h2 id="å°è£…æ ¼å¼å¯¹æ¯”"><a href="#å°è£…æ ¼å¼å¯¹æ¯”" class="headerlink" title="å°è£…æ ¼å¼å¯¹æ¯”"></a>å°è£…æ ¼å¼å¯¹æ¯”</h2><h3 id="MP4"><a href="#MP4" class="headerlink" title="MP4"></a>MP4</h3><ul><li>æ”¯æŒè‡ªå®šä¹‰å°é¢</li><li>æ ‘çŠ¶ç»“æ„æ•°æ®å—</li><li>ä¸»è¦æ•°æ®å—ï¼š<ul><li>ftypï¼šç¼–ç æ ¼å¼ä¿¡æ¯</li><li>moovï¼šå…ƒæ•°æ®</li><li>mdatï¼šéŸ³è§†é¢‘æ•°æ®</li></ul></li></ul><h3 id="FLV"><a href="#FLV" class="headerlink" title="FLV"></a>FLV</h3><ul><li>é€‚åˆç½‘ç»œè§†é¢‘æ’­æ”¾</li><li>å¤§æ–‡ä»¶/é•¿æ—¶é—´æ’­æ”¾ç¨³å®š</li><li>æ”¯æŒæ—¶é—´æˆ³ç´¢å¼•</li><li>éœ€è¦å»ºç«‹Iå¸§ç´¢å¼•</li></ul><h3 id="HLS"><a href="#HLS" class="headerlink" title="HLS"></a>HLS</h3><ul><li>åŸºäºHTTPä¸‹è½½</li><li>ç”±tsæ–‡ä»¶å’Œm3u8ç´¢å¼•ç»„æˆ</li><li>æ”¯æŒäºŒçº§ç´¢å¼•</li><li>å»¶è¿Ÿè¾ƒå¤§(5~30ç§’)</li></ul><h2 id="H-264ç¼–ç åŸç†"><a href="#H-264ç¼–ç åŸç†" class="headerlink" title="H.264ç¼–ç åŸç†"></a>H.264ç¼–ç åŸç†</h2><h3 id="ç æµåˆ†å±‚"><a href="#ç æµåˆ†å±‚" class="headerlink" title="ç æµåˆ†å±‚"></a>ç æµåˆ†å±‚</h3><ul><li>VALï¼šè§†é¢‘ç¼–ç å±‚</li><li>NALï¼šç½‘ç»œæå–å±‚</li></ul><h3 id="å¸§ç±»å‹"><a href="#å¸§ç±»å‹" class="headerlink" title="å¸§ç±»å‹"></a>å¸§ç±»å‹</h3><ul><li>Iå¸§ï¼šå®Œæ•´å¸§</li><li>På¸§ï¼šå·®å¼‚ç¼–ç </li><li>Bå¸§ï¼šåŒå‘å‚è€ƒ</li><li>IDRå¸§ï¼šé‡ç½®å‚è€ƒ</li><li>GOPç»„ï¼šå…³é”®å¸§ç»„</li></ul><h3 id="å‚æ•°ä¼˜åŒ–"><a href="#å‚æ•°ä¼˜åŒ–" class="headerlink" title="å‚æ•°ä¼˜åŒ–"></a>å‚æ•°ä¼˜åŒ–</h3><ol><li>ç ç‡æ§åˆ¶</li><li>åˆ†è¾¨ç‡/å¸§ç‡è°ƒæ•´</li><li>GOPè®¾ç½®ï¼š<ul><li>åœ¨çº¿æ’­æ”¾ï¼šå¸§ç‡çš„4-5å€</li><li>ç›´æ’­ï¼šå¸§ç‡çš„1-2å€</li></ul></li></ol><h3 id="æ¨æµå‘½ä»¤ç¤ºä¾‹"><a href="#æ¨æµå‘½ä»¤ç¤ºä¾‹" class="headerlink" title="æ¨æµå‘½ä»¤ç¤ºä¾‹"></a>æ¨æµå‘½ä»¤ç¤ºä¾‹</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.\ffmpeg -re -f dshow -i video=<span class="string">&quot;USB2.0 HD UVC WebCam&quot;</span> -vcodec libx264 -acodec aac -f flv -g 60 -bf 0 rtmp://127.0.0.1/live/test</span><br></pre></td></tr></table></figure><p>å‚æ•°è¯´æ˜ï¼š</p><ul><li><code>-re</code>ï¼šæŒ‰åŸå¸§ç‡è¯»å–</li><li><code>-f dshow</code>ï¼šWindowsè§†é¢‘è·å–</li><li><code>-g 60</code>ï¼šGOPå¤§å°</li><li><code>-bf 0</code>ï¼šç¦ç”¨Bå¸§</li></ul>]]></content>
    
    
    <summary type="html">è¯¦ç»†ä»‹ç»å„ç§éŸ³è§†é¢‘ç›´æ’­åè®®çš„ç‰¹ç‚¹å’Œåº”ç”¨åœºæ™¯ï¼ŒåŒ…æ‹¬RTMPã€HTTP-FLVã€WebRTCã€RTSPç­‰</summary>
    
    
    
    <category term="éŸ³è§†é¢‘å¼€å‘" scheme="https://eatbreads.github.io/categories/%E9%9F%B3%E8%A7%86%E9%A2%91%E5%BC%80%E5%8F%91/"/>
    
    
    <category term="ç½‘ç»œåè®®" scheme="https://eatbreads.github.io/tags/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE/"/>
    
    <category term="éŸ³è§†é¢‘" scheme="https://eatbreads.github.io/tags/%E9%9F%B3%E8%A7%86%E9%A2%91/"/>
    
    <category term="ç›´æ’­" scheme="https://eatbreads.github.io/tags/%E7%9B%B4%E6%92%AD/"/>
    
  </entry>
  
  <entry>
    <title>ä¼˜åŒ–ZLMediakitçš„ç›´æ’­æ’­æ”¾</title>
    <link href="https://eatbreads.github.io/posts/1b73edcd.html"/>
    <id>https://eatbreads.github.io/posts/1b73edcd.html</id>
    <published>2025-04-15T16:26:32.000Z</published>
    <updated>2025-04-15T16:28:52.020Z</updated>
    
    <content type="html"><![CDATA[<h1>ZLMediakitç›´æ’­ç³»ç»Ÿä¼˜åŒ–</h1><h2 id="ç›´æ’­åè®®é€‰æ‹©">ç›´æ’­åè®®é€‰æ‹©</h2><h3 id="æœ€ä½³å®è·µ">æœ€ä½³å®è·µ</h3><ul><li>æ¨æµç«¯ï¼šä½¿ç”¨RTMPåè®®</li><li>æ‹‰æµç«¯ï¼šä½¿ç”¨HTTP-FLVåè®®</li></ul><h2 id="ç¼–ç å‚æ•°ä¼˜åŒ–">ç¼–ç å‚æ•°ä¼˜åŒ–</h2><h3 id="å…³é”®é…ç½®">å…³é”®é…ç½®</h3><ol><li>ç¦ç”¨Bå¸§</li><li>GOPå¤§å°è®¾ç½®ä¸ºå¸§ç‡çš„1-2å€<ul><li>é˜²æ­¢é•¿æ—¶é—´ä¸å‡ºç°Iå¸§</li><li>æœ‰åˆ©äºæ–°è§‚ä¼—å¿«é€ŸåŠ å…¥ç›´æ’­</li></ul></li></ol><h2 id="å®ç°å‘½ä»¤">å®ç°å‘½ä»¤</h2><h3 id="æ¨æµå‘½ä»¤">æ¨æµå‘½ä»¤</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.\ffmpeg -re -f dshow -i video=<span class="string">&quot;USB2.0 HD UVC WebCam&quot;</span> -vcodec libx264 -acodec aac -f flv -g 60 -bf 0 rtmp://127.0.0.1/live/test</span><br></pre></td></tr></table></figure><p>å‚æ•°è¯´æ˜ï¼š</p><ul><li><code>-g 60</code>: è®¾ç½®GOPå¤§å°</li><li><code>-bf 0</code>: ç¦ç”¨Bå¸§</li></ul><h3 id="æ’­æ”¾åœ°å€">æ’­æ”¾åœ°å€</h3><ol><li>RTMPæ’­æ”¾åœ°å€ï¼ˆæ¨èç”¨äºç›´æ’­ï¼‰ï¼š</li></ol><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rtmp:<span class="regexp">//</span><span class="number">127.0</span>.<span class="number">0.1</span><span class="regexp">/live/</span>test</span><br></pre></td></tr></table></figure><ol start="2"><li>HTTP-FLVæ’­æ”¾åœ°å€ï¼š</li></ol><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:<span class="regexp">//</span><span class="number">127.0</span>.<span class="number">0.1</span>:<span class="number">8080</span><span class="regexp">/live/</span>test.live.flv</span><br></pre></td></tr></table></figure><p>æ³¨ï¼šä¸¤ç§åè®®éƒ½å¯ç”¨äºæ‹‰æµï¼Œä½†æ¨èä½¿ç”¨HTTP-FLV</p>]]></content>
    
    
    <summary type="html">ä»‹ç»ZLMediakitç›´æ’­ç³»ç»Ÿä¼˜åŒ–æ–¹æ¡ˆï¼ŒåŒ…æ‹¬æ¨æµåè®®é€‰æ‹©ã€ç¼–ç å‚æ•°è°ƒä¼˜ç­‰å†…å®¹</summary>
    
    
    
    <category term="éŸ³è§†é¢‘å¼€å‘" scheme="https://eatbreads.github.io/categories/%E9%9F%B3%E8%A7%86%E9%A2%91%E5%BC%80%E5%8F%91/"/>
    
    
    <category term="FFmpeg" scheme="https://eatbreads.github.io/tags/FFmpeg/"/>
    
    <category term="ZLMediakit" scheme="https://eatbreads.github.io/tags/ZLMediakit/"/>
    
    <category term="ç›´æ’­" scheme="https://eatbreads.github.io/tags/%E7%9B%B4%E6%92%AD/"/>
    
  </entry>
  
  <entry>
    <title>ä½¿ç”¨ZLMediakitå®ç°ç‚¹æ’­åŠŸèƒ½</title>
    <link href="https://eatbreads.github.io/posts/edbebd32.html"/>
    <id>https://eatbreads.github.io/posts/edbebd32.html</id>
    <published>2025-04-14T16:15:26.000Z</published>
    <updated>2025-04-14T16:20:13.616Z</updated>
    
    <content type="html"><![CDATA[<h1>ZLMediakitç‚¹æ’­åŠŸèƒ½å®ç°</h1><h2 id="æ–‡ä»¶è®¿é—®é…ç½®">æ–‡ä»¶è®¿é—®é…ç½®</h2><h3 id="URLæ ¼å¼">URLæ ¼å¼</h3><p>ç‚¹æ’­æ–‡ä»¶URLæ ¼å¼ï¼š</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rtsp:<span class="regexp">//</span><span class="number">127.0</span>.<span class="number">0.1</span><span class="regexp">/record/</span>dd.mp4</span><br></pre></td></tr></table></figure><h3 id="æŒ‚è½½é—®é¢˜æ’æŸ¥">æŒ‚è½½é—®é¢˜æ’æŸ¥</h3><ol><li>æ–‡ä»¶åŒæ­¥é—®é¢˜</li></ol><ul><li>Windows Dockeræ¡¥æ¥æŒ‚è½½ä¸ä¼šå®æ—¶åŒæ­¥æ–°å¢å†…å®¹</li><li>æ–‡ä»¶å†™å…¥æ™šäºå®¹å™¨å¯åŠ¨</li><li>è§£å†³æ–¹æ¡ˆï¼šé‡å¯å®¹å™¨</li></ul><ol start="2"><li>æŒ‚è½½ä½ç½®é—®é¢˜</li></ol><ul><li>åˆå§‹æŒ‚è½½ä½ç½®é”™è¯¯</li><li>ä¿®æ”¹æŒ‚è½½ç‚¹åå¯ä»¥åœ¨ç½‘é¡µæ‰§è¡Œæ’­æ”¾</li></ul><h2 id="é…ç½®è°ƒæ•´">é…ç½®è°ƒæ•´</h2><h3 id="æœåŠ¡å™¨é…ç½®">æœåŠ¡å™¨é…ç½®</h3><ul><li>ä¿®æ”¹protocolè·¯å¾„</li><li>éœ€è¦æ­£ç¡®é…ç½®æŒ‚è½½ç‚¹<br><img src="https://cdn-a.markji.com/files/67fbee472d0565736319cf54_hd.png?e=1744648123046&amp;token=xX63b9jqTlDOcGmctt5K9254rV0LG8hS9BmDeFBy:gJqxn8ma3pVA1k0Em2neCyO-ues=" alt="å›¾ç‰‡1"><br><img src="https://cdn-a.markji.com/files/67fbecaf75151df2bbdde516_hd.png?e=1744648123046&amp;token=xX63b9jqTlDOcGmctt5K9254rV0LG8hS9BmDeFBy:h_Ke2J4Z3Ra4WhtQH2i8ra7LSCk=" alt="å›¾ç‰‡1"><br><img src="https://cdn-a.markji.com/files/67fbef0d2d0565736319db78_hd.png?e=1744648123046&amp;token=xX63b9jqTlDOcGmctt5K9254rV0LG8hS9BmDeFBy:EwkA1BCeOR506p02Z6CFZX01NgI=" alt="å›¾ç‰‡1"></li></ul><h3 id="wwwç›®å½•å¤„ç†">wwwç›®å½•å¤„ç†</h3><p>é—®é¢˜ï¼šå†…å®¹æ‹·è´è¿›wwwåæ¶ˆå¤±<br>è§£å†³æ–¹æ¡ˆï¼š</p><ol><li>åˆ›å»ºä¸´æ—¶å®¹å™¨</li><li>æ‹·è´wwwç›®å½•å†…å®¹</li><li>é‡æ–°æŒ‚è½½ï¼ˆç±»ä¼¼config.iniçš„æ“ä½œï¼‰</li></ol><h2 id="æ’­æ”¾å™¨é…ç½®">æ’­æ”¾å™¨é…ç½®</h2><h3 id="VLCæ’­æ”¾å™¨">VLCæ’­æ”¾å™¨</h3><ul><li>ä¸‹è½½å®‰è£…VLC</li><li>å¯ç”¨äºæµ‹è¯•ç‚¹æ’­åŠŸèƒ½<br><img src="https://cdn-a.markji.com/files/67fca36c75151df2bbebfd81_hd.png?e=1744648123046&amp;token=xX63b9jqTlDOcGmctt5K9254rV0LG8hS9BmDeFBy:FXsagarh2L9cEnR6NUc4_u-LMIg=" alt="å›¾ç‰‡1"></li></ul><h2 id="å¾…è§£å†³é—®é¢˜">å¾…è§£å†³é—®é¢˜</h2><h3 id="WebAssistè®¿é—®é—®é¢˜">WebAssistè®¿é—®é—®é¢˜</h3><ul><li>ç›®å‰æ— æ³•è®¿é—®</li><li>å¾…åç»­æ›´æ–°è§£å†³æ–¹æ¡ˆ</li></ul>]]></content>
    
    
    <summary type="html">è®°å½•ä½¿ç”¨ZLMediakitå®ç°ç‚¹æ’­åŠŸèƒ½çš„è¿‡ç¨‹ï¼ŒåŒ…æ‹¬æ–‡ä»¶æŒ‚è½½ã€è·¯å¾„é…ç½®ç­‰é—®é¢˜çš„è§£å†³æ–¹æ¡ˆ</summary>
    
    
    
    <category term="éŸ³è§†é¢‘å¼€å‘" scheme="https://eatbreads.github.io/categories/%E9%9F%B3%E8%A7%86%E9%A2%91%E5%BC%80%E5%8F%91/"/>
    
    
    <category term="æµåª’ä½“" scheme="https://eatbreads.github.io/tags/%E6%B5%81%E5%AA%92%E4%BD%93/"/>
    
    <category term="Docker" scheme="https://eatbreads.github.io/tags/Docker/"/>
    
    <category term="ZLMediakit" scheme="https://eatbreads.github.io/tags/ZLMediakit/"/>
    
  </entry>
  
  <entry>
    <title>ZLMediakitçš„Dockeré…ç½®ä¸ä½¿ç”¨è®°å½•</title>
    <link href="https://eatbreads.github.io/posts/ff5976c9.html"/>
    <id>https://eatbreads.github.io/posts/ff5976c9.html</id>
    <published>2025-04-14T16:03:49.000Z</published>
    <updated>2025-04-14T16:20:13.611Z</updated>
    
    <content type="html"><![CDATA[<h1>ZLMediakité…ç½®è®°å½•</h1><h2 id="åˆå§‹å°è¯•">åˆå§‹å°è¯•</h2><h3 id="vcpkgå®‰è£…">vcpkgå®‰è£…</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vcpkg install zlmediakit</span><br></pre></td></tr></table></figure><p>é…ç½®æ–‡ä»¶ä½ç½®ï¼š</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~<span class="regexp">/vcpkg/i</span>nstalled<span class="regexp">/x64-linux/</span>tools<span class="regexp">/zlmediakit/</span></span><br></pre></td></tr></table></figure><h2 id="Dockeréƒ¨ç½²">Dockeréƒ¨ç½²</h2><h3 id="é…ç½®æ–‡ä»¶ç®¡ç†æŠ€å·§">é…ç½®æ–‡ä»¶ç®¡ç†æŠ€å·§</h3><ol><li>ä¸´æ—¶è¿è¡Œå®¹å™¨</li><li>ä½¿ç”¨docker cpæ‹·è´é…ç½®æ–‡ä»¶</li><li>åˆ é™¤ä¸´æ—¶å®¹å™¨</li><li>ä¿®æ”¹é…ç½®æ–‡ä»¶</li><li>é‡æ–°æŒ‚è½½è¿è¡Œ</li></ol><h3 id="è¿è¡Œå‘½ä»¤">è¿è¡Œå‘½ä»¤</h3><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">docker run <span class="literal">-d</span> <span class="literal">--name</span> zlmediakit `</span><br><span class="line">  <span class="literal">-p</span> <span class="number">1935</span>:<span class="number">1935</span> `</span><br><span class="line">  <span class="literal">-p</span> <span class="number">8080</span>:<span class="number">80</span> `</span><br><span class="line">  <span class="literal">-p</span> <span class="number">554</span>:<span class="number">554</span> `</span><br><span class="line">  <span class="literal">-p</span> <span class="number">30000</span><span class="literal">-30500</span>:<span class="number">30000</span><span class="literal">-30500</span>/tcp `</span><br><span class="line">  <span class="literal">-p</span> <span class="number">30000</span><span class="literal">-30500</span>:<span class="number">30000</span><span class="literal">-30500</span>/udp `</span><br><span class="line">  <span class="literal">-v</span> C:/Users/<span class="number">18526</span>/Desktop/config/config.ini:/opt/media/conf/config.ini `</span><br><span class="line">  <span class="literal">-v</span> C:/Users/<span class="number">18526</span>/Desktop/www:/opt/media/bin/www `</span><br><span class="line">  zlmediakit/zlmediakit:master</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼š</p><ul><li>PowerShellæ¢è¡Œç¬¦æ˜¯`</li><li>wwwéœ€è¦æŒ‚è½½åˆ°binä¸‹</li><li>éœ€è¦å…ˆå¯¼å‡ºwwwç›®å½•å†…å®¹</li></ul><h3 id="é…ç½®çƒ­æ›´æ–°">é…ç½®çƒ­æ›´æ–°</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl <span class="string">&quot;http://å®¿ä¸»æœºIP:8080/api/reloadConfig?secret=your_custom_secret&quot;</span></span><br></pre></td></tr></table></figure><h2 id="æ¨æ‹‰æµæµ‹è¯•">æ¨æ‹‰æµæµ‹è¯•</h2><h3 id="RTSPç‰¹æ€§è¯´æ˜">RTSPç‰¹æ€§è¯´æ˜</h3><p>RTSPæ˜¯å®æ—¶ä¼ è¾“åè®®ï¼Œç±»ä¼¼ç›´æ’­ï¼Œä¸ä¼šæŒä¹…å­˜å‚¨å†…å®¹</p><h3 id="æ¨æµå‘½ä»¤">æ¨æµå‘½ä»¤</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg -re -i <span class="string">&quot;dd.mp4&quot;</span> -vcodec h264 -acodec aac -f rtsp -rtsp_transport tcp rtsp://127.0.0.1/live/test</span><br></pre></td></tr></table></figure><h3 id="æ‹‰æµæ–¹å¼">æ‹‰æµæ–¹å¼</h3><ol><li>RTSPæ‹‰æµï¼š</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ffplay -rtsp_transport tcp rtsp://127.0.0.1/live/test</span><br></pre></td></tr></table></figure><ol start="2"><li>HLSæ‹‰æµï¼š</li></ol><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:<span class="regexp">//i</span>p:port<span class="regexp">/live/</span>testxxx/hls.m3u8</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼šliveæ˜¯å›ºå®šè·¯å¾„</p><h3 id="è¡¥å……è¯´æ˜">è¡¥å……è¯´æ˜</h3><ul><li>æ”¯æŒRTSPå’ŒRTMPæ··ç”¨</li><li>wwwç›®å½•ç”¨äºå­˜æ”¾èµ„æº</li></ul>]]></content>
    
    
    <summary type="html">è®°å½•ZLMediakitåœ¨Dockerç¯å¢ƒä¸‹çš„é…ç½®è¿‡ç¨‹ï¼ŒåŒ…æ‹¬å®‰è£…ã€é…ç½®æ–‡ä»¶ç®¡ç†å’Œæ¨æ‹‰æµæµ‹è¯•</summary>
    
    
    
    <category term="è¿ç»´ç¬”è®°" scheme="https://eatbreads.github.io/categories/%E8%BF%90%E7%BB%B4%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="Docker" scheme="https://eatbreads.github.io/tags/Docker/"/>
    
    <category term="ZLMediakit" scheme="https://eatbreads.github.io/tags/ZLMediakit/"/>
    
    <category term="æµåª’ä½“æœåŠ¡å™¨" scheme="https://eatbreads.github.io/tags/%E6%B5%81%E5%AA%92%E4%BD%93%E6%9C%8D%E5%8A%A1%E5%99%A8/"/>
    
  </entry>
  
  <entry>
    <title>OpenGLå¤šçº¿ç¨‹è°ƒè¯•ä¸è§£å†³æ–¹æ¡ˆ</title>
    <link href="https://eatbreads.github.io/posts/31a16705.html"/>
    <id>https://eatbreads.github.io/posts/31a16705.html</id>
    <published>2025-04-14T15:51:18.000Z</published>
    <updated>2025-04-14T16:20:13.614Z</updated>
    
    <content type="html"><![CDATA[<h1>OpenGLå¤šçº¿ç¨‹é—®é¢˜æ’æŸ¥ä¸è§£å†³</h1><p><img src="https://cdn-a.markji.com/files/67fa187575151df2bbad0eb6_hd.png?e=1744648123046&amp;token=xX63b9jqTlDOcGmctt5K9254rV0LG8hS9BmDeFBy:0i0tese83SpqFzkut91oyoxu2oY=" alt="å›¾ç‰‡1"></p><h2 id="åˆå§‹é—®é¢˜">åˆå§‹é—®é¢˜</h2><p>è¿è¡Œæ—¶å‘ç°ä»£ç æŠ¥é”™ï¼ŒåŸå§‹ä»£ç ä¸­æ²¡æœ‰makeCurrentè°ƒç”¨ã€‚æ·»åŠ åå‡ºç°æ–°çš„é”™è¯¯ï¼š<br><img src="https://cdn-a.markji.com/files/67fa222375151df2bbae41e0_hd.png?e=1744648123046&amp;token=xX63b9jqTlDOcGmctt5K9254rV0LG8hS9BmDeFBy:CmWd37aFZHTM0K34RySbz__unW0=" alt="å›¾ç‰‡1"></p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Cannot make QOpenGLContext current in a different thread</span><br></pre></td></tr></table></figure><h2 id="é—®é¢˜åˆ†æ">é—®é¢˜åˆ†æ</h2><h3 id="ä»£ç ç»“æ„">ä»£ç ç»“æ„</h3><ul><li>è§£ç çº¿ç¨‹(ReadThread)è¯»å–æ•°æ®</li><li>é€šè¿‡emitå‘é€ä¿¡å·</li><li>Widgetä¸­æ³¨å†Œä¿¡å·ä¸æ§½</li><li>è°ƒç”¨updateImageæ›´æ–°<br><img src="https://cdn-a.markji.com/files/67fa1c6075151df2bbad8810_hd.png?e=1744648123046&amp;token=xX63b9jqTlDOcGmctt5K9254rV0LG8hS9BmDeFBy:yZEMrUwdwFqWtmzq8L18R2kCHzY=" alt="å›¾ç‰‡1"></li></ul><h3 id="è°ƒè¯•æŠ€å·§">è°ƒè¯•æŠ€å·§</h3><ul><li>å•æ­¥è·³è¿‡ï¼šä¸è¿›å…¥å‡½æ•°ä½“ï¼Œç›´æ¥åˆ°ä¸‹ä¸€è¡Œ</li><li>å•æ­¥è¿›å…¥ï¼šè¿›å…¥å‡½æ•°å†…éƒ¨</li><li>å•æ­¥è·³å‡ºï¼šé€€å‡ºå½“å‰å‡½æ•°<br><img src="https://cdn-a.markji.com/files/67fa1f5f75151df2bbadf206_hd.png?e=1744648123046&amp;token=xX63b9jqTlDOcGmctt5K9254rV0LG8hS9BmDeFBy:zGIUUU5ha_omPwSHyFG_IdfC0uc=" alt="å›¾ç‰‡1"></li></ul><h3 id="æ ¹æœ¬åŸå› ">æ ¹æœ¬åŸå› </h3><ul><li>updateImageåœ¨è§£ç çº¿ç¨‹ä¸­è§¦å‘</li><li>OpenGLä¸Šä¸‹æ–‡(Context)åœ¨Qtä¸­åªèƒ½åœ¨åˆ›å»ºçº¿ç¨‹ä¸­æ¿€æ´»(makeCurrent)</li></ul><h2 id="è§£å†³æ–¹æ¡ˆ">è§£å†³æ–¹æ¡ˆ</h2><h3 id="æ–¹æ¡ˆä¸€ï¼šAutoæ¨¡å¼-æ·±æ‹·è´">æ–¹æ¡ˆä¸€ï¼šAutoæ¨¡å¼ + æ·±æ‹·è´</h3><p><img src="https://cdn-a.markji.com/files/67fa233075151df2bbae64da_hd.png?e=1744648123046&amp;token=xX63b9jqTlDOcGmctt5K9254rV0LG8hS9BmDeFBy:-yfpyons9ehsOOcbxmQlFOabt6s=" alt="å›¾ç‰‡1"><br>ä¼˜ç‚¹ï¼š</p><ul><li>å®ç°ç®€å•</li></ul><p>ç¼ºç‚¹ï¼š</p><ul><li>emit(image)é»˜è®¤æµ…æ‹·è´</li><li>å¯èƒ½å¯¼è‡´ä¸»çº¿ç¨‹å’Œè§£ç çº¿ç¨‹è®¿é—®å†²çª</li><li>è§£ç çº¿ç¨‹å¤„ç†é€Ÿåº¦å¿«äºä¸»çº¿ç¨‹æ—¶å¯èƒ½å´©æºƒ</li></ul><p>æ”¹è¿›ï¼š</p><ul><li>åœ¨å‘é€ä¿¡å·æ—¶ä½¿ç”¨image.copy()</li><li>é¿å…ä¿®æ”¹åŒä¸€ä»½image</li></ul><h3 id="æ–¹æ¡ˆäºŒï¼šä½¿ç”¨é˜»å¡æ–¹å¼">æ–¹æ¡ˆäºŒï¼šä½¿ç”¨é˜»å¡æ–¹å¼</h3><p><img src="https://cdn-a.markji.com/files/67fa256275151df2bbaef138_hd.png?e=1744648123046&amp;token=xX63b9jqTlDOcGmctt5K9254rV0LG8hS9BmDeFBy:_x8HnTqg5OPILeNFkR8791dGpy0=" alt="å›¾ç‰‡1"><br>ç‰¹ç‚¹ï¼š</p><ul><li>æ§åˆ¶åŒæ—¶è®¿é—®</li><li>ä¿è¯çº¿ç¨‹å®‰å…¨</li></ul><h2 id="è¡¥å……è¯´æ˜">è¡¥å……è¯´æ˜</h2><p>ä¹‹å‰ä½¿ç”¨QPainteræ²¡é—®é¢˜çš„åŸå› ï¼š</p><ul><li>æ²¡æœ‰OpenGLçš„åŒçº¿ç¨‹è¦æ±‚</li><li>å¯ä»¥ä½¿ç”¨Directæ¨¡å¼</li><li>ä¸éœ€è¦æ‹·è´image(å› ä¸ºåœ¨åŒä¸€çº¿ç¨‹)</li></ul>]]></content>
    
    
    <summary type="html">è®°å½•OpenGLåœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹é‡åˆ°çš„é—®é¢˜åŠè§£å†³æ–¹æ¡ˆï¼ŒåŒ…æ‹¬ä¸Šä¸‹æ–‡åˆ‡æ¢ã€çº¿ç¨‹åŒæ­¥ç­‰å†…å®¹</summary>
    
    
    
    <category term="å›¾å½¢ç¼–ç¨‹" scheme="https://eatbreads.github.io/categories/%E5%9B%BE%E5%BD%A2%E7%BC%96%E7%A8%8B/"/>
    
    
    <category term="å¤šçº¿ç¨‹" scheme="https://eatbreads.github.io/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B/"/>
    
    <category term="Qt" scheme="https://eatbreads.github.io/tags/Qt/"/>
    
    <category term="OpenGL" scheme="https://eatbreads.github.io/tags/OpenGL/"/>
    
    <category term="è°ƒè¯•" scheme="https://eatbreads.github.io/tags/%E8%B0%83%E8%AF%95/"/>
    
  </entry>
  
  <entry>
    <title>PlayImageä½¿ç”¨OpenGLå®ç°è§†é¢‘æ¸²æŸ“</title>
    <link href="https://eatbreads.github.io/posts/74e5f723.html"/>
    <id>https://eatbreads.github.io/posts/74e5f723.html</id>
    <published>2025-04-14T15:46:32.000Z</published>
    <updated>2025-04-14T15:50:50.346Z</updated>
    
    <content type="html"><![CDATA[<h1>PlayImageçš„OpenGLå®ç°</h1><h2 id="åŸºç¡€æ¶æ„">åŸºç¡€æ¶æ„</h2><p><img src="https://cdn-a.markji.com/files/67f8ca1ceb27578088b6e53c_hd.png?e=1744648123046&amp;token=xX63b9jqTlDOcGmctt5K9254rV0LG8hS9BmDeFBy:FNznTp5nnhoXjDIZXuZOGN2282Q=" alt="å›¾ç‰‡1"></p><h3 id="ç±»ç»§æ‰¿">ç±»ç»§æ‰¿</h3><ul><li>ç»§æ‰¿QOpenGLWidgetå’ŒQOpenGLFunctions_3_3</li><li>æ–°ç‰ˆæœ¬OpenGL(&gt;2.0)ä»å›ºå®šç®¡çº¿è½¬å‘å¯ç¼–ç¨‹ç®¡çº¿</li></ul><h3 id="ç¼“å†²åŒºæ¦‚å¿µ">ç¼“å†²åŒºæ¦‚å¿µ</h3><ul><li>VBOï¼šä¿å­˜å•ä¸ªé¡¶ç‚¹æ•°æ®ï¼ˆæ•°æ®é›†ï¼‰</li><li>VAOï¼šä¿å­˜å¦‚ä½•ä½¿ç”¨è¿™äº›VBOçš„æ•°æ®ï¼ˆä½¿ç”¨è¯´æ˜ï¼‰</li></ul><h3 id="èµ„æºç®¡ç†">èµ„æºç®¡ç†</h3><ul><li>æ·»åŠ èµ„æºæ–‡ä»¶ï¼šé€šè¿‡Qtçš„resourceç³»ç»Ÿ</li><li>GLSLæ–‡ä»¶éœ€è¦æ·»åŠ åˆ°èµ„æºç³»ç»Ÿä¸­</li></ul><h2 id="OpenGLæ¸²æŸ“æµç¨‹ç±»æ¯”">OpenGLæ¸²æŸ“æµç¨‹ç±»æ¯”</h2><p>æ•´ä¸ªæµç¨‹ç±»ä¼¼äºå¸ƒç½®ç”µå½±é™¢ï¼š</p><ol><li>æ‘†æ”¾è®¾å¤‡</li><li>è°ƒæ•´æŠ•å½±ä»ªæ»¤é•œï¼ˆç€è‰²å™¨ï¼‰</li><li>å‡†å¤‡æµ·æŠ¥å¹¶è£å‰ªï¼ˆtextureï¼‰</li><li>æ’­æ”¾æ—¶ç»‘å®šæµ·æŠ¥ï¼ˆtexture.bind()ï¼‰</li><li>æ‰§è¡Œæ’­æ”¾<br><img src="https://cdn-a.markji.com/files/67f8cb28c7682418c31519ff_hd.png?e=1744648123046&amp;token=xX63b9jqTlDOcGmctt5K9254rV0LG8hS9BmDeFBy:QNAYSqKEJEjBgCyT0Uc9d8_k5Sc=" alt="å›¾ç‰‡1"><br><img src="https://cdn-a.markji.com/files/67f940acc7682418c32441de_hd.png?e=1744648123046&amp;token=xX63b9jqTlDOcGmctt5K9254rV0LG8hS9BmDeFBy:SgWrSGa6iuhbQ506zT-eMbHyKKQ=" alt="å›¾ç‰‡1"></li></ol><h2 id="ç€è‰²å™¨å·¥ä½œåŸç†">ç€è‰²å™¨å·¥ä½œåŸç†</h2><h3 id="ç€è‰²å™¨ç‰¹ç‚¹">ç€è‰²å™¨ç‰¹ç‚¹</h3><ul><li>æ¯ä»½ç€è‰²å™¨ä»£ç åªæ˜¯å•ä¸ªåƒç´ çš„ç»˜åˆ¶è“å›¾</li><li>GPUä¸­å¤šä¸ªå·¥ä½œå•å…ƒå¹¶è¡Œå¤„ç†</li><li>æ¯ä¸ªå·¥ä½œå•å…ƒè´Ÿè´£ä¸€ä¸ªåƒç´ çš„ç»˜åˆ¶</li><li>ç€è‰²å™¨æ˜¯å·¥ä½œå•å…ƒçš„æ‰§è¡ŒæŒ‡å—</li></ul><h3 id="ç€è‰²å™¨ç±»å‹">ç€è‰²å™¨ç±»å‹</h3><ol><li>é¡¶ç‚¹ç€è‰²å™¨ï¼šç¡®å®šä½ç½®</li><li>ç‰‡æ®µç€è‰²å™¨ï¼ˆåƒç´ ç€è‰²å™¨ï¼‰ï¼šç»˜åˆ¶é¢œè‰²</li></ol><h3 id="å·¥ä½œæµç¨‹">å·¥ä½œæµç¨‹</h3><ol><li>é¡¶ç‚¹ç€è‰²å™¨æ‰§è¡Œï¼ˆä»…æ‰§è¡Œé¡¶ç‚¹æ¬¡æ•°ï¼‰</li><li>å›¾å…ƒè£…é…ï¼ˆç»„åˆæˆä¸‰è§’å½¢/çº¿æ®µï¼‰</li><li>å…‰æ …åŒ–ï¼ˆå¡«å……åƒç´ å—ï¼‰</li><li>ç‰‡æ®µç€è‰²å™¨å¤„ç†æ¯ä¸ªfragmentï¼ˆæ‰§è¡Œåƒç´ æ•°é‡æ¬¡ï¼‰<br><img src="https://cdn-a.markji.com/files/67f9412ac7682418c32449ec_hd.png?e=1744648123046&amp;token=xX63b9jqTlDOcGmctt5K9254rV0LG8hS9BmDeFBy:HNqm3Atyp4YM3vWyNkjdxyszr7U=" alt="å›¾ç‰‡1"><br><img src="https://cdn-a.markji.com/files/67fa0ba875151df2bbab74ed_hd.png?e=1744648123046&amp;token=xX63b9jqTlDOcGmctt5K9254rV0LG8hS9BmDeFBy:OBn53mQm0j8uiGbdmz_xskuSVXY=" alt="å›¾ç‰‡1"><br><img src="https://cdn-a.markji.com/files/67fa278f75151df2bbaf3551_hd.png?e=1744648123046&amp;token=xX63b9jqTlDOcGmctt5K9254rV0LG8hS9BmDeFBy:jlImCTf9A5kJcKHYi8IaLukQCOE=" alt="å›¾ç‰‡1"></li></ol><h2 id="å®ç°æ³¨æ„äº‹é¡¹">å®ç°æ³¨æ„äº‹é¡¹</h2><h3 id="OpenGLå°è£…é€‰æ‹©">OpenGLå°è£…é€‰æ‹©</h3><ul><li>æ”¾å¼ƒQtå°è£…çš„OpenGL</li><li>ç›´æ¥ä½¿ç”¨åŸç”Ÿå¥æŸ„æ“ä½œVAO/VBO</li></ul><h3 id="ä½ç½®ç®¡ç†">ä½ç½®ç®¡ç†</h3><ul><li>m_posä½¿ç”¨QPointç±»å‹<br><img src="https://cdn-a.markji.com/files/67fa0fd27f917e87d7bf7967_hd.png?e=1744648123046&amp;token=xX63b9jqTlDOcGmctt5K9254rV0LG8hS9BmDeFBy:Kk27zVoJp9jmZm8XKIDflYrTouU=" alt="å›¾ç‰‡1"></li></ul>]]></content>
    
    
    <summary type="html">è¯¦ç»†ä»‹ç»ä½¿ç”¨OpenGLå®ç°PlayImageè§†é¢‘æ¸²æŸ“çš„è¿‡ç¨‹ï¼ŒåŒ…æ‹¬ç€è‰²å™¨ç¼–ç¨‹ã€ç¼“å†²åŒºç®¡ç†ç­‰æ ¸å¿ƒæ¦‚å¿µ</summary>
    
    
    
    <category term="éŸ³è§†é¢‘å¼€å‘" scheme="https://eatbreads.github.io/categories/%E9%9F%B3%E8%A7%86%E9%A2%91%E5%BC%80%E5%8F%91/"/>
    
    
    <category term="Qt" scheme="https://eatbreads.github.io/tags/Qt/"/>
    
    <category term="OpenGL" scheme="https://eatbreads.github.io/tags/OpenGL/"/>
    
    <category term="å›¾å½¢ç¼–ç¨‹" scheme="https://eatbreads.github.io/tags/%E5%9B%BE%E5%BD%A2%E7%BC%96%E7%A8%8B/"/>
    
  </entry>
  
  <entry>
    <title>PlayImageç±»çš„å®ç°ä¸çª—å£æ§ä»¶æå‡</title>
    <link href="https://eatbreads.github.io/posts/e486a6b2.html"/>
    <id>https://eatbreads.github.io/posts/e486a6b2.html</id>
    <published>2025-04-10T15:37:16.000Z</published>
    <updated>2025-04-10T15:38:34.219Z</updated>
    
    <content type="html"><![CDATA[<h1>PlayImageç±»å®ç°ä¸æ§ä»¶æå‡</h1><h2 id="å›¾åƒå¤„ç†ä¸­çš„çº¿ç¨‹å®‰å…¨">å›¾åƒå¤„ç†ä¸­çš„çº¿ç¨‹å®‰å…¨</h2><h3 id="QImageè½¬QPixmapçš„é”é—®é¢˜">QImageè½¬QPixmapçš„é”é—®é¢˜</h3><p>é‡åˆ°é—®é¢˜ï¼šä¸ºä»€ä¹ˆimageè½¬pixmapéœ€è¦åŠ é”ï¼Ÿ</p><p>åŸå› åˆ†æï¼š</p><ul><li>QImageæ˜¯æµ…æ‹·è´</li><li>ä¸æ¶‰åŠå®é™…çš„å†…å­˜å¤åˆ¶</li><li>é‡‡ç”¨å†™æ—¶å¤åˆ¶æœºåˆ¶</li><li>ä¿®æ”¹æ—¶ä¼šå†…éƒ¨åˆ›å»ºå‰¯æœ¬å¹¶è¿”å›</li></ul><h3 id="æ›´å®‰å…¨çš„å¤„ç†æ–¹å¼">æ›´å®‰å…¨çš„å¤„ç†æ–¹å¼</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> image.<span class="built_in">copy</span>();  <span class="comment">// æ˜¾å¼åˆ›å»ºæ·±æ‹·è´</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn-a.markji.com/files/67f7ca61eb275780889db6e9_hd.png?e=1744301820167&amp;token=xX63b9jqTlDOcGmctt5K9254rV0LG8hS9BmDeFBy:02Weiaf_hM3aTtDvF-oSgKQ_Iwk=" alt="å›¾ç‰‡1"></p><h2 id="ä¿¡å·æ§½æ‰§è¡Œæœºåˆ¶">ä¿¡å·æ§½æ‰§è¡Œæœºåˆ¶</h2><h3 id="åŒæ­¥æ‰§è¡Œç‰¹æ€§">åŒæ­¥æ‰§è¡Œç‰¹æ€§</h3><ul><li>åŒä¸€çº¿ç¨‹ä¸­çš„ä¿¡å·å’Œæ§½æ˜¯åŒæ­¥æ‰§è¡Œçš„</li><li>å¯ä»¥ç†è§£ä¸º&quot;è·³å›å»æ‰§è¡Œ&quot;æ§½å‡½æ•°</li><li>ä¸ä¼šäº§ç”Ÿæ–°çš„çº¿ç¨‹</li></ul><h2 id="æ§ä»¶æå‡é—®é¢˜">æ§ä»¶æå‡é—®é¢˜</h2><h3 id="è§£å†³æ–¹æ¡ˆ">è§£å†³æ–¹æ¡ˆ</h3><p>ç›®å‰å·²çŸ¥çš„è§£å†³æ–¹æ³•ï¼š</p><ul><li>ä½¿ç”¨å…¨è·¯å¾„æ–¹å¼</li><li>ç¡®ä¿è·¯å¾„æ­£ç¡®æŒ‡å‘æ§ä»¶ç±»<br><img src="https://cdn-a.markji.com/files/67f7e11cc7682418c3010e36_hd.png?e=1744301820167&amp;token=xX63b9jqTlDOcGmctt5K9254rV0LG8hS9BmDeFBy:Fy9gtrXjDpwId8aJIWWzlR_jTjI=" alt="å›¾ç‰‡1"></li></ul>]]></content>
    
    
    <summary type="html">è¯¦ç»†ä»‹ç»PlayImageç±»çš„å®ç°è¿‡ç¨‹ï¼ŒåŒ…æ‹¬å›¾åƒå¤„ç†ã€çº¿ç¨‹å®‰å…¨ä»¥åŠæ§ä»¶æå‡ç­‰å†…å®¹</summary>
    
    
    
    <category term="Qtå¼€å‘" scheme="https://eatbreads.github.io/categories/Qt%E5%BC%80%E5%8F%91/"/>
    
    
    <category term="å¤šçº¿ç¨‹" scheme="https://eatbreads.github.io/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B/"/>
    
    <category term="Qt" scheme="https://eatbreads.github.io/tags/Qt/"/>
    
    <category term="å›¾å½¢ç•Œé¢" scheme="https://eatbreads.github.io/tags/%E5%9B%BE%E5%BD%A2%E7%95%8C%E9%9D%A2/"/>
    
  </entry>
  
  <entry>
    <title>ReadThreadçº¿ç¨‹ç±»çš„å®ç°</title>
    <link href="https://eatbreads.github.io/posts/a5d7054f.html"/>
    <id>https://eatbreads.github.io/posts/a5d7054f.html</id>
    <published>2025-04-10T15:36:00.000Z</published>
    <updated>2025-04-10T15:38:34.223Z</updated>
    
    <content type="html"><![CDATA[<h1>ReadThreadçº¿ç¨‹ç±»å®ç°</h1><h2 id="ç±»è®¾è®¡è¦ç‚¹">ç±»è®¾è®¡è¦ç‚¹</h2><h3 id="å¤´æ–‡ä»¶ä¼˜åŒ–">å¤´æ–‡ä»¶ä¼˜åŒ–</h3><ul><li>æ ¸å¿ƒï¼šå¤´æ–‡ä»¶ä¸­ä¸éœ€è¦åŒ…å«å…¶ä»–ç±»çš„å®Œæ•´å®šä¹‰</li><li>åªéœ€è¦å‰ç½®å£°æ˜å³å¯</li><li>å¯ä»¥å‡å°‘ç¼–è¯‘ä¾èµ–</li></ul><h3 id="çº¿ç¨‹æ§åˆ¶">çº¿ç¨‹æ§åˆ¶</h3><ul><li>ç»§æ‰¿QThreadç±»</li><li>é‡å†™runå‡½æ•°</li><li>ä½¿ç”¨startå¯åŠ¨çº¿ç¨‹</li><li>ä½¿ç”¨quitè¯·æ±‚åœæ­¢</li><li>ä½¿ç”¨waitç­‰å¾…çº¿ç¨‹ç»“æŸ</li></ul><h2 id="è®¡æ—¶å™¨å…¼å®¹æ€§é—®é¢˜">è®¡æ—¶å™¨å…¼å®¹æ€§é—®é¢˜</h2><h3 id="Qt6åºŸå¼ƒQTime">Qt6åºŸå¼ƒQTime</h3><p>ç¬¬ä¸€ä¸ªé‡åˆ°çš„å…¼å®¹æ€§é—®é¢˜ï¼šQt6ä¸­QTimeçš„start()å’Œelapsed()æ–¹æ³•å·²è¢«åºŸå¼ƒ</p><h3 id="ä½¿ç”¨QElapsedTimer">ä½¿ç”¨QElapsedTimer</h3><ul><li>Qt5å°±å»ºè®®ä½¿ç”¨QElapsedTimeræ›¿ä»£QTime</li><li>QTimeè®¾è®¡åˆè¡·æ˜¯è¡¨ç¤ºæ—¶é—´å’Œæµ‹é‡æ—¶é—´é—´éš”</li><li>åœ¨é«˜ç²¾åº¦è®¡æ—¶æ–¹é¢å­˜åœ¨é™åˆ¶</li><li>QElapsedTimeræä¾›æ›´é«˜ç²¾åº¦çš„æ—¶é—´æµ‹é‡</li><li>ä½¿ç”¨ç³»ç»Ÿçº§åˆ«çš„é«˜åˆ†è¾¨ç‡å®šæ—¶å™¨</li></ul><h3 id="è®¡æ—¶è§„åˆ™">è®¡æ—¶è§„åˆ™</h3><ul><li>start()æ—¶è®°å½•ä¸€æ¬¡æ—¶é—´</li><li>elapsed()è¿”å›ä¸å½“å‰æ—¶é—´çš„å·®å€¼</li></ul><h2 id="å·²çŸ¥é—®é¢˜">å·²çŸ¥é—®é¢˜</h2><h3 id="æš‚åœåŠŸèƒ½bug">æš‚åœåŠŸèƒ½bug</h3><ul><li>elapsedåœ¨è§¦å‘æš‚åœåä»ä¼šç»§ç»­è®¡æ—¶</li><li>å¯¼è‡´æš‚åœåæ’­æ”¾ä¼šå¿«é€Ÿè¿½å›å½“å‰æ—¶é—´</li><li>å®é™…æ•ˆæœç­‰äºæ²¡æœ‰æš‚åœ</li><li>åç»­ä¼šæ›´æ–°ä¼˜åŒ–æ–¹æ¡ˆ</li></ul>]]></content>
    
    
    <summary type="html">è¯¦ç»†ä»‹ç»ReadThreadçº¿ç¨‹ç±»çš„å®ç°è¦ç‚¹ï¼ŒåŒ…æ‹¬ç±»çš„è®¾è®¡ã€çº¿ç¨‹æ§åˆ¶ä»¥åŠè®¡æ—¶å™¨çš„ä½¿ç”¨</summary>
    
    
    
    <category term="éŸ³è§†é¢‘å¼€å‘" scheme="https://eatbreads.github.io/categories/%E9%9F%B3%E8%A7%86%E9%A2%91%E5%BC%80%E5%8F%91/"/>
    
    
    <category term="å¤šçº¿ç¨‹" scheme="https://eatbreads.github.io/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B/"/>
    
    <category term="Qt" scheme="https://eatbreads.github.io/tags/Qt/"/>
    
    <category term="C++" scheme="https://eatbreads.github.io/tags/C/"/>
    
  </entry>
  
  <entry>
    <title>VideoPlayçš„æ ¸å¿ƒreadå‡½æ•°è¯¦è§£</title>
    <link href="https://eatbreads.github.io/posts/db8f7402.html"/>
    <id>https://eatbreads.github.io/posts/db8f7402.html</id>
    <published>2025-04-10T08:09:18.000Z</published>
    <updated>2025-04-10T15:38:34.221Z</updated>
    
    <content type="html"><![CDATA[<h1>VideoPlayçš„readå‡½æ•°è¯¦è§£</h1><h2 id="Qtç¯å¢ƒé—®é¢˜è§£å†³">Qtç¯å¢ƒé—®é¢˜è§£å†³</h2><p>å½“Qté¢‘ç¹å‡ºç°æ— å“åº”æˆ–æ— æ³•æ‰“å¼€çš„æƒ…å†µï¼Œå¯ä»¥å°è¯•åˆ é™¤ä»¥ä¸‹é…ç½®æ–‡ä»¶ï¼š</p><figure class="highlight moonscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="name">C</span>:\Users\Administrator\AppData\Roaming\QtProject</span><br></pre></td></tr></table></figure><p>è¯¥æ–‡ä»¶å¯èƒ½ä¼šå¯¼è‡´Qtå¯åŠ¨æ—¶è¯»å–é…ç½®è€—æ—¶è¿‡é•¿ã€‚åˆ é™¤åQtä¼šé‡æ–°ç”Ÿæˆé…ç½®æ–‡ä»¶ã€‚</p><h2 id="åƒç´ æ ¼å¼å¤„ç†">åƒç´ æ ¼å¼å¤„ç†</h2><p><img src="https://cdn-a.markji.com/files/67f778deeb27578088918a61_hd.png?e=1744301820167&amp;token=xX63b9jqTlDOcGmctt5K9254rV0LG8hS9BmDeFBy:LVKgqx8MCHUU2TB74efe2NXBx7g=" alt="å›¾ç‰‡1"><br><img src="https://cdn-a.markji.com/files/67f77b72eb2757808891e3e3_hd.png?e=1744301820167&amp;token=xX63b9jqTlDOcGmctt5K9254rV0LG8hS9BmDeFBy:4PjVjFpHeeO9wY5VVNSWkb8NH_A=" alt="å›¾ç‰‡1"></p><h3 id="æ ¼å¼è®¾ç½®é™åˆ¶">æ ¼å¼è®¾ç½®é™åˆ¶</h3><p>å³ä½¿æˆ‘ä»¬å‘Šè¯‰è§£ç å™¨æƒ³è¦è§£ç å‡ºYUV420Pæ ¼å¼çš„å¸§ï¼Œåœ¨ç¡¬ä»¶è§£ç çš„æƒ…å†µä¸‹è§£ç å™¨å¯èƒ½ä¼šè¿”å›NV12æ ¼å¼ï¼Œå¿½ç•¥è®¾ç½®çš„pix_fmtå‚æ•°ã€‚</p><h3 id="æ ¼å¼è®¾ç½®æ—¶æœº">æ ¼å¼è®¾ç½®æ—¶æœº</h3><p>pix_fmtæ˜¯åœ¨ç”¨è§†é¢‘æµçš„paraèµ‹å€¼è§£ç å™¨ä¸Šä¸‹æ–‡é‚£ä¸€æ­¥è¿›è¡Œè®¾ç½®çš„ã€‚<br><img src="https://cdn-a.markji.com/files/67f783bceb2757808893994a_hd.png?e=1744301820167&amp;token=xX63b9jqTlDOcGmctt5K9254rV0LG8hS9BmDeFBy:WY4HpMocon_URRb_Kru0eDP7RXc=" alt="å›¾ç‰‡1"></p><h2 id="è¿”å›å€¼å†…å­˜ç®¡ç†">è¿”å›å€¼å†…å­˜ç®¡ç†</h2><p>äºŒæ›´ï¼šå…³äºreturnè¿”å›çš„æ•°æ®è¯´æ˜ï¼š</p><ul><li>æœ¬è´¨ä¸Šè¿”å›çš„æ˜¯m_buffer</li><li>å³ä½¿imageæ˜¯æµ…æ‹·è´</li><li>ä½†å®é™…å†…å­˜è¿˜åœ¨m_bufferä¸­</li><li>å› æ­¤ä¸æ„æˆè¿”å›å±€éƒ¨å¯¹è±¡æŒ‡é’ˆçš„é—®é¢˜</li></ul>]]></content>
    
    
    <summary type="html">è¯¦ç»†ä»‹ç»VideoPlayç±»ä¸­readå‡½æ•°çš„å®ç°åŸç†ï¼ŒåŒ…æ‹¬åƒç´ æ ¼å¼è®¾ç½®ã€å†…å­˜ç®¡ç†ç­‰å…³é”®ç‚¹</summary>
    
    
    
    <category term="éŸ³è§†é¢‘å¼€å‘" scheme="https://eatbreads.github.io/categories/%E9%9F%B3%E8%A7%86%E9%A2%91%E5%BC%80%E5%8F%91/"/>
    
    
    <category term="Qt" scheme="https://eatbreads.github.io/tags/Qt/"/>
    
    <category term="FFmpeg" scheme="https://eatbreads.github.io/tags/FFmpeg/"/>
    
    <category term="éŸ³è§†é¢‘å¼€å‘" scheme="https://eatbreads.github.io/tags/%E9%9F%B3%E8%A7%86%E9%A2%91%E5%BC%80%E5%8F%91/"/>
    
  </entry>
  
  <entry>
    <title>VideoDecoderçš„åˆå§‹åŒ–ä¸Openå‡½æ•°å®ç°</title>
    <link href="https://eatbreads.github.io/posts/5b754325.html"/>
    <id>https://eatbreads.github.io/posts/5b754325.html</id>
    <published>2025-04-09T15:48:31.000Z</published>
    <updated>2025-04-09T15:55:42.959Z</updated>
    
    <content type="html"><![CDATA[<h1>VideoDecoderåˆå§‹åŒ–ä¸Openå‡½æ•°å®ç°</h1><h2 id="æ³¨æ„äº‹é¡¹">æ³¨æ„äº‹é¡¹</h2><ol><li>FFmpegç‰ˆæœ¬å…¼å®¹</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">av_register_all</span>();  <span class="comment">// åœ¨æ–°ç‰ˆæœ¬ä¸­å…¶å®å¯çœç•¥</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn-a.markji.com/files/67f62488c7682418c3cc7832_hd.png?e=1744203917604&amp;token=xX63b9jqTlDOcGmctt5K9254rV0LG8hS9BmDeFBy:oTrBk8gkfJ-Rlyatgrju-KUFyxk=" alt="å›¾ç‰‡1"><br>2. åˆå§‹åŒ–å‡½æ•°è°ƒç”¨</p><ul><li>initå‡½æ•°åœ¨æ„é€ å‡½æ•°ä¸­å§‹ç»ˆæœªè¢«è°ƒç”¨</li></ul><h2 id="CMakeé…ç½®é—®é¢˜">CMakeé…ç½®é—®é¢˜</h2><p>CMakeè®¾ç½®çš„è·¯å¾„å¿…é¡»åœ¨add_executable()æˆ–qt_add_executable()ä¹‹å‰é…ç½®<br><img src="https://cdn-a.markji.com/files/67f62b7ba5d66136f3e488be_hd.png?e=1744203917604&amp;token=xX63b9jqTlDOcGmctt5K9254rV0LG8hS9BmDeFBy:1v6-tAQ1yC41ODKSUit7eHAEqvY=" alt="å›¾ç‰‡1"><br><img src="https://cdn-a.markji.com/files/67f62d0aa5d66136f3e4cbf7_hd.png?e=1744203917604&amp;token=xX63b9jqTlDOcGmctt5K9254rV0LG8hS9BmDeFBy:2mguVmWtWNRi5TQkVHSRyyJDh-0=" alt="å›¾ç‰‡1"><br><img src="https://cdn-a.markji.com/files/67f636b9c7682418c3ced832_hd.png?e=1744203917604&amp;token=xX63b9jqTlDOcGmctt5K9254rV0LG8hS9BmDeFBy:21PoT4SpANxk8Puopd7r611J5mo=" alt="å›¾ç‰‡1"><br><img src="https://cdn-a.markji.com/files/67f637f7c7682418c3cef861_hd.png?e=1744203917604&amp;token=xX63b9jqTlDOcGmctt5K9254rV0LG8hS9BmDeFBy:MdbGRzt1HMDOqokUVj1Z4JeWb-Q=" alt="å›¾ç‰‡1"></p><h2 id="è§†é¢‘æ—¶é•¿è®¡ç®—">è§†é¢‘æ—¶é•¿è®¡ç®—</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">m_totalTime = m_formatContext-&gt;duration / (AV_TIME_BASE / <span class="number">1000</span>);</span><br></pre></td></tr></table></figure><ul><li>è®¡ç®—è§†é¢‘æ€»æ—¶é•¿ï¼ˆæ¯«ç§’ï¼‰</li><li>AV_TIME_BASEæ˜¯åŸºç¡€æ—¶é—´å•ä½</li><li>1000ç”¨äºè½¬æ¢ä¸ºæ¯«ç§’å•ä½</li></ul><h2 id="æœ‰ç†æ•°è½¬æ¢">æœ‰ç†æ•°è½¬æ¢</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">qreal <span class="title">rationalToDouble</span><span class="params">(AVRational* rational)</span></span>;</span><br></pre></td></tr></table></figure><ul><li>å°†AVRationalç»“æ„ä½“è½¬æ¢ä¸ºdoubleç±»å‹</li><li>AVRationalåŒ…å«åˆ†å­å’Œåˆ†æ¯</li><li>å‡½æ•°æ‰§è¡Œç®€å•çš„é™¤æ³•è¿ç®—<br><img src="https://cdn-a.markji.com/files/67f63b24a5d66136f3e6ea92_hd.png?e=1744203917604&amp;token=xX63b9jqTlDOcGmctt5K9254rV0LG8hS9BmDeFBy:RlWC5iKi_UH6CHulmFGSR-lD3ng=" alt="å›¾ç‰‡1"><br><img src="https://cdn-a.markji.com/files/67f63ce0c7682418c3cfb328_hd.png?e=1744203917604&amp;token=xX63b9jqTlDOcGmctt5K9254rV0LG8hS9BmDeFBy:k__mLcJkG01gmeNAW4JXA00a58U=" alt="å›¾ç‰‡1"></li></ul><h2 id="è§£ç å™¨è¯†åˆ«">è§£ç å™¨è¯†åˆ«</h2><p>è§†é¢‘æµä¸­åŒ…å«è§£ç å™¨IDä¿¡æ¯ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">videoStream-&gt;codecpar-&gt;codec_id  <span class="comment">// ä¾‹å¦‚ï¼šAV_CODEC_ID_H264</span></span><br></pre></td></tr></table></figure><ul><li>é€šè¿‡IDå¯ä»¥æ‰¾åˆ°å¯¹åº”çš„è§£ç å™¨(å¦‚h264)</li></ul><h2 id="æ€§èƒ½ä¼˜åŒ–è®¾ç½®">æ€§èƒ½ä¼˜åŒ–è®¾ç½®</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å…è®¸ä¸ç¬¦åˆè§„èŒƒçš„åŠ é€ŸæŠ€å·§</span></span><br><span class="line">m_codecContext-&gt;flags2 |= AV_CODEC_FLAG2_FAST;    </span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¾ç½®è§£ç çº¿ç¨‹æ•°</span></span><br><span class="line">m_codecContext-&gt;thread_count = <span class="number">8</span>;                 </span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼šçº¿ç¨‹æ•°è®¾ç½®éœ€è¦æ ¹æ®å…·ä½“æœºå™¨æƒ…å†µè°ƒæ•´ï¼Œ8çº¿ç¨‹å¹¶ä¸ä¸€å®šæ˜¯æœ€ä¼˜é€‰æ‹©ï¼ŒæŸäº›æƒ…å†µä¸‹å•çº¿ç¨‹å¯èƒ½æ›´å¿«ã€‚<br><img src="https://cdn-a.markji.com/files/67f6415ea5d66136f3e79dae_hd.png?e=1744203917604&amp;token=xX63b9jqTlDOcGmctt5K9254rV0LG8hS9BmDeFBy:zkWzRHXHGqC5Tm1PlePkEmoNX-M=" alt="å›¾ç‰‡1"></p>]]></content>
    
    
    <summary type="html">è¯¦ç»†ä»‹ç»VideoDecoderç±»çš„åˆå§‹åŒ–è¿‡ç¨‹å’Œopenå‡½æ•°çš„å®ç°ï¼ŒåŒ…æ‹¬FFmpegç›¸å…³é…ç½®å’Œæ³¨æ„äº‹é¡¹</summary>
    
    
    
    <category term="éŸ³è§†é¢‘å¼€å‘" scheme="https://eatbreads.github.io/categories/%E9%9F%B3%E8%A7%86%E9%A2%91%E5%BC%80%E5%8F%91/"/>
    
    
    <category term="éŸ³è§†é¢‘" scheme="https://eatbreads.github.io/tags/%E9%9F%B3%E8%A7%86%E9%A2%91/"/>
    
    <category term="C++" scheme="https://eatbreads.github.io/tags/C/"/>
    
    <category term="FFmpeg" scheme="https://eatbreads.github.io/tags/FFmpeg/"/>
    
  </entry>
  
  <entry>
    <title>rpcè¿œç¨‹è¿‡ç¨‹è°ƒç”¨å®ç°</title>
    <link href="https://eatbreads.github.io/posts/1a8fdb43.html"/>
    <id>https://eatbreads.github.io/posts/1a8fdb43.html</id>
    <published>2025-04-08T16:24:50.000Z</published>
    <updated>2025-04-08T16:32:36.082Z</updated>
    
    <content type="html"><![CDATA[<h1 id="rpcè¿œç¨‹è°ƒç”¨å®ç°"><a href="#rpcè¿œç¨‹è°ƒç”¨å®ç°" class="headerlink" title="rpcè¿œç¨‹è°ƒç”¨å®ç°"></a>rpcè¿œç¨‹è°ƒç”¨å®ç°</h1><h2 id="bindå‡½æ•°-åŒ…è£…å™¨"><a href="#bindå‡½æ•°-åŒ…è£…å™¨" class="headerlink" title="bindå‡½æ•°(åŒ…è£…å™¨)"></a>bindå‡½æ•°(åŒ…è£…å™¨)</h2><p>å°±æ˜¯å…ˆå¼„äº†ä¸ªæœ€é¡¶å±‚å°è£…çš„Function,æ¥æ”¶å¯è°ƒç”¨å‡½æ•°å’Œä¿©Datestream(é‡Œé¢æ˜¯å‚æ•°),ç„¶åç”¨stdçš„bindç»‘å®šwrapå’Œfunå’Œä¿©Datastream,å‘ç”Ÿå¦‚ä¸‹æ“ä½œ(å¾ˆå¤šæ˜¯ç¼–è¯‘æœŸæ‰§è¡Œ )</p><p>åŒ…è£…å™¨çš„ç¬¬ä¸€å‚å°±æ˜¯wrap,æˆ‘ä»¬ç”¨æ¨¡æ¿æ¥è¯†åˆ«å¯è°ƒç”¨å‡½æ•°çš„å‡½æ•°ç­¾å(è¿”å›å€¼å’Œå‚æ•°åˆ—è¡¨),ç„¶åå¯¹argså‚æ•°åˆ—è¡¨è¯†åˆ«å®é™…å‚æ•°ç±»å‹,ç„¶åä½¿ç”¨è¿™ä¸ªäº›å‚æ•°ç±»å‹,å®šä¹‰å‡ºä¸€ä¸ª&lt;&gt;å†…éƒ¨æ˜¯è¿™äº›çš„tuple</p><p>ç„¶åè¯†åˆ«tupleæ¨¡æ¿å‚æ•°ä¸ªæ•°,ç„¶åmakeå‡ºå¯¹åº”çš„ä¸‹æ ‡åˆ—è¡¨index_sequence,ç„¶åæŠŠåˆ—è¡¨ä¸­çš„Idâ€¦å¼€åŒ…,å¯¹æ¯ä¸€ä¸ªIdè°ƒç”¨get<Id>,ç„¶åæŠŠDatestreamå†…éƒ¨çš„å‚æ•°æ³¨å…¥è¿›getè¿”å›çš„å¼•ç”¨</p><p>ps:bindè¿™ä¸ªæ“ä½œåªæ˜¯ç”Ÿæˆäº†å¯¹åº”çš„funå’Œåºåˆ—åŒ–çš„äº¤äº’å‡½æ•°(ä½¿ç”¨std::bind),çœŸæ­£è°ƒç”¨è¿˜åœ¨call,å°±æ˜¯ç›´æ¥ä¼ å…¥ä¿©Datastreamç„¶åstringåå­—åŒ¹é…å“ˆå¸Œè¡¨(valueå°±æ˜¯bindäº§ç”Ÿçš„function),ç„¶åå°±ä¼šå»æ‰§è¡Œç”Ÿæˆçš„æ¨¡æ¿å‡½æ•°äº†</p><p>ps:æ¨¡æ¿å‚æ•°çš„å‘½åå°±æ˜¯å‡½æ•°æ¨¡æ¿å°±æ˜¯F,è¿”å›ç±»å‹å°±æ˜¯R,å…ƒç»„çš„ç±»å‹å°±æ˜¯Tuple</p><p>äºŒæ›´ï¼šæ‰€ä»¥ç¬¬ä¸€æ¬¡wrapæ˜¯bindä¸»ä½“ï¼Œç¬¬äºŒæ¬¡wrapæ˜¯ä¸ºäº†åˆ†å‰²å‡ºargså’Œè¿”å›ç±»å‹å¹¶ä¸”æ”¾è¿›functionï¼Œç¬¬ä¸‰æ¬¡wrapå°±æ˜¯æ‰§è¡Œä¸»ä½“<br><img src="https://cdn-a.markji.com/files/66572f98d3cf30b45ac9b1e7_hd.png?e=1744131868000&amp;token=xX63b9jqTlDOcGmctt5K9254rV0LG8hS9BmDeFBy:5cVCjyDxIgcZcSXKQqj59oShaxA=" alt="å›¾ç‰‡1"><br>ä¸‰æ›´ï¼šè¿™è¾¹functionè¯´åªè¦ä¸¤ä¸ªå‚æ•°ï¼Œå› ä¸ºè™½ç„¶å†…ç½®çš„wrapè¿˜è¦æ±‚äº†ä¸€ä¸ªfun,ä½†æ˜¯å› ä¸ºä»–å·²ç»è¢«bindç»‘å…¥äº†ï¼ˆåŒ…æ‹¬thisæŒ‡é’ˆï¼‰ï¼Œæ‰€ä»¥ç¡®å®å‚æ•°å°±åªéœ€è¦é‚£ä¿©å ä½ç¬¦ï¼Œå³è¿™æ ·æ“ä½œbindå°±ä¼šç”Ÿæˆä¸€ä¸ªfunctionï¼Œè¿”å›ç±»å‹æ˜¯voidä¸”æ¥å—ä¿©å‚æ•°çš„<br><img src="https://cdn-a.markji.com/files/66572f98d3cf30b45ac9b1e7_hd.png?e=1744131868000&amp;token=xX63b9jqTlDOcGmctt5K9254rV0LG8hS9BmDeFBy:5cVCjyDxIgcZcSXKQqj59oShaxA=" alt="å›¾ç‰‡1"><br>ä¸‰æ›´ï¼šè€Œä¸”æ¨¡æ¿å‚æ•°åœ¨ä¼ é€’çš„æ—¶å€™æ˜¯ä¸ä¼šå‘ç”Ÿæ”¹å˜çš„ï¼Œåªæœ‰ä¸€æ­¥ä»Få‡½æ•°æŒ‡é’ˆå˜æˆäº†Rå’Œargsï¼Œç„¶åè¿”å›å€¼çš„è¯†åˆ«æœ‰ä¸€æ¬¡æ˜¯é€šè¿‡Få‘Rè½¬æ¢ï¼Œè¿˜æœ‰ä¸€æ¬¡æ˜¯æ‰‹åŠ¨<R>æŒ‡å®šçš„<br><img src="https://cdn-a.markji.com/files/66572fb66ff0e9a10f1499b5_hd.png?e=1744131868000&amp;token=xX63b9jqTlDOcGmctt5K9254rV0LG8hS9BmDeFBy:G4_7HHAE1QOQPHRApzLvn9peJiY=" alt="å›¾ç‰‡1"><br><img src="https://cdn-a.markji.com/files/66572fc2d3cf30b45ac9b655_hd.png?e=1744131868000&amp;token=xX63b9jqTlDOcGmctt5K9254rV0LG8hS9BmDeFBy:i7m8vpQnjYqeltmrVPcTCSidyzY=" alt="å›¾ç‰‡1"><br>ç„¶åæ˜¯å®¢æˆ·ç«¯è°ƒç”¨<br><img src="https://cdn-a.markji.com/files/66572fea6ff0e9a10f14a02b_hd.png?e=1744131868000&amp;token=xX63b9jqTlDOcGmctt5K9254rV0LG8hS9BmDeFBy:4LlAxyGHi9rP9Oc7VrBYapSphrk=" alt="å›¾ç‰‡1"><br>ç„¶åæ˜¯workå‡½æ•°<br><img src="https://cdn-a.markji.com/files/6657303bd3cf30b45ac9c418_hd.png?e=1744131868001&amp;token=xX63b9jqTlDOcGmctt5K9254rV0LG8hS9BmDeFBy:Mt3hcyEFPmnOv_hQudoD0gCqmCU=" alt="å›¾ç‰‡1"><br><img src="https://cdn-a.markji.com/files/665730576ff0e9a10f14aadc_hd.png?e=1744131868001&amp;token=xX63b9jqTlDOcGmctt5K9254rV0LG8hS9BmDeFBy:LZ9Ers_459wz5RfrPWrkkeyCAzc=" alt="å›¾ç‰‡1"></p>]]></content>
    
    
    <summary type="html">è®°å½•RPCè¿œç¨‹è°ƒç”¨å®ç°è¿‡ç¨‹ä¸­çš„æŠ€æœ¯ç»†èŠ‚å’Œæ›´æ–°è¯´æ˜</summary>
    
    
    
    <category term="åç«¯å¼€å‘" scheme="https://eatbreads.github.io/categories/%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/"/>
    
    
    <category term="C++" scheme="https://eatbreads.github.io/tags/C/"/>
    
    <category term="ç½‘ç»œç¼–ç¨‹" scheme="https://eatbreads.github.io/tags/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/"/>
    
    <category term="RPC" scheme="https://eatbreads.github.io/tags/RPC/"/>
    
  </entry>
  
  <entry>
    <title>RPCè¿œç¨‹è¿‡ç¨‹è°ƒç”¨C++å®ç°</title>
    <link href="https://eatbreads.github.io/posts/63d129aa.html"/>
    <id>https://eatbreads.github.io/posts/63d129aa.html</id>
    <published>2025-04-08T16:22:24.000Z</published>
    <updated>2025-04-08T16:32:36.085Z</updated>
    
    <content type="html"><![CDATA[<h1 id="RPCè¿œç¨‹è¿‡ç¨‹è°ƒç”¨C-å®ç°"><a href="#RPCè¿œç¨‹è¿‡ç¨‹è°ƒç”¨C-å®ç°" class="headerlink" title="RPCè¿œç¨‹è¿‡ç¨‹è°ƒç”¨C++å®ç°"></a>RPCè¿œç¨‹è¿‡ç¨‹è°ƒç”¨C++å®ç°</h1><h2 id="æ ¸å¿ƒå®ç°åŸç†"><a href="#æ ¸å¿ƒå®ç°åŸç†" class="headerlink" title="æ ¸å¿ƒå®ç°åŸç†"></a>æ ¸å¿ƒå®ç°åŸç†</h2><p>RPCæ¡†æ¶çš„æ ¸å¿ƒåœ¨äºå‡½æ•°ç»‘å®šå’Œå‚æ•°ä¼ é€’æœºåˆ¶ã€‚å½“è°ƒç”¨<code>bind</code>å‡½æ•°æ—¶ï¼Œä¼šï¼š</p><ol><li>å°†stringç±»å‹çš„å‡½æ•°åå’Œå¯¹åº”çš„å‡½æ•°æŒ‡é’ˆ(ä½¿ç”¨functionå°è£…)å­˜å…¥map</li><li>è‡ªåŠ¨è¯†åˆ«å‚æ•°åˆ—è¡¨å¹¶ç”Ÿæˆæ¨¡æ¿å…ƒç»„æ¥é€‚é…ä¼ å‚</li><li>é€šè¿‡å‡½æ•°åå’Œåºåˆ—åŒ–å®ç°å‡½æ•°è°ƒç”¨çš„å‚æ•°ä¼ é€’</li><li>è°ƒç”¨functionåŒ…è£…å™¨æ‰§è¡Œå‡½æ•°å¹¶å°†ç»“æœåºåˆ—åŒ–è¿”å›ç»™å®¢æˆ·ç«¯</li></ol><h2 id="ç‰¹æ€§æ”¯æŒ"><a href="#ç‰¹æ€§æ”¯æŒ" class="headerlink" title="ç‰¹æ€§æ”¯æŒ"></a>ç‰¹æ€§æ”¯æŒ</h2><ul><li>æ”¯æŒè‡ªå®šä¹‰ç±»å‹çš„RPCè°ƒç”¨</li><li>åªéœ€è¦å®ç°åºåˆ—åŒ–æ¥å£å³å¯</li><li>å‚è€ƒäº†buttonrpcå¼€æºé¡¹ç›®çš„å®ç°<br><img src="https://cdn-a.markji.com/files/6693b2eb63e4546df5d7a66c_hd.png?e=1744131868001&amp;token=xX63b9jqTlDOcGmctt5K9254rV0LG8hS9BmDeFBy:IwWqueUBKSldTG6TVdR2peqFuoU=" alt="å›¾ç‰‡1"><br><img src="https://cdn-a.markji.com/files/6693b2fa8f51739870084132_hd.png?e=1744131868001&amp;token=xX63b9jqTlDOcGmctt5K9254rV0LG8hS9BmDeFBy:cr2upfN-vsSSiume4vDUFcSdGAs=" alt="å›¾ç‰‡1"><br><img src="https://cdn-a.markji.com/files/6648498b462469d45e30440e_hd.png?e=1744131868000&amp;token=xX63b9jqTlDOcGmctt5K9254rV0LG8hS9BmDeFBy:ga0bTiENZ7QqsgjNIll-wWQuMIo=" alt="å›¾ç‰‡1"><h2 id="ä½¿ç”¨ç¤ºä¾‹"><a href="#ä½¿ç”¨ç¤ºä¾‹" class="headerlink" title="ä½¿ç”¨ç¤ºä¾‹"></a>ä½¿ç”¨ç¤ºä¾‹</h2><img src="https://cdn-a.markji.com/files/66484c19462469d45e307b9b_hd.png?e=1744131868000&amp;token=xX63b9jqTlDOcGmctt5K9254rV0LG8hS9BmDeFBy:FF-D51l7RNwQVkl9iTQlQuJfetE=" alt="å›¾ç‰‡1"><br><img src="https://cdn-a.markji.com/files/664850f6db29be03af40f184_hd.png?e=1744131868000&amp;token=xX63b9jqTlDOcGmctt5K9254rV0LG8hS9BmDeFBy:VeFg5vaofxivt9EU1DtCxw4W7H8=" alt="å›¾ç‰‡1"><br>åœ¨æœåŠ¡ç«¯å£°æ˜å¹¶ç»‘å®šå‡½æ•°ï¼š</li><li>ç¬¬ä¸€ä¸ªå‚æ•°ï¼šå‡½æ•°å(stringç±»å‹)</li><li>ç¬¬äºŒä¸ªå‚æ•°ï¼šå‡½æ•°æŒ‡é’ˆ</li></ul><p>è¿™ç§è®¾è®¡ä½¿å¾—RPCè°ƒç”¨å˜å¾—ç®€å•ç›´è§‚ï¼ŒåŒæ—¶ä¿æŒäº†è‰¯å¥½çš„æ‰©å±•æ€§ã€‚</p>]]></content>
    
    
    <summary type="html">ä»‹ç»åŸºäºC++å®ç°çš„RPCè¿œç¨‹è¿‡ç¨‹è°ƒç”¨æ¡†æ¶ï¼ŒåŒ…æ‹¬å‡½æ•°ç»‘å®šã€å‚æ•°ä¼ é€’å’Œåºåˆ—åŒ–ç­‰æ ¸å¿ƒåŠŸèƒ½</summary>
    
    
    
    <category term="åç«¯å¼€å‘" scheme="https://eatbreads.github.io/categories/%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/"/>
    
    
    <category term="C++" scheme="https://eatbreads.github.io/tags/C/"/>
    
    <category term="ç½‘ç»œç¼–ç¨‹" scheme="https://eatbreads.github.io/tags/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/"/>
    
    <category term="RPC" scheme="https://eatbreads.github.io/tags/RPC/"/>
    
    <category term="åˆ†å¸ƒå¼ç³»ç»Ÿ" scheme="https://eatbreads.github.io/tags/%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F/"/>
    
  </entry>
  
  <entry>
    <title>ä»‹ç»ä¸€ä¸‹cpuä¸­çš„yuvè½¬rgbå’Œopenglä¸­çš„yuvè½¬rgbå’Œç›´æ¥nv12è½¬rbgæ–¹æ³•</title>
    <link href="https://eatbreads.github.io/posts/f4cc5b12.html"/>
    <id>https://eatbreads.github.io/posts/f4cc5b12.html</id>
    <published>2025-04-08T15:59:22.000Z</published>
    <updated>2025-04-09T00:32:55.195Z</updated>
    
    <content type="html"><![CDATA[<h1>YUV/NV12åˆ°RGBçš„è½¬æ¢æ–¹æ¡ˆ</h1><h2 id="CPUä¸­çš„YUVè½¬RGB">CPUä¸­çš„YUVè½¬RGB</h2><h3 id="FFmpegæ–¹æ¡ˆ">FFmpegæ–¹æ¡ˆ</h3><ul><li>FFmpegè§£ç é»˜è®¤è¾“å‡ºYUVæ ¼å¼</li><li>ä½¿ç”¨<code>sws_getCachedContext</code>è¿›è¡Œæ ¼å¼è½¬æ¢</li><li>è½¬æ¢ç›®æ ‡æ ¼å¼ä¸º<code>AV_PIX_FMT_RGBA</code></li><li>é€‚åˆç®€å•åœºæ™¯ï¼Œä½†CPUæ¶ˆè€—è¾ƒå¤§<br><img src="https://cdn-a.markji.com/files/67efabbae940a885d8a18beb_hd.png?e=1744130053087&amp;token=xX63b9jqTlDOcGmctt5K9254rV0LG8hS9BmDeFBy:Dr3M6vI51akx8UsbYqxDKiHGGYY=" alt="å›¾ç‰‡1"></li></ul><h2 id="OpenGLä¸­çš„YUVè½¬RGBæ–¹æ¡ˆ">OpenGLä¸­çš„YUVè½¬RGBæ–¹æ¡ˆ</h2><h3 id="æ–¹æ¡ˆä¸€ï¼šRGBçº¹ç†æ¸²æŸ“">æ–¹æ¡ˆä¸€ï¼šRGBçº¹ç†æ¸²æŸ“</h3><p><img src="https://cdn-a.markji.com/files/67efabe2e940a885d8a18ea2_hd.png?e=1744130053087&amp;token=xX63b9jqTlDOcGmctt5K9254rV0LG8hS9BmDeFBy:jqDoEHl78m5YLERVbYFjI-pErow=" alt="å›¾ç‰‡1"></p><ol><li>ç»§æ‰¿å…³ç³»</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">PlayImage</span> : <span class="keyword">public</span> QOpenGLWidget, <span class="keyword">public</span> QOpenGLFunctions_3_3_Core</span><br></pre></td></tr></table></figure><ol start="2"><li>åˆå§‹åŒ–</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">initializeGL</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// åˆ›å»ºå¹¶ç»‘å®šVAO/VBO/IBO</span></span><br><span class="line">    <span class="comment">// ç¼–è¯‘è¿æ¥ç€è‰²å™¨ç¨‹åº</span></span><br><span class="line">    <span class="comment">// å¯ç”¨é¡¶ç‚¹å±æ€§æ•°ç»„</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="3"><li>å›¾åƒæ›´æ–°</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">updateImage</span><span class="params">(<span class="type">const</span> QImage&amp; image)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// å‚ç›´ç¿»è½¬(OpenGLçº¹ç†Yè½´ç›¸å)</span></span><br><span class="line">    m_texture = <span class="keyword">new</span> <span class="built_in">QOpenGLTexture</span>(image.<span class="built_in">mirrored</span>());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="4"><li>æ¸²æŸ“</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">paintGL</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// ç»‘å®šç€è‰²å™¨ç¨‹åº</span></span><br><span class="line">    <span class="comment">// ç»‘å®šçº¹ç†</span></span><br><span class="line">    <span class="comment">// ç»‘å®šVAO</span></span><br><span class="line">    <span class="built_in">glDrawElements</span>(...);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ–¹æ¡ˆäºŒï¼šç›´æ¥YUVæ¸²æŸ“">æ–¹æ¡ˆäºŒï¼šç›´æ¥YUVæ¸²æŸ“</h3><p><img src="https://cdn-a.markji.com/files/67efac311137c8f4e5af9cb9_hd.png?e=1744130053087&amp;token=xX63b9jqTlDOcGmctt5K9254rV0LG8hS9BmDeFBy:BvYuGOTK2QfpMlTtQ5sb0X1BJoA=" alt="å›¾ç‰‡1"><br><img src="https://cdn-a.markji.com/files/67efac3fe940a885d8a19690_hd.png?e=1744130053087&amp;token=xX63b9jqTlDOcGmctt5K9254rV0LG8hS9BmDeFBy:MFIybXXJT39g33YdPqRPOs2KGFA=" alt="å›¾ç‰‡1"></p><ol><li>æ•°æ®ä¼ é€’</li></ol><ul><li>ç›´æ¥ä½¿ç”¨<code>AVFrame</code>ä¼ é€’è§£ç æ•°æ®</li><li>ä½¿ç”¨<code>BlockingQueuedConnection</code>ç¡®ä¿æ•°æ®å®‰å…¨</li></ul><ol start="2"><li>ä¿¡å·æ§½é…ç½®</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ³¨å†ŒAVFrameç”¨äºä¿¡å·ä¼ é€’</span></span><br><span class="line"><span class="built_in">Q_DECLARE_METATYPE</span>(AVFrame)</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿æ¥ä¿¡å·æ§½</span></span><br><span class="line"><span class="built_in">connect</span>(m_readThread, &amp;ReadThread::repaint,</span><br><span class="line">        playImage, &amp;PlayImage::repaint,</span><br><span class="line">        Qt::BlockingQueuedConnection);</span><br></pre></td></tr></table></figure><ol start="3"><li>çº¹ç†å¤„ç†</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¸‰ä¸ªçº¹ç†å¯¹åº”YUVåˆ†é‡</span></span><br><span class="line">QOpenGLTexture *m_texY, *m_texU, *m_texV;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¾ç½®çº¹ç†å•å…ƒ</span></span><br><span class="line">m_program-&gt;<span class="built_in">setUniformValue</span>(<span class="string">&quot;tex_y&quot;</span>, <span class="number">0</span>);</span><br><span class="line">m_program-&gt;<span class="built_in">setUniformValue</span>(<span class="string">&quot;tex_u&quot;</span>, <span class="number">1</span>);</span><br><span class="line">m_program-&gt;<span class="built_in">setUniformValue</span>(<span class="string">&quot;tex_v&quot;</span>, <span class="number">2</span>);</span><br></pre></td></tr></table></figure><ol start="4"><li>æ¸²æŸ“å®ç°</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">paintGL</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    m_texY-&gt;<span class="built_in">bind</span>(<span class="number">0</span>);</span><br><span class="line">    m_texU-&gt;<span class="built_in">bind</span>(<span class="number">1</span>);</span><br><span class="line">    m_texV-&gt;<span class="built_in">bind</span>(<span class="number">2</span>);</span><br><span class="line">    <span class="comment">// æ‰§è¡Œç»˜åˆ¶</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="OpenGLä¸­ç›´æ¥å¤„ç†NV12">OpenGLä¸­ç›´æ¥å¤„ç†NV12</h2><p><img src="https://cdn-a.markji.com/files/67efac7c1137c8f4e5afa991_hd.png?e=1744130053087&amp;token=xX63b9jqTlDOcGmctt5K9254rV0LG8hS9BmDeFBy:FoRKl2CActfg1Z33Ow7avwu4Sdc=" alt="å›¾ç‰‡1"></p><h3 id="ä¼˜åŠ¿">ä¼˜åŠ¿</h3><ul><li>é¿å…CPUä¸­çš„æ ¼å¼è½¬æ¢</li><li>æ€§èƒ½æå‡çº¦1/3</li><li>ç›´æ¥åœ¨GPUä¸­å®Œæˆè½¬æ¢</li></ul><h3 id="å®ç°è¦ç‚¹">å®ç°è¦ç‚¹</h3><ol><li>ä½¿ç”¨<code>av_hwframe_map</code>æ›¿ä»£<code>av_hwframe_transfer_data</code></li><li>ç§»é™¤<code>sws_scale</code>ç›¸å…³ä»£ç </li><li>ç›´æ¥è¿”å›ç¡¬ä»¶å¸§</li></ol><h3 id="æ ¼å¼é€‚é…">æ ¼å¼é€‚é…</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">initialize</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// æ ¹æ®è¾“å…¥æ ¼å¼é€‰æ‹©åˆå§‹åŒ–æ–¹å¼</span></span><br><span class="line">    <span class="keyword">if</span> (format == AV_PIX_FMT_NV12) &#123;</span><br><span class="line">        <span class="built_in">initializeNV12</span>();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">initializeYUV</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ¸²æŸ“æµç¨‹">æ¸²æŸ“æµç¨‹</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">paintGL</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (m_format == AV_PIX_FMT_NV12) &#123;</span><br><span class="line">        <span class="comment">// NV12æ¸²æŸ“æµç¨‹</span></span><br><span class="line">        <span class="built_in">bindNV12Textures</span>();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// YUVæ¸²æŸ“æµç¨‹</span></span><br><span class="line">        <span class="built_in">bindYUVTextures</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// æ‰§è¡Œç»˜åˆ¶</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ€§èƒ½å¯¹æ¯”">æ€§èƒ½å¯¹æ¯”</h2><ol><li><p>CPUè½¬æ¢æ–¹æ¡ˆ</p><ul><li>å®ç°ç®€å•</li><li>CPUå ç”¨é«˜</li><li>é€‚åˆç®€å•åœºæ™¯</li></ul></li><li><p>OpenGL YUVæ–¹æ¡ˆ</p><ul><li>ä¸­ç­‰å¤æ‚åº¦</li><li>GPUå¤„ç†</li><li>æ€§èƒ½è¾ƒå¥½</li></ul></li><li><p>OpenGL NV12æ–¹æ¡ˆ</p><ul><li>å®ç°è¾ƒå¤æ‚</li><li>æ€§èƒ½æœ€ä¼˜</li><li>é€‚åˆé«˜æ€§èƒ½éœ€æ±‚</li></ul></li></ol><pre><code></code></pre>]]></content>
    
    
    <summary type="html">è¯¦ç»†ä»‹ç»åœ¨CPUå’ŒGPUä¸­å®ç°YUV/NV12åˆ°RGBè½¬æ¢çš„ä¸åŒæ–¹æ¡ˆåŠå…¶æ€§èƒ½å¯¹æ¯”</summary>
    
    
    
    <category term="éŸ³è§†é¢‘å¼€å‘" scheme="https://eatbreads.github.io/categories/%E9%9F%B3%E8%A7%86%E9%A2%91%E5%BC%80%E5%8F%91/"/>
    
    
    <category term="OpenGL" scheme="https://eatbreads.github.io/tags/OpenGL/"/>
    
    <category term="FFmpeg" scheme="https://eatbreads.github.io/tags/FFmpeg/"/>
    
    <category term="å›¾åƒå¤„ç†" scheme="https://eatbreads.github.io/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/"/>
    
  </entry>
  
  <entry>
    <title>éŸ³è§†é¢‘è½¯ç¡¬è§£ç æµç¨‹è¯¦è§£</title>
    <link href="https://eatbreads.github.io/posts/2c4a1d51.html"/>
    <id>https://eatbreads.github.io/posts/2c4a1d51.html</id>
    <published>2025-04-08T15:56:08.000Z</published>
    <updated>2025-04-08T15:57:10.126Z</updated>
    
    <content type="html"><![CDATA[<h1>éŸ³è§†é¢‘è§£ç æµç¨‹è¯¦è§£</h1><h2 id="è½¯è§£ç åŸºç¡€æµç¨‹">è½¯è§£ç åŸºç¡€æµç¨‹</h2><ol><li>æ‰“å¼€è¾“å…¥æ–‡ä»¶</li><li>è¯»å–åª’ä½“æ–‡ä»¶ä¿¡æ¯</li><li>æŸ¥è¯¢è§†é¢‘æµ</li><li>è·å–è§£ç å™¨</li><li>è·å–è§£ç å™¨ä¸Šä¸‹æ–‡</li><li>ä½¿ç”¨è§†é¢‘æµçš„codecparä¸ºè§£ç å™¨ä¸Šä¸‹æ–‡èµ‹å€¼</li><li>æ‰“å¼€è§£ç å™¨</li><li>è·å–åŸå§‹æ•°æ®å¸§</li><li>å°†æ•°æ®å‘é€ç»™è§£ç å™¨</li><li>ä»è§£ç å™¨è¯»å–è§£ç åçš„æ•°æ®</li><li>è·å–å›¾åƒè½¬æ¢ä¸Šä¸‹æ–‡</li><li>å°†è§£ç çš„å›¾åƒæ ¼å¼è½¬æ¢æˆQImage</li></ol><h2 id="ç¡¬è§£ç æµç¨‹">ç¡¬è§£ç æµç¨‹</h2><h3 id="åŸºç¡€æ­¥éª¤">åŸºç¡€æ­¥éª¤</h3><ol><li>æ‰“å¼€è¾“å…¥æ–‡ä»¶<ul><li><code>avformat_open_input</code></li></ul></li><li>è¯»å–åª’ä½“æ–‡ä»¶ä¿¡æ¯<ul><li><code>avformat_find_stream_info</code></li></ul></li><li>æŸ¥è¯¢è§†é¢‘æµ<ul><li><code>av_find_best_stream</code></li></ul></li><li>è·å–è§£ç å™¨<ul><li><code>avcodec_find_decoder</code></li></ul></li><li>è·å–è§£ç å™¨ä¸Šä¸‹æ–‡<ul><li><code>avcodec_alloc_context3</code></li></ul></li><li>ä½¿ç”¨è§†é¢‘æµçš„codecparèµ‹å€¼<ul><li><code>avcodec_parameters_to_context</code></li></ul></li></ol><h3 id="ç¡¬ä»¶åŠ é€Ÿç›¸å…³æ­¥éª¤">ç¡¬ä»¶åŠ é€Ÿç›¸å…³æ­¥éª¤</h3><ol><li>æ£€ç´¢ç¼–è§£ç å™¨æ”¯æŒçš„ç¡¬ä»¶é…ç½®<ul><li><code>avcodec_get_hw_config</code></li></ul></li><li>éå†æ”¯æŒçš„ç¼–è§£ç å™¨è®¾å¤‡ç±»å‹<ul><li><code>av_hwdevice_iterate_types</code></li><li>åœ¨æ„é€ å‡½æ•°ä¸­è®°å½•æ”¯æŒçš„ç±»å‹åˆ°æ•°ç»„</li></ul></li><li>æ‰“å¼€æŒ‡å®šç±»å‹çš„ç¼–è§£ç å™¨è®¾å¤‡<ul><li><code>av_hwdevice_ctx_create</code></li></ul></li><li>æ³¨å†Œç¡¬ä»¶åƒç´ æ ¼å¼å›è°ƒ<ul><li><code>m_codecContext-&gt;get_format = get_hw_format</code></li></ul></li></ol><h3 id="è§£ç æ­¥éª¤">è§£ç æ­¥éª¤</h3><ol><li>æ‰“å¼€è§£ç å™¨<ul><li><code>avcodec_open2</code></li></ul></li><li>è¯»å–åŸå§‹æ•°æ®å¸§<ul><li><code>av_read_frame</code></li></ul></li><li>å‘é€æ•°æ®åˆ°è§£ç å™¨<ul><li><code>avcodec_send_packet</code></li></ul></li><li>è¯»å–è§£ç åçš„æ•°æ®<ul><li><code>avcodec_receive_frame</code></li></ul></li><li>GPUæ•°æ®æ‹·è´åˆ°CPU<ul><li><code>av_hwframe_transfer_data</code></li><li><code>av_hwframe_map(m_frameHW, m_frame, 0)</code></li></ul></li><li>è·å–å›¾åƒè½¬æ¢ä¸Šä¸‹æ–‡<ul><li><code>sws_getCachedContext</code></li></ul></li><li>è½¬æ¢ä¸ºQImageæ ¼å¼<ul><li><code>sws_scale</code></li></ul></li></ol><h2 id="è½¯è§£ç æ˜¾ç¤ºå®ç°-PlayImageç±»">è½¯è§£ç æ˜¾ç¤ºå®ç°(PlayImageç±»)</h2><h3 id="åŸºäºQWidget">åŸºäºQWidget</h3><ol><li>æ¥æ”¶å›¾åƒä¿¡å·å¹¶å“åº”updateImageæ§½å‡½æ•°</li><li>è½¬æ¢ä¸ºQPixmap</li><li>è°ƒç”¨updateè§¦å‘é‡ç»˜</li><li>paintEventä¸­ç»˜åˆ¶</li></ol><h3 id="YUVè½¬RGB">YUVè½¬RGB</h3><ul><li>FFmpegé»˜è®¤è§£ç ä¸ºYUVæ ¼å¼</li><li>ä½¿ç”¨<code>sws_getCachedContext</code>è½¬æ¢ä¸ºRGB(AV_PIX_FMT_RGBA)</li></ul><h2 id="OpenGLæ¸²æŸ“ä¼˜åŒ–">OpenGLæ¸²æŸ“ä¼˜åŒ–</h2><h3 id="è½¯è§£ç -OpenGL-YUV-RGB">è½¯è§£ç +OpenGL(YUV-&gt;RGB)</h3><ol><li>ç»§æ‰¿QOpenGLWidgetå’ŒQOpenGLFunctions</li><li>initializeGLä¸­è®¾ç½®VAO/VBO/IBO</li><li>updateImageä¸­å¤„ç†çº¹ç†</li><li>paintGLä¸­æ‰§è¡Œç»˜åˆ¶</li></ol><h3 id="è½¯è§£ç -OpenGL-ç›´æ¥YUV">è½¯è§£ç +OpenGL(ç›´æ¥YUV)</h3><ol><li>ä½¿ç”¨AVFrameç›´æ¥ä¼ é€’</li><li>ä½¿ç”¨ä¸‰ä¸ªçº¹ç†å¤„ç†YUVæ•°æ®</li><li>åœ¨GPUä¸­å®Œæˆæ ¼å¼è½¬æ¢</li></ol><h3 id="ç¡¬è§£ç -OpenGL-NV12">ç¡¬è§£ç +OpenGL(NV12)</h3><ol><li>ä½¿ç”¨<code>av_hwframe_map</code>æ›¿ä»£transfer_data</li><li>æ ¹æ®æ ¼å¼é€‰æ‹©åˆå§‹åŒ–æ–¹å¼</li><li>ç›´æ¥åœ¨GPUä¸­å®ŒæˆNV12åˆ°RGBçš„è½¬æ¢</li></ol><h2 id="æ‘„åƒå¤´é‡‡é›†">æ‘„åƒå¤´é‡‡é›†</h2><ol><li>æ³¨å†Œè®¾å¤‡<ul><li><code>avdevice_register_all</code></li></ul></li><li>æŸ¥è¯¢è¾“å…¥è®¾å¤‡<ul><li><code>av_find_input_format</code></li></ul></li><li>æ‰§è¡Œæ ‡å‡†è§£ç æµç¨‹</li><li>OpenGLä¸­å®ŒæˆYUVè½¬RGB</li></ol><h2 id="è§†é¢‘å½•åˆ¶æµç¨‹">è§†é¢‘å½•åˆ¶æµç¨‹</h2><ol><li>åˆ›å»ºè¾“å‡ºä¸Šä¸‹æ–‡<ul><li><code>avformat_alloc_output_context2</code></li></ul></li><li>åˆå§‹åŒ–IOä¸Šä¸‹æ–‡<ul><li><code>avio_open</code></li></ul></li><li>é…ç½®ç¼–ç å™¨</li><li>åˆ›å»ºè§†é¢‘æµ</li><li>å†™å…¥å¤´ä¿¡æ¯</li><li>ç¼–ç å¾ªç¯</li><li>å†™å…¥å°¾ä¿¡æ¯</li></ol>]]></content>
    
    
    <summary type="html">è¯¦ç»†ä»‹ç»éŸ³è§†é¢‘è½¯è§£ç å’Œç¡¬è§£ç çš„å®ç°æµç¨‹ï¼ŒåŒ…æ‹¬FFmpegè§£ç ã€OpenGLæ¸²æŸ“ç­‰æŠ€æœ¯ç»†èŠ‚</summary>
    
    
    
    <category term="éŸ³è§†é¢‘å¼€å‘" scheme="https://eatbreads.github.io/categories/%E9%9F%B3%E8%A7%86%E9%A2%91%E5%BC%80%E5%8F%91/"/>
    
    
    <category term="éŸ³è§†é¢‘" scheme="https://eatbreads.github.io/tags/%E9%9F%B3%E8%A7%86%E9%A2%91/"/>
    
    <category term="OpenGL" scheme="https://eatbreads.github.io/tags/OpenGL/"/>
    
    <category term="FFmpeg" scheme="https://eatbreads.github.io/tags/FFmpeg/"/>
    
  </entry>
  
  <entry>
    <title>FFmpegå‘½ä»¤è¡Œå’ŒAPIä½¿ç”¨æŒ‡å—</title>
    <link href="https://eatbreads.github.io/posts/66a36265.html"/>
    <id>https://eatbreads.github.io/posts/66a36265.html</id>
    <published>2025-04-08T15:53:52.000Z</published>
    <updated>2025-04-08T15:55:01.820Z</updated>
    
    <content type="html"><![CDATA[<h1>FFmpegä½¿ç”¨æŒ‡å—</h1><h2 id="å‘½ä»¤è¡Œå‚æ•°">å‘½ä»¤è¡Œå‚æ•°</h2><h3 id="åŸºç¡€å‚æ•°">åŸºç¡€å‚æ•°</h3><ul><li><code>-a/vn</code>: å»æ‰éŸ³é¢‘æˆ–è§†é¢‘</li><li><code>-a/vcodec</code>: æŒ‡å®šéŸ³è§†é¢‘ç¼–ç å™¨<ul><li><code>copy</code>: ä¸é‡æ–°ç¼–ç </li><li>å¯æŒ‡å®šä¸ºh264æˆ–aacç­‰</li></ul></li></ul><h3 id="å¸¸ç”¨å‘½ä»¤">å¸¸ç”¨å‘½ä»¤</h3><h4 id="1-è·å–è§†é¢‘ä¿¡æ¯">1. è·å–è§†é¢‘ä¿¡æ¯</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg -i video.avi</span><br></pre></td></tr></table></figure><h4 id="2-éŸ³è§†é¢‘æµå¤„ç†">2. éŸ³è§†é¢‘æµå¤„ç†</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å»æ‰è§†é¢‘æµ</span></span><br><span class="line">ffmpeg -i input.mp4 -an -vcodec copy output.mp4</span><br><span class="line"></span><br><span class="line"><span class="comment"># éŸ³é¢‘é‡ç¼–ç ä¸ºAAC</span></span><br><span class="line">ffmpeg -i input.mp4 -acodec aac output.mp4</span><br><span class="line"></span><br><span class="line"><span class="comment"># è½¬æ¢ä¸ºWAVæ ¼å¼</span></span><br><span class="line">ffmpeg -i input.mp4 -acodec pcm_s16le output.wav</span><br></pre></td></tr></table></figure><h4 id="3-è§†é¢‘æˆªå›¾">3. è§†é¢‘æˆªå›¾</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg -i test.mp4 -ss 10 -frames:v 1 -s 1920x1080 output.jpg</span><br></pre></td></tr></table></figure><p>å‚æ•°è¯´æ˜ï¼š</p><ul><li><code>-ss &lt;æ—¶é—´&gt;</code>: æŒ‡å®šèµ·å§‹æ—¶é—´</li><li><code>-s &lt;å®½åº¦xé«˜åº¦&gt;</code>: è°ƒæ•´å›¾ç‰‡å¤§å°</li><li><code>-frames:v 1</code>: åªæˆªå–ä¸€å¸§</li></ul><h4 id="4-æ·»åŠ æ°´å°">4. æ·»åŠ æ°´å°</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å›¾ç‰‡æ°´å°</span></span><br><span class="line">ffmpeg -i input.mp4 -i logo.png -filter_complex <span class="string">&quot;overlay=10:10&quot;</span> output.mp4</span><br></pre></td></tr></table></figure><p>ä½ç½®å‚æ•°ï¼š</p><ul><li>å·¦ä¸Šè§’: <code>overlay=10:10</code></li><li>å³ä¸Šè§’: <code>overlay=W-w-10:10</code></li><li>å·¦ä¸‹è§’: <code>overlay=10:H-h-10</code></li><li>å³ä¸‹è§’: <code>overlay=W-w-10:H-h-10</code></li></ul><p>å…¶ä¸­ï¼š</p><ul><li>W: è§†é¢‘å®½åº¦</li><li>H: è§†é¢‘é«˜åº¦</li><li>w: æ°´å°å®½åº¦</li><li>h: æ°´å°é«˜åº¦</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ–‡å­—æ°´å°</span></span><br><span class="line">ffmpeg -i input.flv -vf <span class="string">&quot;drawtext=fontfile=simhei.ttf: text=&#x27;æŠ–éŸ³&#x27;:x=100:y=10:fontsize=24:fontcolor=yellow:shadowy=2&quot;</span> drawtext.mp4</span><br><span class="line"></span><br><span class="line"><span class="comment"># GIFæ°´å°</span></span><br><span class="line">ffmpeg -y -i test2.mp4 -ignore_loop 0 -i test.gif -filter_complex overlay=0:H-h test_out2.mp4</span><br></pre></td></tr></table></figure><h4 id="5-è§†é¢‘æ—‹è½¬">5. è§†é¢‘æ—‹è½¬</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg -i test.mp4 -vf <span class="string">&quot;transpose=1&quot;</span> out.mp4  <span class="comment"># é¡ºæ—¶é’ˆæ—‹è½¬90Â°</span></span><br></pre></td></tr></table></figure><h2 id="APIä½¿ç”¨">APIä½¿ç”¨</h2><h3 id="è§†é¢‘æ’­æ”¾æµç¨‹">è§†é¢‘æ’­æ”¾æµç¨‹</h3><h4 id="1-æ ¼å¼ä¸Šä¸‹æ–‡-AVFormatContext">1. æ ¼å¼ä¸Šä¸‹æ–‡(AVFormatContext)</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">AVFormatContext *pFormatCtx;</span><br><span class="line">pFormatCtx = <span class="built_in">avformat_alloc_context</span>();  <span class="comment">// åˆ†é…æ ¼å¼ä¸Šä¸‹æ–‡</span></span><br><span class="line"><span class="built_in">avformat_open_input</span>(&amp;pFormatCtx, filePath.<span class="built_in">toUtf8</span>().<span class="built_in">constData</span>(), <span class="number">0</span>, <span class="number">0</span>);  <span class="comment">// åˆå§‹åŒ–ä¸Šä¸‹æ–‡</span></span><br><span class="line"><span class="built_in">avformat_find_stream_info</span>(pFormatCtx, <span class="literal">NULL</span>);  <span class="comment">// è·å–æµä¿¡æ¯</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æŸ¥æ‰¾è§†é¢‘æµç´¢å¼•</span></span><br><span class="line"><span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; pFormatCtx-&gt;nb_streams; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (pFormatCtx-&gt;streams[i]-&gt;codecpar-&gt;codec_type == AVMEDIA_TYPE_VIDEO) &#123;</span><br><span class="line">        streamIndex = i;</span><br><span class="line">        isVideo = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2-è§£ç å™¨è®¾ç½®">2. è§£ç å™¨è®¾ç½®</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">AVCodecContext *pAVctx;  <span class="comment">// è§£ç å™¨ä¸Šä¸‹æ–‡</span></span><br><span class="line">AVCodec *pCodec;         <span class="comment">// å®é™…è§£ç å™¨</span></span><br><span class="line"></span><br><span class="line">pAVctx = <span class="built_in">avcodec_alloc_context3</span>(<span class="literal">NULL</span>);</span><br><span class="line"><span class="built_in">avcodec_parameters_to_context</span>(pAVctx, pFormatCtx-&gt;streams[streamIndex]-&gt;codecpar);</span><br><span class="line">pCodec = <span class="built_in">avcodec_find_decoder</span>(pAVctx-&gt;codec_id);</span><br><span class="line"><span class="built_in">avcodec_open2</span>(pAVctx, pCodec, <span class="literal">NULL</span>);</span><br></pre></td></tr></table></figure><h4 id="3-æ•°æ®åŒ…å’Œå¸§å¤„ç†">3. æ•°æ®åŒ…å’Œå¸§å¤„ç†</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">AVPacket *pAVpkt = <span class="built_in">av_packet_alloc</span>();</span><br><span class="line">AVFrame *pAVframe = <span class="built_in">av_frame_alloc</span>();</span><br><span class="line">AVFrame *pAVframeRGB = <span class="built_in">av_frame_alloc</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// å›¾åƒè½¬æ¢ä¸Šä¸‹æ–‡</span></span><br><span class="line">SwsContext *pSwsCtx = <span class="built_in">sws_getContext</span>(...);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è§£ç å¾ªç¯</span></span><br><span class="line"><span class="keyword">while</span>(<span class="built_in">av_read_frame</span>(pFormatCtx, pAVpkt) &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="built_in">avcodec_send_packet</span>(pAVctx, pAVpkt);</span><br><span class="line">    <span class="built_in">avcodec_receive_frame</span>(pAVctx, pAVframe);</span><br><span class="line">    <span class="built_in">sws_scale</span>(...);  <span class="comment">// å›¾åƒè½¬æ¢</span></span><br><span class="line">    <span class="comment">// æ˜¾ç¤ºåˆ°çª—å£</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="éŸ³é¢‘å½•åˆ¶æµç¨‹">éŸ³é¢‘å½•åˆ¶æµç¨‹</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆå§‹åŒ–</span></span><br><span class="line"><span class="built_in">avdevice_register_all</span>();</span><br><span class="line"><span class="type">const</span> AVInputFormat *fmt = <span class="built_in">av_find_input_format</span>(FMT_NAME);</span><br><span class="line"><span class="built_in">avformat_open_input</span>(...);  <span class="comment">// æ‰“å¼€éº¦å…‹é£</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å½•åˆ¶å¾ªç¯</span></span><br><span class="line"><span class="keyword">while</span>(...) &#123;</span><br><span class="line">    <span class="built_in">av_read_frame</span>(ctx, &amp;pkt);  <span class="comment">// è¯»å–PCMæ•°æ®</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æŸå¤„ç†</span></span><br><span class="line"><span class="built_in">writeWavHeader</span>(outputFile, <span class="number">44100</span>, <span class="number">2</span>, <span class="number">16</span>);  <span class="comment">// æ›´æ–°WAVå¤´éƒ¨</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">è¯¦ç»†ä»‹ç»FFmpegçš„å¸¸ç”¨å‘½ä»¤è¡Œå‚æ•°å’ŒAPIè°ƒç”¨æ–¹æ³•</summary>
    
    
    
    <category term="éŸ³è§†é¢‘å¼€å‘" scheme="https://eatbreads.github.io/categories/%E9%9F%B3%E8%A7%86%E9%A2%91%E5%BC%80%E5%8F%91/"/>
    
    
    <category term="éŸ³è§†é¢‘" scheme="https://eatbreads.github.io/tags/%E9%9F%B3%E8%A7%86%E9%A2%91/"/>
    
    <category term="FFmpeg" scheme="https://eatbreads.github.io/tags/FFmpeg/"/>
    
    <category term="å‘½ä»¤è¡Œå·¥å…·" scheme="https://eatbreads.github.io/tags/%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%B7%A5%E5%85%B7/"/>
    
  </entry>
  
  <entry>
    <title>éŸ³è§†é¢‘åŸºç¡€çŸ¥è¯†æ€»ç»“</title>
    <link href="https://eatbreads.github.io/posts/1a7c13c3.html"/>
    <id>https://eatbreads.github.io/posts/1a7c13c3.html</id>
    <published>2025-04-08T15:51:56.000Z</published>
    <updated>2025-04-08T15:53:16.141Z</updated>
    
    <content type="html"><![CDATA[<h1>éŸ³è§†é¢‘åŸºç¡€çŸ¥è¯†</h1><h2 id="åŸºæœ¬æ¦‚å¿µ">åŸºæœ¬æ¦‚å¿µ</h2><h3 id="ç ç‡-æ¯”ç‰¹ç‡">ç ç‡/æ¯”ç‰¹ç‡</h3><ul><li>å•ä½æ—¶é—´å†…ä¼ è¾“çš„æ•°æ®é‡ï¼Œå•ä½ä¸ºkbps(åƒä½æ¯ç§’)</li><li>åˆ†ç±»ï¼š<ul><li>æ’å®šç ç‡(CBR)</li><li>åŠ¨æ€ç ç‡(VBR)</li></ul></li></ul><h3 id="åˆ†è¾¨ç‡">åˆ†è¾¨ç‡</h3><ol><li>è§†é¢‘åˆ†è¾¨ç‡<ul><li>å®½Ã—é«˜ï¼Œå¦‚1080Pã€2Kç­‰</li></ul></li><li>å±å¹•åˆ†è¾¨ç‡<ul><li>å•ä½æ˜¯ppi(æ¯è‹±å¯¸åƒç´ æ•°)</li></ul></li><li>ä½åˆ†è¾¨ç‡<ul><li>æ¯ä¸ªåƒç´ ç‚¹å­˜å‚¨ä¿¡æ¯çš„ä½æ•°</li><li>å¦‚8ä½ã€16ä½è‰²å½©ç­‰</li></ul></li></ol><h3 id="å¸§ç‡">å¸§ç‡</h3><ol><li>è§†é¢‘å¸§ç‡<ul><li>ç”±è§†é¢‘æœ¬èº«å†³å®š</li><li>FPS(æ¯ç§’æ˜¾ç¤ºå¸§æ•°)</li></ul></li><li>æ˜¾ç¤ºå¸§ç‡<ul><li>ç”±æ˜¾ç¤ºå™¨å†³å®š</li><li>æ˜¾ç¤ºå™¨åˆ·æ–°ç‡</li></ul></li></ol><h3 id="åƒç´ æ ¼å¼">åƒç´ æ ¼å¼</h3><ol><li>RGBA<ul><li>çº¢ç»¿è“å’ŒAlphaé€æ˜åº¦</li><li>ç±»ä¼¼äºå·²å®Œæˆçš„æˆå“</li></ul></li><li>YUV<ul><li>Yï¼šäº®åº¦</li><li>Uï¼šè‰²åº¦</li><li>Vï¼šå¯¹æ¯”åº¦</li><li>æ³¨ï¼šè§†é¢‘å¸¸ç”¨YUVï¼Œå› ä¸ºRGBAå ç”¨å†…å­˜å¤ªå¤§</li><li>å‹ç¼©åè½¬ä¸ºh264(é€šè¿‡ç¼–ç å™¨)</li></ul></li></ol><h3 id="éŸ³é¢‘æ ¼å¼">éŸ³é¢‘æ ¼å¼</h3><ol><li>PCM<ul><li>åŸå§‹æ•°æ®</li><li>å‹ç¼©åè½¬ä¸ºAACå¸§(é€šè¿‡AACç¼–ç å™¨)</li></ul></li></ol><h2 id="ç”»è´¨ç›¸å…³">ç”»è´¨ç›¸å…³</h2><h3 id="ç”»è´¨è¦ç´ ">ç”»è´¨è¦ç´ </h3><ol><li>æ¸…æ™°åº¦ï¼šç»†èŠ‚çº¹ç†å’Œè¾¹ç•Œçš„æ¸…æ™°ç¨‹åº¦</li><li>é”åº¦ï¼šå›¾åƒè¾¹ç¼˜çš„é”åˆ©ç¨‹åº¦</li><li>è§£æåº¦<ul><li>åƒç´ ç‚¹æ•°é‡</li><li>åˆ†è¾¨ç‡è¶Šé«˜è§£æåº¦è¶Šé«˜</li></ul></li><li>è‰²å½©çº¯åº¦ï¼šä¸‰åŸè‰²åœ¨è‰²å½©ä¸­çš„ç™¾åˆ†æ¯”ï¼Œè¶Šé«˜è¶Šé²œè‰³</li></ol><h3 id="è‰²åŸŸä¸HDR">è‰²åŸŸä¸HDR</h3><ul><li>è‰²åŸŸï¼šèƒ½è¡¨è¾¾çš„é¢œè‰²èŒƒå›´åŒºåŸŸ</li><li>HDRï¼šé«˜åŠ¨æ€èŒƒå›´ï¼Œå¯è¶…å‡ºæ™®é€š[0,1]èŒƒå›´</li></ul><h2 id="å°è£…ä¸ç¼–ç ">å°è£…ä¸ç¼–ç </h2><h3 id="å°è£…æ ¼å¼">å°è£…æ ¼å¼</h3><p>è§†é¢‘å°è£…æ ¼å¼å°±åƒä¸€ä¸ªåŒ…è£…ç›’ï¼ŒåŒ…å«ï¼š</p><ol><li>æ ¼å¼å¤´ï¼šç±»ä¼¼å¿«é€’å•å·ï¼ŒåŒ…å«æ–‡ä»¶å…ƒæ•°æ®</li><li>åª’ä½“ä¿¡æ¯ï¼šåŒ…æ‹¬æ—¶é•¿ã€æ ¼å¼ã€æ¯”ç‰¹ç‡ç­‰</li><li>éŸ³è§†é¢‘è½¨ï¼šå®é™…çš„éŸ³é¢‘ã€è§†é¢‘ã€å­—å¹•æ•°æ®</li><li>è§†é¢‘è½¨ç´¢å¼•ï¼šæŒ‡ç¤ºæ’­æ”¾å™¨æ•°æ®å­˜å‚¨ä½ç½®<br>å¸¸è§æ ¼å¼ï¼šMP4ã€MKVã€MOVç­‰</li></ol><h3 id="ç¼–ç åè®®">ç¼–ç åè®®</h3><ul><li>æ˜¯å‹ç¼©åŸå§‹è§†é¢‘æ•°æ®çš„æ–¹å¼</li><li>h265å‹ç¼©ç‡æ›´é«˜ä½†è§£ç è¦æ±‚æ›´é«˜</li></ul><h3 id="éŸ³é¢‘ç›¸å…³">éŸ³é¢‘ç›¸å…³</h3><ol><li>é‡‡æ ·ç‡ï¼šæ¯ç§’é‡‡æ ·æ¬¡æ•°(äººè€³æ„ŸçŸ¥èŒƒå›´20Hz~20kHz)</li><li>å£°é“ï¼šç‹¬ç«‹éŸ³é¢‘ä¿¡å·çš„é‡‡é›†/å›æ”¾ä½ç½®</li><li>éŸ³é¢‘å°è£…æ ¼å¼ï¼šmp3ã€wavã€aacç­‰</li><li>éŸ³é¢‘ç¼–ç åè®®ï¼šmp3ã€aacç­‰</li></ol><h2 id="H264ç¼–ç åŸç†">H264ç¼–ç åŸç†</h2><h3 id="ç æµæ–‡ä»¶åˆ†å±‚">ç æµæ–‡ä»¶åˆ†å±‚</h3><ol><li>VAL(è§†é¢‘ç¼–ç å±‚)<ul><li>å‹ç¼©ç¼–ç åçš„è§†é¢‘æ•°æ®åºåˆ—</li></ul></li><li>NAL(ç½‘ç»œæå–å±‚)<ul><li>è´Ÿè´£ç½‘ç»œä¼ è¾“æ‰“åŒ…</li><li>æœ¬åœ°å’Œç½‘ç»œæ’­æ”¾éƒ½éœ€è¦</li><li>æœ¬è´¨æ˜¯æ‰“åŒ…å¹¶æŒ‰åºå‘é€ç»™è§£ç å™¨</li></ul></li></ol><h3 id="å¸§ç±»å‹">å¸§ç±»å‹</h3><ol><li>Iå¸§ï¼šå®Œæ•´å‹ç¼©å¸§</li><li>På¸§ï¼šåªç¼–ç ä¸å‰å¸§å·®å¼‚</li><li>Bå¸§ï¼šå‚è€ƒå‰åå¸§</li><li>IDRå¸§ï¼šç‰¹æ®ŠIå¸§ï¼Œç”¨äºGOPé‡ç½®</li><li>GOPç»„ï¼šå›¾åƒç»„ï¼Œå…³é”®å¸§é—´éš”</li></ol>]]></content>
    
    
    <summary type="html">è¯¦ç»†ä»‹ç»éŸ³è§†é¢‘å¼€å‘ä¸­çš„åŸºç¡€æ¦‚å¿µï¼ŒåŒ…æ‹¬ç ç‡ã€åˆ†è¾¨ç‡ã€å¸§ç‡ç­‰æ ¸å¿ƒçŸ¥è¯†ç‚¹</summary>
    
    
    
    <category term="éŸ³è§†é¢‘å¼€å‘" scheme="https://eatbreads.github.io/categories/%E9%9F%B3%E8%A7%86%E9%A2%91%E5%BC%80%E5%8F%91/"/>
    
    
    <category term="éŸ³è§†é¢‘" scheme="https://eatbreads.github.io/tags/%E9%9F%B3%E8%A7%86%E9%A2%91/"/>
    
    <category term="ç¼–è§£ç " scheme="https://eatbreads.github.io/tags/%E7%BC%96%E8%A7%A3%E7%A0%81/"/>
    
  </entry>
  
  <entry>
    <title>è§£å†³äº‘æœåŠ¡å™¨Dockerä»“åº“è®¿é—®é—®é¢˜</title>
    <link href="https://eatbreads.github.io/posts/f4beb750.html"/>
    <id>https://eatbreads.github.io/posts/f4beb750.html</id>
    <published>2025-04-07T13:10:31.000Z</published>
    <updated>2025-04-07T13:11:35.728Z</updated>
    
    <content type="html"><![CDATA[<h1>äº‘æœåŠ¡å™¨è¿è¡ŒSuperseté‡åˆ°çš„é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ</h1><h2 id="Dockeré•œåƒä¸‹è½½é—®é¢˜">Dockeré•œåƒä¸‹è½½é—®é¢˜</h2><h3 id="åˆå§‹å°è¯•">åˆå§‹å°è¯•</h3><p>åœ¨ä½¿ç”¨docker-composeéƒ¨ç½²Supersetæ—¶ï¼Œé‡åˆ°é•œåƒæ— æ³•ä¸‹è½½çš„é—®é¢˜ã€‚è™½ç„¶é€šè¿‡åœ¨<code>/etc/docker/daemon.json</code>ä¸­æ·»åŠ å›½å†…é•œåƒä»£ç†æˆåŠŸä¸‹è½½äº†redisã€postgresqlç­‰é•œåƒï¼Œä½†Supersetæœ¬ä½“é•œåƒå§‹ç»ˆæ— æ³•ä¸‹è½½ã€‚</p><h3 id="è§£å†³æ–¹æ¡ˆ">è§£å†³æ–¹æ¡ˆ</h3><p>é‡‡ç”¨æœ¬åœ°æ‰“åŒ…ä¸Šä¼ çš„æ–¹å¼è§£å†³ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æœ¬åœ°æ‰“åŒ…é•œåƒ</span></span><br><span class="line">docker save -o apache-superset.tar apachesuperset.docker.scarf.sh/apache/superset</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸Šä¼ åˆ°æœåŠ¡å™¨</span></span><br><span class="line">scp apache-superset.tar ubuntu@43.138.190.230:/home/ubuntu</span><br><span class="line"></span><br><span class="line"><span class="comment"># æœåŠ¡å™¨ç«¯åŠ è½½é•œåƒ</span></span><br><span class="line">docker load -i /home/ubuntu/apache-superset.tar</span><br></pre></td></tr></table></figure><h2 id="è®¿é—®è¿æ¥é—®é¢˜">è®¿é—®è¿æ¥é—®é¢˜</h2><h3 id="é‡åˆ°çš„æƒ…å†µ">é‡åˆ°çš„æƒ…å†µ</h3><ol><li>ç›´æ¥é€šè¿‡å…¬ç½‘IPè®¿é—®æ— å“åº”</li><li>VSCodeè¿œç¨‹è¿æ¥å¹¶ç«¯å£è½¬å‘åï¼Œå¯ä»¥é€šè¿‡localhost:8088è®¿é—®</li><li>Postmanæµ‹è¯•æ˜¾ç¤º502 Bad Gateway</li></ol><h3 id="è§£å†³æ­¥éª¤">è§£å†³æ­¥éª¤</h3><ol><li>æ£€æŸ¥å¹¶é…ç½®æœåŠ¡å™¨é˜²ç«å¢™</li><li>é…ç½®åæˆåŠŸé€šè¿‡Postmanè¿æ¥</li><li>Superset webç•Œé¢ä¹Ÿå¯ä»¥æ­£å¸¸è®¿é—®<br><img src="https://cdn-a.markji.com/files/67efcd9ae940a885d8a48f83_hd.png?e=1744033979105&amp;token=xX63b9jqTlDOcGmctt5K9254rV0LG8hS9BmDeFBy:C0FkwH4dORtyDjhWTd4laK_13UU=" alt="å›¾ç‰‡1"></li></ol><h2 id="MySQLéƒ¨ç½²é—®é¢˜">MySQLéƒ¨ç½²é—®é¢˜</h2><p>åŒæ ·é‡åˆ°äº†VSCodeè¿æ¥é—®é¢˜ï¼Œä½†æœ€ç»ˆä¹Ÿå¾—åˆ°è§£å†³ã€‚</p><h2 id="æ€»ç»“ç»éªŒ">æ€»ç»“ç»éªŒ</h2><ol><li>å›½å†…ç¯å¢ƒä¸‹å¯èƒ½éœ€è¦ä½¿ç”¨é•œåƒæ‰“åŒ…ä¼ è¾“çš„æ–¹å¼</li><li>æ³¨æ„æ£€æŸ¥é˜²ç«å¢™é…ç½®</li><li>ç«¯å£è½¬å‘å¯ä»¥ä½œä¸ºä¸´æ—¶çš„è°ƒè¯•æ–¹æ¡ˆ</li></ol>]]></content>
    
    
    <summary type="html">è®°å½•åœ¨äº‘æœåŠ¡å™¨ä¸Šéƒ¨ç½²Supersetæ—¶é‡åˆ°çš„Dockeré•œåƒä¸‹è½½å’Œè®¿é—®é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ</summary>
    
    
    
    <category term="è¿ç»´ç¬”è®°" scheme="https://eatbreads.github.io/categories/%E8%BF%90%E7%BB%B4%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="Docker" scheme="https://eatbreads.github.io/tags/Docker/"/>
    
    <category term="äº‘æœåŠ¡å™¨" scheme="https://eatbreads.github.io/tags/%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8/"/>
    
    <category term="Superset" scheme="https://eatbreads.github.io/tags/Superset/"/>
    
  </entry>
  
  <entry>
    <title>OpenGLçš„GLSLè¯­æ³•åŸºç¡€</title>
    <link href="https://eatbreads.github.io/posts/f4cb9256.html"/>
    <id>https://eatbreads.github.io/posts/f4cb9256.html</id>
    <published>2025-04-07T13:07:49.000Z</published>
    <updated>2025-04-07T13:09:32.365Z</updated>
    
    <content type="html"><![CDATA[<h1>OpenGL GLSLè¯­æ³•åŸºç¡€</h1><h2 id="åŸºæœ¬ç±»å‹">åŸºæœ¬ç±»å‹</h2><h3 id="sampler">sampler</h3><p>é‡‡æ ·å™¨ç±»å‹ï¼Œä½œä¸ºè®¿é—®çº¹ç†å›¾åƒçš„ä¸é€æ˜å¥æŸ„ã€‚</p><h3 id="ç±»å‹è½¬æ¢">ç±»å‹è½¬æ¢</h3><p>GLSLä¸­å˜é‡çš„ç±»å‹è½¬æ¢éå¸¸ä¸¥æ ¼ï¼Œæ²¡æœ‰éšå¼ç±»å‹è½¬æ¢ï¼Œæ¯”C++çš„è¦æ±‚æ›´ä¸¥æ ¼ã€‚ä¸åŒç±»å‹é—´çš„è½¬æ¢éœ€è¦ä½¿ç”¨ç±»ä¼¼æ„é€ å‡½æ•°çš„è¯­æ³•ã€‚</p><h2 id="å‘é‡å’ŒçŸ©é˜µ">å‘é‡å’ŒçŸ©é˜µ</h2><h3 id="å‘é‡ç‰¹æ€§">å‘é‡ç‰¹æ€§</h3><ul><li>å‘é‡ä¸æ˜¯æ•°ç»„ï¼ˆä¾‹å¦‚<code>float coeff[3]</code>æ‰æ˜¯æ•°ç»„ï¼‰</li><li>OpenGLçš„å‘é‡ä½¿ç”¨åˆ—ä¸»åºï¼Œä¸C/C++ä¸åŒï¼Œç›¸å½“äºæ–œå¯¹è§’é•œåƒ</li><li>å‘é‡é»˜è®¤æ˜¯floatç±»å‹ï¼Œå¦‚vec2/3/4ï¼Œmat2/3/4æˆ–mat2x3ï¼Œmat3x4</li><li>æ•´å‹å‘é‡ä½¿ç”¨ivecå‰ç¼€</li><li>å¸ƒå°”å‘é‡ä½¿ç”¨bvecå‰ç¼€</li></ul><h3 id="çŸ©é˜µè¡¨ç¤º">çŸ©é˜µè¡¨ç¤º</h3><p>mat3x4è¡¨ç¤ºä¸‰åˆ—å››è¡Œçš„çŸ©é˜µï¼Œå¯¹åº”C++ä¸­çš„[4][3]çŸ©é˜µ</p><h2 id="é™å®šç¬¦">é™å®šç¬¦</h2><h3 id="å¸ƒå±€é™å®šç¬¦-layout">å¸ƒå±€é™å®šç¬¦(layout)</h3><ul><li>åªèƒ½ç”¨äºé¡¶ç‚¹ç€è‰²å™¨çš„è¾“å…¥</li><li>é¡¶ç‚¹ç€è‰²å™¨çš„è¾“å‡ºå’Œç‰‡æ®µç€è‰²å™¨ä¸å¯ä½¿ç”¨</li></ul><figure class="highlight glsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">layout</span>(<span class="keyword">location</span> = <span class="number">0</span>) <span class="keyword">in</span> <span class="type">vec4</span> vPosition;  <span class="comment">// æŒ‡å®šè¾“å…¥å˜é‡vPositionçš„ç»‘å®šä½ç½®ä¸º0</span></span><br></pre></td></tr></table></figure><h3 id="æ•°æ®ä¼ è¾“">æ•°æ®ä¼ è¾“</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å°†é¡¶ç‚¹æ•°ç»„ä¼ å…¥ç€è‰²å™¨å‘é‡</span></span><br><span class="line"><span class="built_in">glVertexAttribPointer</span>(<span class="number">0</span>, <span class="number">4</span>, GL_FLOAT, GL_FALSE, <span class="number">0</span>, vVertices);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¿€æ´»å¯¹åº”ä½ç½®çš„å‘é‡</span></span><br><span class="line"><span class="built_in">glEnableVertexAttribArray</span>(<span class="number">0</span>);</span><br></pre></td></tr></table></figure><h3 id="ç±»å‹é™å®šç¬¦">ç±»å‹é™å®šç¬¦</h3><h4 id="in">in</h4><p>ç”¨äºå£°æ˜ç€è‰²å™¨çš„è¾“å…¥å˜é‡</p><h4 id="out">out</h4><p>å£°æ˜ç€è‰²å™¨é˜¶æ®µçš„è¾“å‡ºå˜é‡ï¼Œè¿™äº›å˜é‡ä¼šä¼ é€’åˆ°ä¸‹ä¸€ä¸ªç€è‰²å™¨é˜¶æ®µ</p><h4 id="invariant">invariant</h4><p>ç¡®ä¿å¤šé“æ¸²æŸ“æ—¶ç€è‰²å™¨è®¡ç®—ç»“æœçš„ä¸€è‡´æ€§ï¼Œé¿å…å› è®¡ç®—é¡ºåºç­‰å› ç´ å¯¼è‡´çš„è¯¯å·®</p><h4 id="uniform">uniform</h4><ul><li>æŒ‡å®šuniformç±»å‹å˜é‡ï¼Œå…¶å€¼åœ¨ç»˜åˆ¶è°ƒç”¨é—´ä¿æŒä¸å˜</li><li>æ“ä½œuniformçš„æ–¹æ³•ï¼š</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">glUseProgram</span>(programId);</span><br><span class="line"><span class="built_in">glUniform2f</span>(offsetLocationId, fXOffset, fYOffset);</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">OpenGLç€è‰²å™¨è¯­è¨€GLSLçš„åŸºç¡€è¯­æ³•ä»‹ç»</summary>
    
    
    
    <category term="å›¾å½¢ç¼–ç¨‹" scheme="https://eatbreads.github.io/categories/%E5%9B%BE%E5%BD%A2%E7%BC%96%E7%A8%8B/"/>
    
    
    <category term="OpenGL" scheme="https://eatbreads.github.io/tags/OpenGL/"/>
    
    <category term="GLSL" scheme="https://eatbreads.github.io/tags/GLSL/"/>
    
    <category term="å›¾å½¢ç¼–ç¨‹" scheme="https://eatbreads.github.io/tags/%E5%9B%BE%E5%BD%A2%E7%BC%96%E7%A8%8B/"/>
    
  </entry>
  
</feed>
